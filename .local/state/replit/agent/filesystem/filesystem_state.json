{"file_contents":{"client/src/pages/not-found.tsx":{"content":"import { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Home, ArrowLeft } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      <main className=\"flex-1 flex items-center justify-center\">\n        <div className=\"text-center px-4\">\n          <div className=\"text-8xl font-bold text-primary/20 mb-4\">404</div>\n          <h1 className=\"text-3xl font-bold mb-4\">Page introuvable</h1>\n          <p className=\"text-muted-foreground mb-8 max-w-md mx-auto\">\n            La page que vous cherchez n'existe pas ou a été déplacée.\n          </p>\n          <div className=\"flex items-center justify-center gap-4\">\n            <Link href=\"/\">\n              <Button data-testid=\"button-go-home\">\n                <Home className=\"h-4 w-4 mr-2\" />\n                Retour à l'accueil\n              </Button>\n            </Link>\n            <Button \n              variant=\"outline\" \n              onClick={() => window.history.back()}\n              data-testid=\"button-go-back\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Page précédente\n            </Button>\n          </div>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":1393},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"replit.md":{"content":"# AlloBricolage - AI-Powered Handyman Marketplace\n\n## Overview\n\nAlloBricolage is an AI-native marketplace platform connecting clients with handyman technicians in Morocco. The platform provides intelligent job matching, automated cost estimation, and dynamic pricing using Google Gemini and OpenAI models. The core business logic is driven by AI decision-making, from natural language job description parsing to technician matching algorithms.\n\nThe platform supports bilingual operations (French and Arabic with RTL support) and focuses on 10 primary handyman services across major Moroccan cities including Casablanca, Rabat, Marrakech, and others.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Technology Stack**\n- **Framework**: React with TypeScript\n- **Routing**: Wouter (lightweight client-side routing)\n- **UI Components**: Radix UI primitives with shadcn/ui design system\n- **Styling**: Tailwind CSS with custom design tokens following the \"New York\" style variant\n- **State Management**: TanStack Query (React Query) for server state\n- **Forms**: React Hook Form with Zod validation\n- **Build Tool**: Vite\n\n**Design System Approach**\nThe application follows a reference-based hybrid design approach, drawing inspiration from Airbnb's marketplace trust signals, Uber's real-time matching UI, and Material Design's data-dense patterns. Typography uses Inter for primary content and Cairo for Arabic RTL support. The layout system employs consistent Tailwind spacing primitives (3, 4, 6, 8, 12, 16, 20 units) with a max-width container of 7xl.\n\n**Key UI Patterns**\n- Conversational card-based job posting flow with real-time AI feedback\n- Technician matching results displayed in responsive card grids (2-3 columns desktop, 1 column mobile)\n- Match score badges with AI-generated explanations for transparency\n- Progressive disclosure pattern for complex forms\n\n### Backend Architecture\n\n**Technology Stack**\n- **Runtime**: Node.js with TypeScript\n- **Framework**: Express.js\n- **Database ORM**: Drizzle ORM\n- **Database**: PostgreSQL (via Neon serverless)\n- **AI Services**: Google Gemini 2.5 Flash and OpenAI GPT-5\n- **Session Management**: Connect-pg-simple for PostgreSQL-backed sessions\n\n**API Design**\nRESTful API with route handlers organized in `server/routes.ts`. Key endpoints include:\n- `/api/jobs/analyze` - AI-powered job description analysis\n- `/api/jobs` - Job creation with automatic technician matching\n- `/api/bookings` - Booking management with upsell suggestions\n- `/api/client/stats` - Client dashboard statistics\n- `/api/client/jobs` - Client job listings\n- `/api/chat/darija` - DarijaChat AI support (Darija/French/Arabic)\n\n**AI Service Layer**\nCentralized in `server/ai-service.ts`, implementing multiple AI-powered features:\n- Natural language processing for job descriptions (supports French and Arabic)\n- Service category extraction using keyword mapping\n- Urgency and complexity level detection\n- Dynamic cost estimation with market comparison\n- Technician matching algorithm (XGBoost-style scoring)\n- Personalized upsell suggestions based on job context\n- DarijaChat: AI-powered customer support in Moroccan Darija\n\n**Data Storage Strategy**\nDual-layer approach:\n- **Development**: In-memory storage implementation (`MemStorage` class) for rapid prototyping\n- **Production**: PostgreSQL with Drizzle ORM for persistent storage\n\nThe schema supports technicians, jobs, bookings, and users with proper relational constraints. Service categories and Moroccan cities are defined as typed constants for type safety.\n\n### Core Business Logic\n\n**AI-Native Decision Engine**\nEvery major user interaction flows through AI models:\n\n1. **Job Analysis Pipeline**: User describes problem in natural language → AI extracts service type, urgency, complexity, and specific issues → Returns structured data for matching\n2. **Cost Estimation**: Combines job complexity, service type, city market rates, and urgency to calculate price ranges with confidence scores\n3. **Technician Matching**: Scores available technicians based on service expertise, location proximity, availability, response time, completion rate, and years of experience\n4. **Upsell Generation**: Analyzes job context to suggest complementary services with dynamic pricing and discount optimization\n\n**Matching Algorithm Factors**\n- Service expertise match (primary filter)\n- Geographic proximity to job location\n- Technician availability and response time\n- Historical completion rates and ratings\n- Years of experience in specific service category\n- Real-time availability status\n\n### Internationalization & Localization\n\n**Bilingual Support**\n- Built-in i18n context provider (`client/src/lib/i18n.tsx`)\n- Language toggle between French and Arabic\n- RTL layout support for Arabic using Cairo font\n- Translation keys organized by feature area (navigation, services, job posting, etc.)\n\n**Moroccan Market Specifics**\n- Service categories tailored to Moroccan handyman market (10 categories from plumbing to gardening)\n- City-specific pricing and availability\n- Dual-language keyword matching for AI service extraction\n\n### Theme System\n\nCustom theme provider with light/dark mode support. Color tokens defined using HSL with CSS custom properties for dynamic theming. Includes specialized tokens for:\n- Card variants (default, sidebar, popover)\n- Primary, secondary, muted, accent, and destructive color schemes\n- Chart colors for data visualization\n- Shadow and elevation utilities\n\n## External Dependencies\n\n### AI & Machine Learning Services\n\n**Google Gemini API** (`@google/genai`)\n- Model: gemini-2.5-flash\n- Primary use: Natural language understanding for job descriptions, urgency detection, and complexity analysis\n- Handles bilingual input (French/Arabic)\n\n**OpenAI API** (`openai`)\n- Model: GPT-5 (released August 7, 2025)\n- Primary use: Intent extraction, structured data generation, and cost estimation\n- Provides JSON-formatted outputs for job analysis\n\n### Database & Storage\n\n**Neon Serverless PostgreSQL** (`@neondatabase/serverless`)\n- Serverless PostgreSQL database\n- Managed via `DATABASE_URL` environment variable\n- Drizzle ORM configuration in `drizzle.config.ts`\n\n**Drizzle ORM** (`drizzle-orm`, `drizzle-zod`)\n- Type-safe database queries\n- Schema-to-Zod validation generation\n- Migration management via `drizzle-kit`\n\n### UI Component Libraries\n\n**Radix UI** (multiple packages)\n- Headless, accessible UI primitives\n- Components used: Dialog, Dropdown Menu, Select, Accordion, Avatar, Badge, Checkbox, Popover, Progress, Radio Group, Scroll Area, Slider, Switch, Tabs, Toast, Tooltip\n\n**shadcn/ui**\n- Pre-configured Radix UI components with Tailwind styling\n- Configuration in `components.json` with \"new-york\" style variant\n\n### Build & Development Tools\n\n**Vite**\n- Frontend build tool and dev server\n- Custom configuration with Replit-specific plugins for development\n- Production builds output to `dist/public`\n\n**TypeScript**\n- Strict mode enabled\n- Path aliases configured (@/, @shared/, @assets/)\n- ESNext module resolution with bundler mode\n\n### Supporting Libraries\n\n- **TanStack Query** - Server state management and caching\n- **Wouter** - Lightweight client-side routing\n- **React Hook Form** + **Zod** - Form validation\n- **Tailwind CSS** + **PostCSS** - Styling\n- **date-fns** - Date manipulation\n- **class-variance-authority** - Component variant management\n- **cmdk** - Command palette component\n\n### Environment Requirements\n\nRequired environment variables:\n- `DATABASE_URL` - PostgreSQL connection string (Neon)\n- `OPENAI_API_KEY` - OpenAI API authentication\n- `GEMINI_API_KEY` - Google Gemini API authentication\n- `NODE_ENV` - Environment indicator (development/production)\n- `SESSION_SECRET` - Express session secret for cookie signing\n\n## Recent Changes (November 2025)\n\n### Authentication System Updates\n- **bcrypt password hashing**: Replaced insecure Base64 encoding with bcrypt (10 rounds) for secure password storage\n- **Middleware ordering fix**: User-loading middleware now runs before route handlers to ensure req.user is available\n- **Dual registration flows**: Separate `/signup/client` and `/signup/technician` pages with role-specific forms\n- **Extended signup payload**: Technician registration now captures services, yearsExperience, hourlyRate, and bio\n\n### Schema Refactoring\n- **Technician-User linking**: Technicians table now uses mandatory `userId` field (unique, not null) to link to users table\n- **Profile data consolidation**: Personal details (name, phone, city) stored only in users table; professional metadata (services, bio, rates) in technicians table\n- **TechnicianWithUser type**: Merged type for frontend display combining technician + user fields\n\n### Key Files\n- `server/auth.ts` - Passport.js local strategy with bcrypt, session handling\n- `server/storage.ts` - MemStorage with paired user+technician seeding\n- `shared/schema.ts` - Drizzle schemas with insert/select types\n- `client/src/lib/auth.tsx` - Auth context with signupClient, signupTechnician methods\n\n### DarijaChat Support Widget (November 2025)\n- **Component**: `client/src/components/chat/DarijaChat.tsx` - Floating chat widget\n- **Features**: Minimizable/expandable, trilingual support (Darija/French/Arabic)\n- **AI Backend**: Uses OpenAI GPT-5 or Gemini 2.5 Flash with Darija prompts\n- **Fallback**: Pre-defined Darija responses when AI unavailable\n\n### Client Dashboard (November 2025)\n- **Component**: `client/src/pages/ClientDashboard.tsx`\n- **Stats Cards**: Active jobs, completed jobs, total spent, average rating given\n- **Tabs**: Overview (recent jobs + help), Active jobs, History\n- **API**: `/api/client/stats`, `/api/client/jobs`\n\n### Terminology Update (November 2025)\n- Changed all references from \"artisans\" to \"techniciens\" in UI and translations\n- Removed \"47 modèles IA\" marketing references from Hero and Footer\n- Updated Hero badge to \"Matching intelligent des techniciens\"\n\n### Design System Colors\n- **Primary (Royal Blue)**: #1e40af / hsl(223, 71%, 40%)\n- **Accent (Sunset Orange)**: #ea580c / hsl(21, 90%, 48%)\n\n### Recommended Next Steps\n1. Add Zod validation for signup payload (numeric ranges, phone formatting)\n2. Backfill hashed passwords for seeded test accounts\n3. Build remaining screens (technician dashboard improvements, admin screens)\n4. Implement remaining REST API endpoints per specification","size_bytes":10451},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/pages/ClientDashboard.tsx":{"content":"import { useState } from \"react\";\nimport { Link } from \"wouter\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useAuth } from \"@/lib/auth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { \n  Briefcase, \n  Clock, \n  CheckCircle, \n  Wallet,\n  MapPin, \n  Calendar,\n  ChevronRight,\n  Plus,\n  Star,\n  Phone,\n  MessageCircle\n} from \"lucide-react\";\n\ninterface ClientJob {\n  id: string;\n  description: string;\n  service: string;\n  city: string;\n  urgency: string;\n  status: string;\n  estimatedCost: number;\n  technicianName?: string;\n  technicianRating?: number;\n  scheduledDate?: string;\n  createdAt: string;\n}\n\ninterface ClientStats {\n  activeJobs: number;\n  completedJobs: number;\n  totalSpent: number;\n  averageRating: number;\n}\n\nexport default function ClientDashboard() {\n  const { t } = useI18n();\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState(\"overview\");\n\n  const { data: stats, isLoading: statsLoading } = useQuery<ClientStats>({\n    queryKey: [\"/api/client/stats\"],\n  });\n\n  const { data: jobs, isLoading: jobsLoading } = useQuery<ClientJob[]>({\n    queryKey: [\"/api/client/jobs\"],\n  });\n\n  const activeJobs = jobs?.filter(j => j.status === \"pending\" || j.status === \"accepted\") || [];\n  const completedJobs = jobs?.filter(j => j.status === \"completed\") || [];\n\n  const getStatusBadge = (status: string) => {\n    const styles: Record<string, string> = {\n      pending: \"bg-yellow-500/10 text-yellow-600 border-yellow-500/20\",\n      accepted: \"bg-blue-500/10 text-blue-600 border-blue-500/20\",\n      in_progress: \"bg-accent/10 text-accent border-accent/20\",\n      completed: \"bg-green-500/10 text-green-600 border-green-500/20\",\n      cancelled: \"bg-red-500/10 text-red-600 border-red-500/20\",\n    };\n    const labels: Record<string, string> = {\n      pending: \"En attente\",\n      accepted: \"Accepté\",\n      in_progress: \"En cours\",\n      completed: \"Terminé\",\n      cancelled: \"Annulé\",\n    };\n    return (\n      <Badge className={`${styles[status] || styles.pending} border`}>\n        {labels[status] || status}\n      </Badge>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      <main className=\"flex-1 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h1 className=\"text-3xl font-bold\" data-testid=\"text-client-dashboard-title\">\n                {t(\"client.dashboard\")}\n              </h1>\n              <p className=\"text-muted-foreground\">\n                Bienvenue, {user?.name || user?.username}\n              </p>\n            </div>\n            <Link href=\"/post-job\">\n              <Button data-testid=\"button-new-job\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Nouveau travail\n              </Button>\n            </Link>\n          </div>\n\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center\">\n                  <Briefcase className=\"h-6 w-6 text-primary\" />\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold mb-1\" data-testid=\"text-active-jobs-count\">\n                {statsLoading ? (\n                  <div className=\"h-8 w-16 bg-muted rounded animate-pulse\" />\n                ) : (\n                  stats?.activeJobs || activeJobs.length || 0\n                )}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">{t(\"client.activeJobs\")}</p>\n            </Card>\n\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-green-500/10 flex items-center justify-center\">\n                  <CheckCircle className=\"h-6 w-6 text-green-500\" />\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold mb-1\" data-testid=\"text-completed-jobs-count\">\n                {statsLoading ? (\n                  <div className=\"h-8 w-16 bg-muted rounded animate-pulse\" />\n                ) : (\n                  stats?.completedJobs || completedJobs.length || 0\n                )}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">{t(\"client.completedJobs\")}</p>\n            </Card>\n\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-accent/10 flex items-center justify-center\">\n                  <Wallet className=\"h-6 w-6 text-accent\" />\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold mb-1\" data-testid=\"text-total-spent\">\n                {statsLoading ? (\n                  <div className=\"h-8 w-24 bg-muted rounded animate-pulse\" />\n                ) : (\n                  <>{(stats?.totalSpent || 0).toLocaleString()} {t(\"common.mad\")}</>\n                )}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">{t(\"client.totalSpent\")}</p>\n            </Card>\n\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-yellow-500/10 flex items-center justify-center\">\n                  <Star className=\"h-6 w-6 text-yellow-500\" />\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold mb-1 flex items-center gap-2\">\n                {statsLoading ? (\n                  <div className=\"h-8 w-16 bg-muted rounded animate-pulse\" />\n                ) : (\n                  <>\n                    {(stats?.averageRating || 4.5).toFixed(1)}\n                    <Star className=\"h-5 w-5 text-yellow-500 fill-yellow-500\" />\n                  </>\n                )}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">Note donnée</p>\n            </Card>\n          </div>\n\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className=\"mb-6\">\n              <TabsTrigger value=\"overview\" data-testid=\"tab-client-overview\">\n                Vue d'ensemble\n              </TabsTrigger>\n              <TabsTrigger value=\"active\" data-testid=\"tab-client-active\">\n                Travaux actifs ({activeJobs.length})\n              </TabsTrigger>\n              <TabsTrigger value=\"history\" data-testid=\"tab-client-history\">\n                Historique\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"overview\">\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <Card className=\"p-6\">\n                  <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\n                    <Clock className=\"h-5 w-5 text-primary\" />\n                    Travaux récents\n                  </h3>\n                  {activeJobs.length > 0 ? (\n                    <div className=\"space-y-3\">\n                      {activeJobs.slice(0, 3).map((job) => (\n                        <div \n                          key={job.id}\n                          className=\"flex items-center justify-between p-3 rounded-lg bg-muted/50 border border-border\"\n                          data-testid={`card-recent-job-${job.id}`}\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                              <Briefcase className=\"h-5 w-5 text-primary\" />\n                            </div>\n                            <div>\n                              <p className=\"font-medium text-sm\">{job.service}</p>\n                              <p className=\"text-xs text-muted-foreground\">{job.city}</p>\n                            </div>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            {getStatusBadge(job.status)}\n                            <ChevronRight className=\"h-5 w-5 text-muted-foreground\" />\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <Briefcase className=\"h-10 w-10 mx-auto mb-3 opacity-50\" />\n                      <p>{t(\"client.noJobs\")}</p>\n                      <Link href=\"/post-job\">\n                        <Button variant=\"outline\" className=\"mt-4\" data-testid=\"button-post-first-job\">\n                          <Plus className=\"h-4 w-4 mr-2\" />\n                          {t(\"client.postFirst\")}\n                        </Button>\n                      </Link>\n                    </div>\n                  )}\n                </Card>\n\n                <Card className=\"p-6\">\n                  <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\n                    <MessageCircle className=\"h-5 w-5 text-accent\" />\n                    Besoin d'aide?\n                  </h3>\n                  <p className=\"text-muted-foreground mb-4\">\n                    Notre support DarijaChat est disponible 24/7 pour vous aider en Darija, Français ou Arabe.\n                  </p>\n                  <Button variant=\"outline\" className=\"w-full\" data-testid=\"button-open-chat\">\n                    <MessageCircle className=\"h-4 w-4 mr-2\" />\n                    Ouvrir le chat\n                  </Button>\n                </Card>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"active\">\n              <div className=\"space-y-4\">\n                {jobsLoading ? (\n                  <div className=\"space-y-4\">\n                    {[1, 2, 3].map((i) => (\n                      <Card key={i} className=\"p-6\">\n                        <div className=\"animate-pulse space-y-4\">\n                          <div className=\"h-6 bg-muted rounded w-1/3\" />\n                          <div className=\"h-4 bg-muted rounded w-2/3\" />\n                          <div className=\"h-10 bg-muted rounded w-1/4\" />\n                        </div>\n                      </Card>\n                    ))}\n                  </div>\n                ) : activeJobs.length > 0 ? (\n                  activeJobs.map((job) => (\n                    <Card key={job.id} className=\"p-6\" data-testid={`card-active-job-${job.id}`}>\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-3 mb-3\">\n                            <Badge variant=\"secondary\" className=\"font-medium\">\n                              {job.service}\n                            </Badge>\n                            {getStatusBadge(job.status)}\n                          </div>\n\n                          <p className=\"text-lg mb-3\">{job.description}</p>\n\n                          <div className=\"flex flex-wrap items-center gap-4 text-sm text-muted-foreground mb-4\">\n                            <div className=\"flex items-center gap-1\">\n                              <MapPin className=\"h-4 w-4\" />\n                              {job.city}\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <Calendar className=\"h-4 w-4\" />\n                              {new Date(job.createdAt).toLocaleDateString(\"fr-FR\")}\n                            </div>\n                            {job.technicianName && (\n                              <div className=\"flex items-center gap-1\">\n                                <Avatar className=\"h-5 w-5\">\n                                  <AvatarFallback className=\"text-xs bg-primary/10 text-primary\">\n                                    {job.technicianName.charAt(0)}\n                                  </AvatarFallback>\n                                </Avatar>\n                                {job.technicianName}\n                              </div>\n                            )}\n                          </div>\n\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-2xl font-bold text-accent\">\n                              ~{job.estimatedCost} {t(\"common.mad\")}\n                            </span>\n                            <span className=\"text-sm text-muted-foreground\">estimé</span>\n                          </div>\n                        </div>\n\n                        <div className=\"flex flex-col gap-2 min-w-[120px]\">\n                          {job.technicianName && (\n                            <Button variant=\"outline\" data-testid={`button-contact-${job.id}`}>\n                              <Phone className=\"h-4 w-4 mr-2\" />\n                              Contacter\n                            </Button>\n                          )}\n                          <Button variant=\"ghost\" size=\"sm\">\n                            Voir détails\n                          </Button>\n                        </div>\n                      </div>\n                    </Card>\n                  ))\n                ) : (\n                  <Card className=\"p-12 text-center\">\n                    <Briefcase className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                    <h3 className=\"text-lg font-semibold mb-2\">{t(\"client.noJobs\")}</h3>\n                    <p className=\"text-muted-foreground mb-4\">\n                      Publiez une demande pour trouver le technicien idéal\n                    </p>\n                    <Link href=\"/post-job\">\n                      <Button data-testid=\"button-post-job-empty\">\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        {t(\"client.postFirst\")}\n                      </Button>\n                    </Link>\n                  </Card>\n                )}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"history\">\n              <div className=\"space-y-4\">\n                {completedJobs.length > 0 ? (\n                  completedJobs.map((job) => (\n                    <Card key={job.id} className=\"p-6\" data-testid={`card-completed-job-${job.id}`}>\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-3 mb-3\">\n                            <Badge variant=\"secondary\" className=\"font-medium\">\n                              {job.service}\n                            </Badge>\n                            {getStatusBadge(job.status)}\n                            {job.technicianRating && (\n                              <Badge className=\"bg-yellow-500/10 text-yellow-600 border-yellow-500/20 border\">\n                                <Star className=\"h-3 w-3 mr-1 fill-yellow-500\" />\n                                {job.technicianRating}\n                              </Badge>\n                            )}\n                          </div>\n\n                          <p className=\"text-lg mb-3\">{job.description}</p>\n\n                          <div className=\"flex flex-wrap items-center gap-4 text-sm text-muted-foreground\">\n                            <div className=\"flex items-center gap-1\">\n                              <MapPin className=\"h-4 w-4\" />\n                              {job.city}\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <Calendar className=\"h-4 w-4\" />\n                              {new Date(job.createdAt).toLocaleDateString(\"fr-FR\")}\n                            </div>\n                            {job.technicianName && (\n                              <div className=\"flex items-center gap-1\">\n                                <Avatar className=\"h-5 w-5\">\n                                  <AvatarFallback className=\"text-xs bg-primary/10 text-primary\">\n                                    {job.technicianName.charAt(0)}\n                                  </AvatarFallback>\n                                </Avatar>\n                                {job.technicianName}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n\n                        <div className=\"text-right\">\n                          <span className=\"text-xl font-bold text-accent\">\n                            {job.estimatedCost} {t(\"common.mad\")}\n                          </span>\n                        </div>\n                      </div>\n                    </Card>\n                  ))\n                ) : (\n                  <Card className=\"p-12 text-center\">\n                    <CheckCircle className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                    <h3 className=\"text-lg font-semibold mb-2\">Aucun historique</h3>\n                    <p className=\"text-muted-foreground\">\n                      Vos travaux terminés apparaîtront ici\n                    </p>\n                  </Card>\n                )}\n              </div>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":17842},"client/src/pages/TechnicianSignup.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Wrench, Loader2, Phone, MapPin, Briefcase, Award } from \"lucide-react\";\nimport { useAuth } from \"@/lib/auth\";\nimport { MOROCCAN_CITIES, SERVICE_CATEGORIES } from \"@shared/schema\";\n\nconst SERVICE_LABELS: Record<string, string> = {\n  plomberie: \"Plomberie\",\n  electricite: \"Électricité\", \n  peinture: \"Peinture\",\n  menuiserie: \"Menuiserie\",\n  climatisation: \"Climatisation\",\n  maconnerie: \"Maçonnerie\",\n  carrelage: \"Carrelage\",\n  serrurerie: \"Serrurerie\",\n  jardinage: \"Jardinage\",\n  nettoyage: \"Nettoyage\",\n};\n\nexport default function TechnicianSignup() {\n  const [, setLocation] = useLocation();\n  const { signupTechnician } = useAuth();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedServices, setSelectedServices] = useState<string[]>([]);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    phone: \"\",\n    city: \"\",\n    bio: \"\",\n    yearsExperience: \"\",\n    hourlyRate: \"\",\n  });\n\n  const toggleService = (service: string) => {\n    setSelectedServices((prev) =>\n      prev.includes(service)\n        ? prev.filter((s) => s !== service)\n        : [...prev, service]\n    );\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name || !formData.username || !formData.password || !formData.phone || !formData.city) {\n      toast({ title: \"Erreur\", description: \"Veuillez remplir tous les champs obligatoires\", variant: \"destructive\" });\n      return;\n    }\n\n    if (selectedServices.length === 0) {\n      toast({ title: \"Erreur\", description: \"Sélectionnez au moins un service\", variant: \"destructive\" });\n      return;\n    }\n\n    if (formData.password.length < 6) {\n      toast({ title: \"Erreur\", description: \"Le mot de passe doit contenir au moins 6 caractères\", variant: \"destructive\" });\n      return;\n    }\n\n    if (formData.password !== formData.confirmPassword) {\n      toast({ title: \"Erreur\", description: \"Les mots de passe ne correspondent pas\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      await signupTechnician({\n        username: formData.username,\n        password: formData.password,\n        name: formData.name,\n        phone: formData.phone,\n        city: formData.city,\n        services: selectedServices,\n        yearsExperience: formData.yearsExperience,\n        hourlyRate: formData.hourlyRate,\n        bio: formData.bio,\n      });\n      toast({ \n        title: \"Bienvenue!\", \n        description: \"Votre compte technicien a été créé. Notre équipe vérifiera votre profil sous 24h.\" \n      });\n      setLocation(\"/technician-dashboard\");\n    } catch (error) {\n      toast({ title: \"Erreur\", description: \"Cet utilisateur existe déjà\", variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      <main className=\"flex-1 flex items-center justify-center py-8 px-4\">\n        <Card className=\"w-full max-w-2xl p-6\">\n          <div className=\"flex items-center justify-center mb-6\">\n            <div className=\"flex items-center justify-center w-14 h-14 rounded-full bg-primary/10\">\n              <Wrench className=\"h-7 w-7 text-primary\" />\n            </div>\n          </div>\n          \n          <h1 className=\"text-2xl font-bold text-center mb-2\">Inscription Technicien</h1>\n          <p className=\"text-center text-muted-foreground mb-6\">\n            Rejoignez notre réseau d'artisans professionnels au Maroc\n          </p>\n\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"space-y-4\">\n              <h3 className=\"font-semibold text-lg flex items-center gap-2\">\n                <Briefcase className=\"h-5 w-5\" />\n                Informations personnelles\n              </h3>\n              \n              <div className=\"grid gap-4 sm:grid-cols-2\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"name\">Nom complet *</Label>\n                  <Input\n                    id=\"name\"\n                    type=\"text\"\n                    placeholder=\"Mohamed Alami\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    disabled={isLoading}\n                    data-testid=\"input-tech-signup-name\"\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"username\">Nom d'utilisateur *</Label>\n                  <Input\n                    id=\"username\"\n                    type=\"text\"\n                    placeholder=\"mohamed_alami\"\n                    value={formData.username}\n                    onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                    disabled={isLoading}\n                    data-testid=\"input-tech-signup-username\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid gap-4 sm:grid-cols-2\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"phone\">Téléphone *</Label>\n                  <div className=\"relative\">\n                    <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                    <Input\n                      id=\"phone\"\n                      type=\"tel\"\n                      placeholder=\"+212 6XX-XXXXXX\"\n                      value={formData.phone}\n                      onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                      disabled={isLoading}\n                      className=\"pl-10\"\n                      data-testid=\"input-tech-signup-phone\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"city\">Ville *</Label>\n                  <Select value={formData.city} onValueChange={(value) => setFormData({ ...formData, city: value })}>\n                    <SelectTrigger data-testid=\"select-tech-signup-city\">\n                      <MapPin className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                      <SelectValue placeholder=\"Votre ville\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {MOROCCAN_CITIES.map((city) => (\n                        <SelectItem key={city} value={city}>{city}</SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-4\">\n              <h3 className=\"font-semibold text-lg flex items-center gap-2\">\n                <Award className=\"h-5 w-5\" />\n                Compétences et services\n              </h3>\n\n              <div className=\"space-y-2\">\n                <Label>Services proposés * (sélectionnez au moins un)</Label>\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-3\">\n                  {SERVICE_CATEGORIES.map((service) => (\n                    <label\n                      key={service}\n                      htmlFor={`service-${service}`}\n                      className={`flex items-center gap-2 p-3 rounded-lg border cursor-pointer transition-colors ${\n                        selectedServices.includes(service)\n                          ? \"border-primary bg-primary/5\"\n                          : \"border-border hover-elevate\"\n                      }`}\n                      data-testid={`checkbox-service-${service}`}\n                    >\n                      <Checkbox\n                        id={`service-${service}`}\n                        checked={selectedServices.includes(service)}\n                        onCheckedChange={() => toggleService(service)}\n                      />\n                      <span className=\"text-sm\">{SERVICE_LABELS[service] || service}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"grid gap-4 sm:grid-cols-2\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"yearsExperience\">Années d'expérience</Label>\n                  <Input\n                    id=\"yearsExperience\"\n                    type=\"number\"\n                    placeholder=\"5\"\n                    min=\"0\"\n                    max=\"50\"\n                    value={formData.yearsExperience}\n                    onChange={(e) => setFormData({ ...formData, yearsExperience: e.target.value })}\n                    disabled={isLoading}\n                    data-testid=\"input-tech-signup-experience\"\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"hourlyRate\">Tarif horaire (MAD)</Label>\n                  <Input\n                    id=\"hourlyRate\"\n                    type=\"number\"\n                    placeholder=\"150\"\n                    min=\"50\"\n                    value={formData.hourlyRate}\n                    onChange={(e) => setFormData({ ...formData, hourlyRate: e.target.value })}\n                    disabled={isLoading}\n                    data-testid=\"input-tech-signup-rate\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"bio\">Présentation (optionnel)</Label>\n                <Textarea\n                  id=\"bio\"\n                  placeholder=\"Décrivez votre expérience et vos spécialités...\"\n                  value={formData.bio}\n                  onChange={(e) => setFormData({ ...formData, bio: e.target.value })}\n                  disabled={isLoading}\n                  rows={3}\n                  data-testid=\"input-tech-signup-bio\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-4\">\n              <h3 className=\"font-semibold text-lg\">Sécurité du compte</h3>\n              \n              <div className=\"grid gap-4 sm:grid-cols-2\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"password\">Mot de passe *</Label>\n                  <Input\n                    id=\"password\"\n                    type=\"password\"\n                    placeholder=\"••••••••\"\n                    value={formData.password}\n                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                    disabled={isLoading}\n                    data-testid=\"input-tech-signup-password\"\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"confirmPassword\">Confirmer le mot de passe *</Label>\n                  <Input\n                    id=\"confirmPassword\"\n                    type=\"password\"\n                    placeholder=\"••••••••\"\n                    value={formData.confirmPassword}\n                    onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}\n                    disabled={isLoading}\n                    data-testid=\"input-tech-signup-confirm-password\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-muted/50 rounded-lg p-4 text-sm text-muted-foreground\">\n              <p className=\"font-medium text-foreground mb-1\">Note importante:</p>\n              <p>Votre profil sera vérifié par notre équipe avant d'être activé. Vous recevrez une confirmation sous 24 heures.</p>\n            </div>\n\n            <Button type=\"submit\" className=\"w-full\" size=\"lg\" disabled={isLoading} data-testid=\"button-tech-signup-submit\">\n              {isLoading ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Création du compte...\n                </>\n              ) : (\n                \"Créer mon compte technicien\"\n              )}\n            </Button>\n          </form>\n\n          <div className=\"mt-6 text-center text-sm space-y-2\">\n            <p className=\"text-muted-foreground\">\n              Vous êtes un client?{\" \"}\n              <button\n                onClick={() => setLocation(\"/signup/client\")}\n                className=\"text-primary hover:underline font-medium\"\n                data-testid=\"link-to-client-signup\"\n              >\n                Inscrivez-vous comme client\n              </button>\n            </p>\n            <p className=\"text-muted-foreground\">\n              Vous avez déjà un compte?{\" \"}\n              <button\n                onClick={() => setLocation(\"/login\")}\n                className=\"text-primary hover:underline font-medium\"\n                data-testid=\"link-to-login\"\n              >\n                Se connecter\n              </button>\n            </p>\n          </div>\n        </Card>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":13585},"client/src/pages/PostJob.tsx":{"content":"import { useState, useEffect, useCallback } from \"react\";\nimport { useLocation, useSearch } from \"wouter\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { AIAnalysisPanel } from \"@/components/job/AIAnalysisPanel\";\nimport { CostEstimateCard } from \"@/components/job/CostEstimateCard\";\nimport { TechnicianCard } from \"@/components/technician/TechnicianCard\";\nimport { BookingModal } from \"@/components/booking/BookingModal\";\nimport { UpsellSuggestions } from \"@/components/booking/UpsellSuggestions\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { \n  Send, \n  Loader2, \n  MapPin, \n  AlertTriangle,\n  ArrowLeft,\n  Sparkles\n} from \"lucide-react\";\nimport type { JobAnalysis, CostEstimate, TechnicianMatch, UpsellSuggestion, Job } from \"@shared/schema\";\n\nconst MOROCCAN_CITIES = [\n  \"Casablanca\",\n  \"Rabat\",\n  \"Marrakech\",\n  \"Fès\",\n  \"Tanger\",\n  \"Agadir\",\n  \"Meknès\",\n  \"Oujda\",\n  \"Kenitra\",\n  \"Tétouan\",\n];\n\nexport default function PostJob() {\n  const { t } = useI18n();\n  const { toast } = useToast();\n  const searchParams = useSearch();\n  const [, setLocation] = useLocation();\n  \n  const urlParams = new URLSearchParams(searchParams);\n  const initialQuery = urlParams.get(\"q\") || \"\";\n  const initialService = urlParams.get(\"service\") || \"\";\n  \n  const [description, setDescription] = useState(initialQuery);\n  const [city, setCity] = useState(\"\");\n  const [urgency, setUrgency] = useState(\"normal\");\n  const [analysis, setAnalysis] = useState<JobAnalysis | null>(null);\n  const [costEstimate, setCostEstimate] = useState<CostEstimate | null>(null);\n  const [matches, setMatches] = useState<TechnicianMatch[]>([]);\n  const [upsellSuggestions, setUpsellSuggestions] = useState<UpsellSuggestion[]>([]);\n  const [currentJob, setCurrentJob] = useState<Job | null>(null);\n  const [selectedMatch, setSelectedMatch] = useState<TechnicianMatch | null>(null);\n  const [isBookingOpen, setIsBookingOpen] = useState(false);\n  const [step, setStep] = useState<\"input\" | \"analysis\" | \"matches\">(\"input\");\n\n  // AI Analysis mutation\n  const analyzeMutation = useMutation({\n    mutationFn: async (data: { description: string; city: string; urgency: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/jobs/analyze\", data);\n      return response.json();\n    },\n    onSuccess: (data) => {\n      setAnalysis(data.analysis);\n      setCostEstimate(data.costEstimate);\n      setStep(\"analysis\");\n    },\n    onError: () => {\n      toast({\n        title: t(\"common.error\"),\n        description: \"Impossible d'analyser votre demande.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Find matches mutation\n  const matchMutation = useMutation({\n    mutationFn: async (data: { description: string; city: string; urgency: string; analysis: JobAnalysis }) => {\n      const response = await apiRequest(\"POST\", \"/api/jobs\", data);\n      return response.json();\n    },\n    onSuccess: (data) => {\n      setCurrentJob(data.job);\n      setMatches(data.matches);\n      setUpsellSuggestions(data.upsellSuggestions || []);\n      setStep(\"matches\");\n    },\n    onError: () => {\n      toast({\n        title: t(\"common.error\"),\n        description: \"Impossible de trouver des artisans.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Debounced analysis\n  const debouncedAnalyze = useCallback(() => {\n    if (description.length > 20 && city) {\n      analyzeMutation.mutate({ description, city, urgency });\n    }\n  }, [description, city, urgency]);\n\n  useEffect(() => {\n    const timer = setTimeout(debouncedAnalyze, 1000);\n    return () => clearTimeout(timer);\n  }, [description, city]);\n\n  // Pre-fill service from URL\n  useEffect(() => {\n    if (initialService) {\n      const serviceDescriptions: Record<string, string> = {\n        plomberie: \"J'ai besoin d'un plombier pour \",\n        electricite: \"J'ai besoin d'un électricien pour \",\n        peinture: \"J'ai besoin d'un peintre pour \",\n        menuiserie: \"J'ai besoin d'un menuisier pour \",\n        climatisation: \"J'ai besoin d'un technicien climatisation pour \",\n        maconnerie: \"J'ai besoin d'un maçon pour \",\n        carrelage: \"J'ai besoin d'un carreleur pour \",\n        serrurerie: \"J'ai besoin d'un serrurier pour \",\n        jardinage: \"J'ai besoin d'un jardinier pour \",\n        nettoyage: \"J'ai besoin d'un service de nettoyage pour \",\n      };\n      if (serviceDescriptions[initialService]) {\n        setDescription(serviceDescriptions[initialService]);\n      }\n    }\n  }, [initialService]);\n\n  const handleSubmit = () => {\n    if (!description || !city) {\n      toast({\n        title: \"Champs requis\",\n        description: \"Veuillez décrire votre problème et sélectionner une ville.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (step === \"input\") {\n      analyzeMutation.mutate({ description, city, urgency });\n    } else if (step === \"analysis\" && analysis) {\n      matchMutation.mutate({ description, city, urgency, analysis });\n    }\n  };\n\n  const handleBook = (match: TechnicianMatch) => {\n    setSelectedMatch(match);\n    setIsBookingOpen(true);\n  };\n\n  const handleAddUpsell = (suggestion: UpsellSuggestion) => {\n    toast({\n      title: \"Service ajouté\",\n      description: `${suggestion.service} a été ajouté à votre demande.`,\n    });\n  };\n\n  const handleBack = () => {\n    if (step === \"matches\") {\n      setStep(\"analysis\");\n    } else if (step === \"analysis\") {\n      setStep(\"input\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      <main className=\"flex-1 py-8\">\n        <div className=\"max-w-6xl mx-auto px-4\">\n          {/* Progress Steps */}\n          <div className=\"flex items-center justify-center gap-4 mb-8\">\n            {[\"input\", \"analysis\", \"matches\"].map((s, idx) => (\n              <div key={s} className=\"flex items-center\">\n                <div \n                  className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${\n                    step === s \n                      ? \"bg-primary text-primary-foreground\" \n                      : [\"input\", \"analysis\", \"matches\"].indexOf(step) > idx\n                        ? \"bg-green-500 text-white\"\n                        : \"bg-muted text-muted-foreground\"\n                  }`}\n                >\n                  {idx + 1}\n                </div>\n                {idx < 2 && (\n                  <div className={`w-16 h-0.5 mx-2 ${\n                    [\"input\", \"analysis\", \"matches\"].indexOf(step) > idx\n                      ? \"bg-green-500\"\n                      : \"bg-muted\"\n                  }`} />\n                )}\n              </div>\n            ))}\n          </div>\n\n          {/* Back Button */}\n          {step !== \"input\" && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleBack}\n              className=\"mb-4\"\n              data-testid=\"button-back\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Retour\n            </Button>\n          )}\n\n          {/* Step: Input */}\n          {step === \"input\" && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n              <div className=\"lg:col-span-2\">\n                <Card className=\"p-6\">\n                  <h1 className=\"text-2xl font-bold mb-6\">{t(\"job.title\")}</h1>\n                  \n                  <div className=\"space-y-6\">\n                    {/* Description */}\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"description\" className=\"text-base font-medium\">\n                        {t(\"job.description\")}\n                      </Label>\n                      <Textarea\n                        id=\"description\"\n                        value={description}\n                        onChange={(e) => setDescription(e.target.value)}\n                        placeholder={t(\"job.descPlaceholder\")}\n                        className=\"min-h-[150px] text-base resize-none\"\n                        data-testid=\"input-job-description\"\n                      />\n                      <p className=\"text-xs text-muted-foreground\">\n                        Tip: Soyez précis pour obtenir de meilleures correspondances IA\n                      </p>\n                    </div>\n\n                    {/* City */}\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-base font-medium flex items-center gap-2\">\n                        <MapPin className=\"h-4 w-4\" />\n                        {t(\"job.city\")}\n                      </Label>\n                      <Select value={city} onValueChange={setCity}>\n                        <SelectTrigger data-testid=\"select-city\">\n                          <SelectValue placeholder={t(\"job.selectCity\")} />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {MOROCCAN_CITIES.map((c) => (\n                            <SelectItem key={c} value={c}>\n                              {c}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    {/* Urgency */}\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-base font-medium flex items-center gap-2\">\n                        <AlertTriangle className=\"h-4 w-4\" />\n                        {t(\"job.urgency\")}\n                      </Label>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {[\n                          { value: \"low\", label: t(\"job.urgencyLow\"), color: \"bg-green-500/10 text-green-600 border-green-500/20\" },\n                          { value: \"normal\", label: t(\"job.urgencyNormal\"), color: \"bg-blue-500/10 text-blue-600 border-blue-500/20\" },\n                          { value: \"high\", label: t(\"job.urgencyHigh\"), color: \"bg-orange-500/10 text-orange-600 border-orange-500/20\" },\n                          { value: \"emergency\", label: t(\"job.urgencyEmergency\"), color: \"bg-red-500/10 text-red-600 border-red-500/20\" },\n                        ].map((u) => (\n                          <Badge\n                            key={u.value}\n                            className={`cursor-pointer border transition-all ${\n                              urgency === u.value \n                                ? u.color + \" ring-2 ring-offset-2 ring-primary\" \n                                : \"bg-muted text-muted-foreground hover:bg-muted/80\"\n                            }`}\n                            onClick={() => setUrgency(u.value)}\n                            data-testid={`badge-urgency-${u.value}`}\n                          >\n                            {u.label}\n                          </Badge>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* Submit */}\n                    <Button\n                      onClick={handleSubmit}\n                      disabled={!description || !city || analyzeMutation.isPending}\n                      className=\"w-full h-12 text-base\"\n                      data-testid=\"button-analyze-job\"\n                    >\n                      {analyzeMutation.isPending ? (\n                        <>\n                          <Loader2 className=\"h-5 w-5 mr-2 animate-spin\" />\n                          Analyse en cours...\n                        </>\n                      ) : (\n                        <>\n                          <Sparkles className=\"h-5 w-5 mr-2\" />\n                          Analyser avec l'IA\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                </Card>\n              </div>\n\n              {/* AI Analysis Sidebar */}\n              <div className=\"space-y-4\">\n                <AIAnalysisPanel \n                  analysis={analysis} \n                  isLoading={analyzeMutation.isPending} \n                />\n              </div>\n            </div>\n          )}\n\n          {/* Step: Analysis Review */}\n          {step === \"analysis\" && analysis && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n              <div className=\"lg:col-span-2\">\n                <Card className=\"p-6\">\n                  <h2 className=\"text-2xl font-bold mb-6\">Résumé de votre demande</h2>\n                  \n                  <div className=\"p-4 rounded-lg bg-muted/50 border border-border mb-6\">\n                    <p className=\"text-lg\">{description}</p>\n                    <div className=\"flex items-center gap-2 mt-3 text-sm text-muted-foreground\">\n                      <MapPin className=\"h-4 w-4\" />\n                      {city}\n                    </div>\n                  </div>\n\n                  <AIAnalysisPanel analysis={analysis} isLoading={false} />\n\n                  <Button\n                    onClick={handleSubmit}\n                    disabled={matchMutation.isPending}\n                    className=\"w-full h-12 text-base mt-6\"\n                    data-testid=\"button-find-matches\"\n                  >\n                    {matchMutation.isPending ? (\n                      <>\n                        <Loader2 className=\"h-5 w-5 mr-2 animate-spin\" />\n                        Recherche d'artisans...\n                      </>\n                    ) : (\n                      <>\n                        <Send className=\"h-5 w-5 mr-2\" />\n                        {t(\"job.findMatches\")}\n                      </>\n                    )}\n                  </Button>\n                </Card>\n              </div>\n\n              <div className=\"space-y-4\">\n                <CostEstimateCard estimate={costEstimate} isLoading={false} />\n              </div>\n            </div>\n          )}\n\n          {/* Step: Matches */}\n          {step === \"matches\" && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n              <div className=\"lg:col-span-2\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h2 className=\"text-2xl font-bold\">{t(\"match.title\")}</h2>\n                  <Badge variant=\"secondary\" className=\"text-sm\">\n                    {matches.length} artisans trouvés\n                  </Badge>\n                </div>\n\n                <div className=\"space-y-6\">\n                  {matches.map((match, index) => (\n                    <TechnicianCard\n                      key={match.technician.id}\n                      match={match}\n                      rank={index + 1}\n                      onBook={handleBook}\n                    />\n                  ))}\n\n                  {matches.length === 0 && (\n                    <Card className=\"p-8 text-center\">\n                      <p className=\"text-muted-foreground\">\n                        Aucun artisan disponible pour le moment. Essayez d'élargir votre recherche.\n                      </p>\n                    </Card>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <CostEstimateCard estimate={costEstimate} />\n                <UpsellSuggestions \n                  suggestions={upsellSuggestions} \n                  onAdd={handleAddUpsell} \n                />\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n      <Footer />\n\n      {/* Booking Modal */}\n      <BookingModal\n        isOpen={isBookingOpen}\n        onClose={() => setIsBookingOpen(false)}\n        match={selectedMatch}\n        jobId={currentJob?.id || \"\"}\n      />\n    </div>\n  );\n}\n","size_bytes":16160},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"server/app.ts":{"content":"import { type Server } from \"node:http\";\n\nimport express, {\n  type Express,\n  type Request,\n  Response,\n  NextFunction,\n} from \"express\";\n\nimport { registerRoutes } from \"./routes\";\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport const app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\nexport default async function runApp(\n  setup: (app: Express, server: Server) => Promise<void>,\n) {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly run the final setup after setting up all the other routes so\n  // the catch-all route doesn't interfere with the other routes\n  await setup(app, server);\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n}\n","size_bytes":2482},"client/src/components/home/HowItWorks.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { MessageSquare, Cpu, Users, Calendar } from \"lucide-react\";\n\nconst steps = [\n  {\n    icon: MessageSquare,\n    title: \"Décrivez votre besoin\",\n    description: \"Expliquez votre problème en quelques mots, en français ou en arabe. Notre IA comprend tout.\",\n    color: \"bg-primary/10 text-primary\",\n  },\n  {\n    icon: Cpu,\n    title: \"L'IA analyse\",\n    description: \"47 modèles IA analysent votre demande pour identifier le service, l'urgence et la complexité.\",\n    color: \"bg-chart-2/10 text-chart-2\",\n  },\n  {\n    icon: Users,\n    title: \"Matching intelligent\",\n    description: \"Nous trouvons les artisans parfaits basés sur leurs compétences, proximité et disponibilité.\",\n    color: \"bg-chart-3/10 text-chart-3\",\n  },\n  {\n    icon: Calendar,\n    title: \"Réservez instantanément\",\n    description: \"Choisissez votre artisan, confirmez le créneau et recevez une estimation de prix précise.\",\n    color: \"bg-chart-4/10 text-chart-4\",\n  },\n];\n\nexport function HowItWorks() {\n  return (\n    <section className=\"py-16 md:py-20\">\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl font-bold mb-4\">Comment ça marche</h2>\n          <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n            De la description de votre problème à la réservation, notre plateforme IA gère tout.\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {steps.map((step, index) => {\n            const Icon = step.icon;\n            return (\n              <Card \n                key={index} \n                className=\"p-6 relative\"\n                data-testid={`card-step-${index + 1}`}\n              >\n                {/* Step Number */}\n                <div className=\"absolute -top-3 -left-3 w-8 h-8 rounded-full bg-background border-2 border-primary flex items-center justify-center text-sm font-bold text-primary\">\n                  {index + 1}\n                </div>\n                \n                <div className={`inline-flex items-center justify-center w-12 h-12 rounded-xl ${step.color} mb-4`}>\n                  <Icon className=\"h-6 w-6\" />\n                </div>\n                \n                <h3 className=\"font-semibold mb-2\">{step.title}</h3>\n                <p className=\"text-sm text-muted-foreground\">{step.description}</p>\n              </Card>\n            );\n          })}\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":2537},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/pages/Login.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Wrench, Loader2 } from \"lucide-react\";\nimport { useAuth } from \"@/lib/auth\";\n\nexport default function Login() {\n  const [, setLocation] = useLocation();\n  const { login } = useAuth();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [formData, setFormData] = useState({ username: \"\", password: \"\" });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.username || !formData.password) {\n      toast({ title: \"Erreur\", description: \"Veuillez remplir tous les champs\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      await login(formData.username, formData.password);\n      toast({ title: \"Succès\", description: \"Connecté avec succès\" });\n      setLocation(\"/\");\n    } catch (error) {\n      toast({ title: \"Erreur\", description: \"Identifiants invalides\", variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      <main className=\"flex-1 flex items-center justify-center py-8 px-4\">\n        <Card className=\"w-full max-w-md p-6\">\n          <div className=\"flex items-center justify-center mb-6\">\n            <div className=\"flex items-center justify-center w-12 h-12 rounded-lg bg-primary\">\n              <Wrench className=\"h-6 w-6 text-primary-foreground\" />\n            </div>\n          </div>\n          \n          <h1 className=\"text-2xl font-bold text-center mb-2\">Connexion</h1>\n          <p className=\"text-center text-muted-foreground mb-6\">Accédez à votre compte AlloBricolage</p>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">Nom d'utilisateur</Label>\n              <Input\n                id=\"username\"\n                type=\"text\"\n                placeholder=\"john_doe\"\n                value={formData.username}\n                onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                disabled={isLoading}\n                data-testid=\"input-login-username\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Mot de passe</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"••••••••\"\n                value={formData.password}\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                disabled={isLoading}\n                data-testid=\"input-login-password\"\n              />\n            </div>\n\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading} data-testid=\"button-login-submit\">\n              {isLoading ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Connexion en cours...\n                </>\n              ) : (\n                \"Se connecter\"\n              )}\n            </Button>\n          </form>\n\n          <div className=\"mt-6 text-center text-sm\">\n            <p className=\"text-muted-foreground\">\n              Pas encore de compte?{\" \"}\n              <button\n                onClick={() => setLocation(\"/signup\")}\n                className=\"text-primary hover:underline font-medium\"\n                data-testid=\"link-to-signup\"\n              >\n                S'inscrire\n              </button>\n            </p>\n          </div>\n        </Card>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":3983},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/layout/Footer.tsx":{"content":"import { Wrench, MapPin, Phone, Mail } from \"lucide-react\";\nimport { useI18n } from \"@/lib/i18n\";\n\nexport function Footer() {\n  const { t } = useI18n();\n\n  return (\n    <footer className=\"bg-card border-t border-border mt-auto\">\n      <div className=\"max-w-7xl mx-auto px-4 py-12\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n          {/* Brand */}\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-primary\">\n                <Wrench className=\"h-5 w-5 text-primary-foreground\" />\n              </div>\n              <div className=\"flex flex-col\">\n                <span className=\"font-bold text-lg leading-tight\">AlloBricolage</span>\n                <span className=\"text-xs text-muted-foreground leading-tight\">Powered by AI</span>\n              </div>\n            </div>\n            <p className=\"text-sm text-muted-foreground\">\n              La plateforme intelligente pour connecter les clients avec les meilleurs techniciens au Maroc.\n            </p>\n          </div>\n\n          {/* Services */}\n          <div>\n            <h4 className=\"font-semibold mb-4\">{t(\"services.title\")}</h4>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              <li>{t(\"services.plomberie\")}</li>\n              <li>{t(\"services.electricite\")}</li>\n              <li>{t(\"services.peinture\")}</li>\n              <li>{t(\"services.menuiserie\")}</li>\n              <li>{t(\"services.climatisation\")}</li>\n            </ul>\n          </div>\n\n          {/* Cities */}\n          <div>\n            <h4 className=\"font-semibold mb-4\">Villes</h4>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              <li className=\"flex items-center gap-2\">\n                <MapPin className=\"h-3 w-3\" /> Casablanca\n              </li>\n              <li className=\"flex items-center gap-2\">\n                <MapPin className=\"h-3 w-3\" /> Rabat\n              </li>\n              <li className=\"flex items-center gap-2\">\n                <MapPin className=\"h-3 w-3\" /> Marrakech\n              </li>\n              <li className=\"flex items-center gap-2\">\n                <MapPin className=\"h-3 w-3\" /> Fès\n              </li>\n              <li className=\"flex items-center gap-2\">\n                <MapPin className=\"h-3 w-3\" /> Tanger\n              </li>\n            </ul>\n          </div>\n\n          {/* Contact */}\n          <div>\n            <h4 className=\"font-semibold mb-4\">Contact</h4>\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\n              <li className=\"flex items-center gap-2\">\n                <Phone className=\"h-3 w-3\" /> +212 5XX-XXXXXX\n              </li>\n              <li className=\"flex items-center gap-2\">\n                <Mail className=\"h-3 w-3\" /> contact@allobricolage.ma\n              </li>\n            </ul>\n          </div>\n        </div>\n\n        <div className=\"border-t border-border mt-8 pt-8 text-center text-sm text-muted-foreground\">\n          <p>&copy; {new Date().getFullYear()} AlloBricolage. Tous droits réservés.</p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":3196},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/technician/TechnicianCard.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { Star, MapPin } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport type { TechnicianWithUser } from \"@shared/schema\";\n\ninterface TechnicianCardProps {\n  technician: TechnicianWithUser;\n  onBook?: (technician: TechnicianWithUser) => void;\n}\n\nexport function TechnicianCard({ technician, onBook }: TechnicianCardProps) {\n  const { t } = useI18n();\n\n  const defaultImage = `https://ui-avatars.com/api/?name=${encodeURIComponent(technician.name)}&size=400&background=1e40af&color=fff`;\n\n  return (\n    <Card \n      className=\"overflow-hidden hover-elevate transition-all bg-card\"\n      data-testid={`card-technician-${technician.id}`}\n    >\n      <div className=\"relative h-48\">\n        <img\n          src={technician.photo || defaultImage}\n          alt={technician.name}\n          className=\"w-full h-full object-cover\"\n          data-testid={`img-technician-${technician.id}`}\n        />\n        <div className=\"absolute top-2 right-2 flex gap-2\">\n          {technician.isPro && (\n            <Badge \n              className=\"bg-green-500 text-white border-0 rounded-full px-3 py-1 font-semibold\"\n              data-testid={`badge-pro-${technician.id}`}\n            >\n              PRO\n            </Badge>\n          )}\n          {technician.isPromo && (\n            <Badge \n              className=\"bg-red-500 text-white border-0 px-3 py-1 font-semibold\"\n              data-testid={`badge-promo-${technician.id}`}\n            >\n              Promo\n            </Badge>\n          )}\n        </div>\n      </div>\n\n      <div className=\"p-4\">\n        <h3 \n          className=\"font-bold text-lg text-foreground mb-1\"\n          data-testid={`text-name-${technician.id}`}\n        >\n          {technician.name}\n        </h3>\n        \n        <div className=\"flex items-center gap-2 mb-2\">\n          <div className=\"flex items-center gap-1 text-yellow-500\">\n            <Star className=\"h-4 w-4 fill-current\" />\n            <span className=\"font-medium text-foreground\">{technician.rating.toFixed(1)}</span>\n          </div>\n          <span className=\"text-muted-foreground text-sm\">\n            ({technician.reviewCount})\n          </span>\n        </div>\n\n        <div className=\"flex items-center gap-1 text-muted-foreground text-sm mb-3\">\n          <MapPin className=\"h-4 w-4\" />\n          <span data-testid={`text-location-${technician.id}`}>{technician.city}</span>\n        </div>\n\n        <div className=\"flex flex-wrap gap-1 mb-4\">\n          {technician.skills.slice(0, 3).map((skill, idx) => (\n            <Badge \n              key={idx} \n              variant=\"secondary\" \n              className=\"bg-muted text-muted-foreground text-xs font-normal rounded-full\"\n            >\n              {skill}\n            </Badge>\n          ))}\n          {technician.skills.length > 3 && (\n            <Badge \n              variant=\"secondary\" \n              className=\"bg-muted text-muted-foreground text-xs font-normal rounded-full\"\n            >\n              +{technician.skills.length - 3}\n            </Badge>\n          )}\n        </div>\n\n        <div className=\"flex items-center justify-between mb-4\">\n          <span \n            className=\"font-bold text-foreground\"\n            data-testid={`text-price-${technician.id}`}\n          >\n            {technician.hourlyRate} MAD / heure\n          </span>\n          <Badge \n            variant=\"outline\"\n            className={`font-medium ${\n              technician.availability === \"Immédiat\" \n                ? \"border-green-500 text-green-600 bg-green-50 dark:bg-green-900/20\" \n                : \"border-muted-foreground text-muted-foreground\"\n            }`}\n            data-testid={`badge-availability-${technician.id}`}\n          >\n            {technician.availability}\n          </Badge>\n        </div>\n\n        <Link href={`/technician/${technician.id}`} className=\"block\">\n          <Button \n            className=\"w-full bg-slate-900 hover:bg-slate-800 text-white dark:bg-slate-800 dark:hover:bg-slate-700\"\n            data-testid={`button-book-${technician.id}`}\n          >\n            Réserver\n          </Button>\n        </Link>\n      </div>\n    </Card>\n  );\n}\n\ninterface TechnicianMatchCardProps {\n  match: {\n    technician: TechnicianWithUser;\n    matchScore: number;\n    explanation: string;\n    etaMinutes: number;\n    estimatedCost: {\n      minCost: number;\n      maxCost: number;\n      likelyCost: number;\n    };\n    factors: {\n      specializationMatch: number;\n      locationScore: number;\n      availabilityScore: number;\n      responseTimeScore: number;\n      completionRateScore: number;\n      ratingScore: number;\n      priceScore: number;\n    };\n  };\n  rank: number;\n  onBook: (match: any) => void;\n}\n\nexport function TechnicianMatchCard({ match, rank, onBook }: TechnicianMatchCardProps) {\n  const { technician } = match;\n\n  const getMatchScoreColor = (score: number) => {\n    if (score >= 0.9) return \"bg-green-500 text-white\";\n    if (score >= 0.8) return \"bg-blue-500 text-white\";\n    if (score >= 0.7) return \"bg-yellow-500 text-white\";\n    return \"bg-orange-500 text-white\";\n  };\n\n  const defaultImage = `https://ui-avatars.com/api/?name=${encodeURIComponent(technician.name)}&size=400&background=1e40af&color=fff`;\n\n  return (\n    <Card \n      className=\"overflow-hidden hover-elevate transition-all bg-card relative\"\n      data-testid={`card-match-${technician.id}`}\n    >\n      <div className=\"absolute -top-2 -left-2 w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground font-bold text-sm shadow-md z-10\">\n        #{rank}\n      </div>\n\n      <Badge \n        className={`absolute top-2 left-10 ${getMatchScoreColor(match.matchScore)} px-2 py-1 font-bold shadow-md z-10`}\n      >\n        {Math.round(match.matchScore * 100)}%\n      </Badge>\n\n      <div className=\"relative h-48\">\n        <img\n          src={technician.photo || defaultImage}\n          alt={technician.name}\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute top-2 right-2 flex gap-2\">\n          {technician.isPro && (\n            <Badge className=\"bg-green-500 text-white border-0 rounded-full px-3 py-1 font-semibold\">\n              PRO\n            </Badge>\n          )}\n          {technician.isPromo && (\n            <Badge className=\"bg-red-500 text-white border-0 px-3 py-1 font-semibold\">\n              Promo\n            </Badge>\n          )}\n        </div>\n      </div>\n\n      <div className=\"p-4\">\n        <h3 className=\"font-bold text-lg text-foreground mb-1\">\n          {technician.name}\n        </h3>\n        \n        <div className=\"flex items-center gap-2 mb-2\">\n          <div className=\"flex items-center gap-1 text-yellow-500\">\n            <Star className=\"h-4 w-4 fill-current\" />\n            <span className=\"font-medium text-foreground\">{technician.rating.toFixed(1)}</span>\n          </div>\n          <span className=\"text-muted-foreground text-sm\">\n            ({technician.reviewCount})\n          </span>\n        </div>\n\n        <div className=\"flex items-center gap-1 text-muted-foreground text-sm mb-3\">\n          <MapPin className=\"h-4 w-4\" />\n          <span>{technician.city} - {match.etaMinutes} min</span>\n        </div>\n\n        <div className=\"flex flex-wrap gap-1 mb-4\">\n          {technician.skills.slice(0, 3).map((skill, idx) => (\n            <Badge \n              key={idx} \n              variant=\"secondary\" \n              className=\"bg-muted text-muted-foreground text-xs font-normal rounded-full\"\n            >\n              {skill}\n            </Badge>\n          ))}\n        </div>\n\n        <div className=\"flex items-center justify-between mb-4\">\n          <span className=\"font-bold text-foreground\">\n            {match.estimatedCost.minCost}-{match.estimatedCost.maxCost} MAD\n          </span>\n          <Badge \n            variant=\"outline\"\n            className={`font-medium ${\n              technician.availability === \"Immédiat\" \n                ? \"border-green-500 text-green-600 bg-green-50 dark:bg-green-900/20\" \n                : \"border-muted-foreground text-muted-foreground\"\n            }`}\n          >\n            {technician.availability}\n          </Badge>\n        </div>\n\n        <Button \n          className=\"w-full bg-slate-900 hover:bg-slate-800 text-white dark:bg-slate-800 dark:hover:bg-slate-700\"\n          onClick={() => onBook(match)}\n        >\n          Réserver\n        </Button>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":8606},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"design_guidelines.md":{"content":"# AlloBricolage Design Guidelines\n\n## Design Approach\n**Reference-Based Hybrid**: Drawing from Airbnb's marketplace trust signals + Uber's real-time matching UI + Material Design's data-dense patterns. This is a utility-first platform where clarity and trust drive conversions.\n\n## Typography System\n- **Primary Font**: Inter (Google Fonts) - exceptional readability for bilingual content\n- **Secondary Font**: Cairo (Google Fonts) - optimized for Arabic RTL support\n- **Hierarchy**:\n  - Hero/H1: text-4xl to text-5xl, font-bold\n  - Section Headers/H2: text-3xl, font-semibold  \n  - Card Titles/H3: text-xl, font-semibold\n  - Body Text: text-base, font-normal\n  - Captions/Meta: text-sm, font-medium\n  - Small Print: text-xs\n\n## Layout System\n**Spacing Primitives**: Use Tailwind units of 3, 4, 6, 8, 12, 16, 20 for consistency\n- Section padding: py-16 md:py-20\n- Card padding: p-6 md:p-8\n- Element spacing: gap-4, gap-6, gap-8\n- Container: max-w-7xl mx-auto px-4\n\n## Core Components\n\n### Navigation\n- Sticky top navigation with dual-language toggle (AR/FR)\n- Split layout: Logo left, \"Post Job\" + \"Find Technicians\" CTAs right\n- Mobile: Hamburger menu with clear role selection (Client vs Technician)\n\n### Hero Section (Home)\n- **Full-width hero with overlay image**: Moroccan handymen at work (authentic, diverse)\n- Centered search bar (prominent): \"Describe your job in your own words...\"\n- Trust indicators below search: \"47 AI Models • 500K+ Jobs Completed • 2-minute Matching\"\n- Hero height: min-h-[60vh]\n\n### Job Posting Interface\n- **Conversational card-based flow**: Large text area for natural language input\n- Real-time AI feedback panel: Shows extracted details (service type, urgency, location) as user types\n- Progressive disclosure: Basic → Details → Photos → Confirm\n- Estimated cost range displayed prominently with confidence indicator\n\n### Technician Matching Results\n- **Card grid layout**: 2-3 columns on desktop, 1 on mobile\n- Each card contains:\n  - Profile photo (rounded-lg, border accent)\n  - Name, rating stars, review count\n  - Match score badge (top-right): \"92% Match\"\n  - Key stats row: Distance • Response time • Jobs completed\n  - AI explanation box (light background): \"Why this match\" with bullet points\n  - Price estimate range\n  - Availability status (green dot + \"Available now\" or next available time)\n  - Primary CTA: \"Book Ahmed\" button\n\n### Pricing Display\n- **Transparent breakdown card**: \n  - Base rate + itemized premiums (urgency, timing, distance)\n  - Confidence interval visualization (horizontal bar chart)\n  - Comparison: \"15% below market average\" indicator\n  - \"Why this price?\" expandable section\n\n### Booking Flow\n- **Stepper progress indicator** (top): Select Technician → Schedule → Confirm → Payment\n- Side-by-side layout: Booking details (left 2/3) + Summary card (right 1/3, sticky)\n- Upsell suggestions: Subtle card carousel \"While they're there...\"\n\n### Technician Profiles\n- **Split-screen layout**: \n  - Left: Photo, stats, badges, availability calendar\n  - Right: Reviews (sortable), completed jobs gallery, skills tags\n- Trust signals prominent: Verification badges, insurance status, years of experience\n\n### Dashboard (Technicians)\n- **Data-dense layout**: Metrics cards row (earnings, jobs, rating trend)\n- Incoming job offers: List view with quick accept/decline actions\n- Map view: Nearby job opportunities visualization\n\n## Visual Elements\n\n### Trust & Transparency Indicators\n- Verification badges: Shield icons with checkmarks\n- AI confidence scores: Circular progress indicators (0-100%)\n- Match explanations: Light background info boxes with icons\n- Real-time status: Pulsing green dots for \"active now\"\n\n### Images Strategy\n- **Hero**: Large background image (Moroccan marketplace/handymen working) with dark overlay (opacity-60)\n- **Technician photos**: Required, circular or rounded-lg depending on context\n- **Job galleries**: Grid layouts showing before/after when available\n- **Empty states**: Illustrated SVGs (friendly, approachable)\n\n### Interactive Elements\n- **Search bars**: Generous height (h-14), rounded-xl, prominent shadow on focus\n- **CTA buttons**: \n  - Primary: Large (px-8 py-4), rounded-lg, font-semibold\n  - Secondary: Outlined variant, same size\n  - Buttons on images: Backdrop blur (backdrop-blur-md), semi-transparent background\n- **Cards**: Hover lift effect (transition-transform), subtle shadow increase\n- **Filter chips**: Pill-shaped, toggleable, with counts\n\n## Bilingual Considerations\n- RTL/LTR layout switching for Arabic/French\n- Consistent spacing regardless of text direction\n- Icons that work bidirectionally\n- Flag icons for language toggle (Morocco flag + France flag)\n\n## Mobile Optimization\n- Bottom navigation bar for key actions (Post Job, Browse, Messages, Profile)\n- Swipeable cards for technician browsing\n- Sticky booking button on profile pages\n- Condensed metrics display (icons > text)\n\n## AI-Specific UI Patterns\n- **Loading states**: Animated \"AI is matching...\" with progress messages\n- **Confidence visualization**: Percentage badges with color coding (>90% green, 70-90% yellow, <70% orange)\n- **Explanation panels**: Collapsible sections with \"How we calculated this\" headers\n- **Learning indicators**: \"We're learning from this booking\" subtle footer text\n\n## Data Density Balance\nDense information architecture without overwhelming:\n- Use tabs for complex profile sections\n- Expandable cards for detailed breakdowns\n- Icon + number combinations for quick scanning\n- Generous whitespace between major sections (mb-12 to mb-20)\n\n**Deliverable**: A trust-forward, AI-transparent marketplace that feels modern yet approachable, optimized for Morocco's bilingual market with mobile-first interactions and desktop-rich data displays.","size_bytes":5783},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/booking/BookingModal.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { Calendar, Clock, Star, Shield, Loader2, CheckCircle } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { TechnicianMatch } from \"@shared/schema\";\n\ninterface BookingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  match: TechnicianMatch | null;\n  jobId: string;\n}\n\nexport function BookingModal({ isOpen, onClose, match, jobId }: BookingModalProps) {\n  const { t } = useI18n();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [formData, setFormData] = useState({\n    clientName: \"\",\n    clientPhone: \"\",\n    scheduledDate: \"\",\n    scheduledTime: \"\",\n  });\n  const [bookingSuccess, setBookingSuccess] = useState(false);\n\n  const bookingMutation = useMutation({\n    mutationFn: async (data: typeof formData & { jobId: string; technicianId: string }) => {\n      return apiRequest(\"POST\", \"/api/bookings\", data);\n    },\n    onSuccess: () => {\n      setBookingSuccess(true);\n      queryClient.invalidateQueries({ queryKey: [\"/api/bookings\"] });\n      toast({\n        title: t(\"booking.success\"),\n        description: \"Vous recevrez une confirmation par SMS.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: t(\"common.error\"),\n        description: \"Impossible de créer la réservation.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (!match) return null;\n\n  const { technician } = match;\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.clientName || !formData.clientPhone || !formData.scheduledDate || !formData.scheduledTime) {\n      toast({\n        title: \"Champs requis\",\n        description: \"Veuillez remplir tous les champs.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    bookingMutation.mutate({\n      ...formData,\n      jobId,\n      technicianId: technician.id,\n    });\n  };\n\n  const handleClose = () => {\n    setBookingSuccess(false);\n    setFormData({ clientName: \"\", clientPhone: \"\", scheduledDate: \"\", scheduledTime: \"\" });\n    onClose();\n  };\n\n  const generateTimeSlots = () => {\n    const slots = [];\n    for (let h = 8; h <= 20; h++) {\n      slots.push(`${h.toString().padStart(2, \"0\")}:00`);\n      if (h < 20) slots.push(`${h.toString().padStart(2, \"0\")}:30`);\n    }\n    return slots;\n  };\n\n  if (bookingSuccess) {\n    return (\n      <Dialog open={isOpen} onOpenChange={handleClose}>\n        <DialogContent className=\"sm:max-w-md\">\n          <div className=\"text-center py-8\">\n            <div className=\"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-4\">\n              <CheckCircle className=\"h-8 w-8 text-green-500\" />\n            </div>\n            <h2 className=\"text-2xl font-bold mb-2\">{t(\"booking.success\")}</h2>\n            <p className=\"text-muted-foreground mb-6\">\n              {technician.name} a été notifié et vous contactera bientôt.\n            </p>\n            <Button onClick={handleClose} data-testid=\"button-close-success\">\n              Fermer\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>{t(\"booking.title\")}</DialogTitle>\n        </DialogHeader>\n\n        {/* Technician Summary */}\n        <div className=\"flex items-center gap-4 p-4 rounded-lg bg-muted/50 border border-border mb-4\">\n          <Avatar className=\"h-14 w-14 border-2 border-border\">\n            <AvatarImage src={technician.photo || undefined} alt={technician.name} />\n            <AvatarFallback className=\"text-lg font-semibold bg-primary/10 text-primary\">\n              {technician.name.split(\" \").map(n => n[0]).join(\"\")}\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-2\">\n              <h3 className=\"font-semibold\">{technician.name}</h3>\n              {technician.isVerified && <Shield className=\"h-4 w-4 text-blue-500\" />}\n            </div>\n            <div className=\"flex items-center gap-1 text-sm text-yellow-500\">\n              <Star className=\"h-3 w-3 fill-current\" />\n              <span>{technician.rating.toFixed(1)}</span>\n              <span className=\"text-muted-foreground\">({technician.reviewCount} avis)</span>\n            </div>\n          </div>\n          <div className=\"text-right\">\n            <Badge className=\"bg-green-500/10 text-green-600 border-green-500/20 border font-bold\">\n              {Math.round(match.matchScore * 100)}%\n            </Badge>\n            <div className=\"text-sm font-semibold text-chart-2 mt-1\">\n              ~{match.estimatedCost.likelyCost} {t(\"common.mad\")}\n            </div>\n          </div>\n        </div>\n\n        {/* Booking Form */}\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"clientName\">{t(\"booking.name\")}</Label>\n              <Input\n                id=\"clientName\"\n                value={formData.clientName}\n                onChange={(e) => setFormData({ ...formData, clientName: e.target.value })}\n                placeholder=\"Votre nom complet\"\n                data-testid=\"input-client-name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"clientPhone\">{t(\"booking.phone\")}</Label>\n              <Input\n                id=\"clientPhone\"\n                type=\"tel\"\n                value={formData.clientPhone}\n                onChange={(e) => setFormData({ ...formData, clientPhone: e.target.value })}\n                placeholder=\"+212 6XX-XXXXXX\"\n                data-testid=\"input-client-phone\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"scheduledDate\" className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4\" />\n                {t(\"booking.date\")}\n              </Label>\n              <Input\n                id=\"scheduledDate\"\n                type=\"date\"\n                value={formData.scheduledDate}\n                onChange={(e) => setFormData({ ...formData, scheduledDate: e.target.value })}\n                min={new Date().toISOString().split(\"T\")[0]}\n                data-testid=\"input-scheduled-date\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"scheduledTime\" className=\"flex items-center gap-2\">\n                <Clock className=\"h-4 w-4\" />\n                {t(\"booking.time\")}\n              </Label>\n              <select\n                id=\"scheduledTime\"\n                value={formData.scheduledTime}\n                onChange={(e) => setFormData({ ...formData, scheduledTime: e.target.value })}\n                className=\"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring\"\n                data-testid=\"select-scheduled-time\"\n              >\n                <option value=\"\">Choisir...</option>\n                {generateTimeSlots().map((slot) => (\n                  <option key={slot} value={slot}>\n                    {slot}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div className=\"flex gap-3 pt-4\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              className=\"flex-1\"\n              onClick={handleClose}\n              data-testid=\"button-cancel-booking\"\n            >\n              {t(\"common.cancel\")}\n            </Button>\n            <Button\n              type=\"submit\"\n              className=\"flex-1\"\n              disabled={bookingMutation.isPending}\n              data-testid=\"button-confirm-booking\"\n            >\n              {bookingMutation.isPending ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Confirmation...\n                </>\n              ) : (\n                t(\"booking.confirm\")\n              )}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":8895},"client/src/pages/ClientSignup.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { User, Loader2, Building2, Phone, MapPin } from \"lucide-react\";\nimport { useAuth } from \"@/lib/auth\";\nimport { MOROCCAN_CITIES } from \"@shared/schema\";\n\nexport default function ClientSignup() {\n  const [, setLocation] = useLocation();\n  const { signupClient } = useAuth();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    username: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    phone: \"\",\n    city: \"\",\n    businessName: \"\",\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name || !formData.username || !formData.password || !formData.phone || !formData.city) {\n      toast({ title: \"Erreur\", description: \"Veuillez remplir tous les champs obligatoires\", variant: \"destructive\" });\n      return;\n    }\n\n    if (formData.password.length < 6) {\n      toast({ title: \"Erreur\", description: \"Le mot de passe doit contenir au moins 6 caractères\", variant: \"destructive\" });\n      return;\n    }\n\n    if (formData.password !== formData.confirmPassword) {\n      toast({ title: \"Erreur\", description: \"Les mots de passe ne correspondent pas\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      await signupClient({\n        username: formData.username,\n        password: formData.password,\n        name: formData.name,\n        phone: formData.phone,\n        city: formData.city,\n        businessName: formData.businessName,\n      });\n      toast({ title: \"Bienvenue!\", description: \"Votre compte client a été créé avec succès\" });\n      setLocation(\"/\");\n    } catch (error) {\n      toast({ title: \"Erreur\", description: \"Cet utilisateur existe déjà\", variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      <main className=\"flex-1 flex items-center justify-center py-8 px-4\">\n        <Card className=\"w-full max-w-lg p-6\">\n          <div className=\"flex items-center justify-center mb-6\">\n            <div className=\"flex items-center justify-center w-14 h-14 rounded-full bg-primary/10\">\n              <User className=\"h-7 w-7 text-primary\" />\n            </div>\n          </div>\n          \n          <h1 className=\"text-2xl font-bold text-center mb-2\">Inscription Client</h1>\n          <p className=\"text-center text-muted-foreground mb-6\">\n            Créez votre compte pour réserver des services de bricolage\n          </p>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"grid gap-4 sm:grid-cols-2\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"name\">Nom complet *</Label>\n                <Input\n                  id=\"name\"\n                  type=\"text\"\n                  placeholder=\"Ahmed Benali\"\n                  value={formData.name}\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                  disabled={isLoading}\n                  data-testid=\"input-client-signup-name\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"username\">Nom d'utilisateur *</Label>\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  placeholder=\"ahmed_benali\"\n                  value={formData.username}\n                  onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                  disabled={isLoading}\n                  data-testid=\"input-client-signup-username\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone\">Téléphone *</Label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"phone\"\n                  type=\"tel\"\n                  placeholder=\"+212 6XX-XXXXXX\"\n                  value={formData.phone}\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                  disabled={isLoading}\n                  className=\"pl-10\"\n                  data-testid=\"input-client-signup-phone\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"city\">Ville *</Label>\n              <Select value={formData.city} onValueChange={(value) => setFormData({ ...formData, city: value })}>\n                <SelectTrigger data-testid=\"select-client-signup-city\">\n                  <MapPin className=\"h-4 w-4 mr-2 text-muted-foreground\" />\n                  <SelectValue placeholder=\"Sélectionnez votre ville\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {MOROCCAN_CITIES.map((city) => (\n                    <SelectItem key={city} value={city}>{city}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"businessName\">Nom de l'entreprise (optionnel)</Label>\n              <div className=\"relative\">\n                <Building2 className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  id=\"businessName\"\n                  type=\"text\"\n                  placeholder=\"Votre entreprise\"\n                  value={formData.businessName}\n                  onChange={(e) => setFormData({ ...formData, businessName: e.target.value })}\n                  disabled={isLoading}\n                  className=\"pl-10\"\n                  data-testid=\"input-client-signup-business\"\n                />\n              </div>\n            </div>\n\n            <div className=\"grid gap-4 sm:grid-cols-2\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\">Mot de passe *</Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  placeholder=\"••••••••\"\n                  value={formData.password}\n                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                  disabled={isLoading}\n                  data-testid=\"input-client-signup-password\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"confirmPassword\">Confirmer *</Label>\n                <Input\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  placeholder=\"••••••••\"\n                  value={formData.confirmPassword}\n                  onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}\n                  disabled={isLoading}\n                  data-testid=\"input-client-signup-confirm-password\"\n                />\n              </div>\n            </div>\n\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading} data-testid=\"button-client-signup-submit\">\n              {isLoading ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Création du compte...\n                </>\n              ) : (\n                \"Créer mon compte client\"\n              )}\n            </Button>\n          </form>\n\n          <div className=\"mt-6 text-center text-sm space-y-2\">\n            <p className=\"text-muted-foreground\">\n              Vous êtes un artisan?{\" \"}\n              <button\n                onClick={() => setLocation(\"/signup/technician\")}\n                className=\"text-primary hover:underline font-medium\"\n                data-testid=\"link-to-technician-signup\"\n              >\n                Inscrivez-vous comme technicien\n              </button>\n            </p>\n            <p className=\"text-muted-foreground\">\n              Vous avez déjà un compte?{\" \"}\n              <button\n                onClick={() => setLocation(\"/login\")}\n                className=\"text-primary hover:underline font-medium\"\n                data-testid=\"link-to-login\"\n              >\n                Se connecter\n              </button>\n            </p>\n          </div>\n        </Card>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":8896},"client/src/components/job/AIAnalysisPanel.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { Cpu, Sparkles, AlertTriangle, Clock, Wrench, Loader2 } from \"lucide-react\";\nimport type { JobAnalysis } from \"@shared/schema\";\n\ninterface AIAnalysisPanelProps {\n  analysis: JobAnalysis | null;\n  isLoading: boolean;\n}\n\nexport function AIAnalysisPanel({ analysis, isLoading }: AIAnalysisPanelProps) {\n  const { t } = useI18n();\n\n  if (isLoading) {\n    return (\n      <Card className=\"p-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10\">\n            <Loader2 className=\"h-5 w-5 text-primary animate-spin\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold\">Analyse IA en cours</h3>\n            <p className=\"text-sm text-muted-foreground\">{t(\"job.analyzing\")}</p>\n          </div>\n        </div>\n        <div className=\"space-y-3\">\n          <div className=\"h-4 bg-muted rounded animate-pulse\" />\n          <div className=\"h-4 bg-muted rounded animate-pulse w-3/4\" />\n          <div className=\"h-4 bg-muted rounded animate-pulse w-1/2\" />\n        </div>\n      </Card>\n    );\n  }\n\n  if (!analysis) {\n    return (\n      <Card className=\"p-6 border-dashed\">\n        <div className=\"text-center text-muted-foreground\">\n          <Cpu className=\"h-10 w-10 mx-auto mb-3 opacity-50\" />\n          <p className=\"text-sm\">L'IA analysera votre demande automatiquement</p>\n        </div>\n      </Card>\n    );\n  }\n\n  const getUrgencyColor = (urgency: string) => {\n    switch (urgency) {\n      case \"emergency\": return \"bg-red-500/10 text-red-500 border-red-500/20\";\n      case \"high\": return \"bg-orange-500/10 text-orange-500 border-orange-500/20\";\n      case \"normal\": return \"bg-blue-500/10 text-blue-500 border-blue-500/20\";\n      default: return \"bg-green-500/10 text-green-500 border-green-500/20\";\n    }\n  };\n\n  const getComplexityColor = (complexity: string) => {\n    switch (complexity) {\n      case \"complex\": return \"bg-purple-500/10 text-purple-500 border-purple-500/20\";\n      case \"moderate\": return \"bg-yellow-500/10 text-yellow-500 border-yellow-500/20\";\n      default: return \"bg-green-500/10 text-green-500 border-green-500/20\";\n    }\n  };\n\n  const urgencyLabels: Record<string, string> = {\n    emergency: \"Urgence\",\n    high: \"Urgent\",\n    normal: \"Normal\",\n    low: \"Pas pressé\",\n  };\n\n  const complexityLabels: Record<string, string> = {\n    complex: \"Complexe\",\n    moderate: \"Modéré\",\n    simple: \"Simple\",\n  };\n\n  const serviceLabels: Record<string, string> = {\n    plomberie: \"Plomberie\",\n    electricite: \"Électricité\",\n    peinture: \"Peinture\",\n    menuiserie: \"Menuiserie\",\n    climatisation: \"Climatisation\",\n    maconnerie: \"Maçonnerie\",\n    carrelage: \"Carrelage\",\n    serrurerie: \"Serrurerie\",\n    jardinage: \"Jardinage\",\n    nettoyage: \"Nettoyage\",\n  };\n\n  return (\n    <Card className=\"p-6 border-primary/20 bg-primary/5\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10\">\n          <Sparkles className=\"h-5 w-5 text-primary\" />\n        </div>\n        <div>\n          <h3 className=\"font-semibold\">Analyse IA</h3>\n          <p className=\"text-sm text-muted-foreground\">Résultats de l'analyse automatique</p>\n        </div>\n      </div>\n\n      <div className=\"space-y-4\">\n        {/* Service Detected */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n            <Wrench className=\"h-4 w-4\" />\n            {t(\"ai.service\")}\n          </div>\n          <Badge variant=\"secondary\" className=\"font-medium\">\n            {serviceLabels[analysis.service] || analysis.service}\n          </Badge>\n        </div>\n\n        {/* Sub-services */}\n        {analysis.subServices && analysis.subServices.length > 0 && (\n          <div className=\"flex flex-wrap gap-2\">\n            {analysis.subServices.map((sub, idx) => (\n              <Badge key={idx} variant=\"outline\" className=\"text-xs\">\n                {sub}\n              </Badge>\n            ))}\n          </div>\n        )}\n\n        {/* Urgency */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n            <AlertTriangle className=\"h-4 w-4\" />\n            {t(\"ai.urgency\")}\n          </div>\n          <Badge className={`${getUrgencyColor(analysis.urgency)} border`}>\n            {urgencyLabels[analysis.urgency] || analysis.urgency}\n          </Badge>\n        </div>\n\n        {/* Complexity */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n            <Cpu className=\"h-4 w-4\" />\n            {t(\"ai.complexity\")}\n          </div>\n          <Badge className={`${getComplexityColor(analysis.complexity)} border`}>\n            {complexityLabels[analysis.complexity] || analysis.complexity}\n          </Badge>\n        </div>\n\n        {/* Estimated Duration */}\n        {analysis.estimatedDuration && (\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Clock className=\"h-4 w-4\" />\n              {t(\"ai.duration\")}\n            </div>\n            <span className=\"text-sm font-medium\">{analysis.estimatedDuration}</span>\n          </div>\n        )}\n\n        {/* Confidence Score */}\n        <div className=\"pt-2 border-t border-border\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm text-muted-foreground\">{t(\"ai.confidence\")}</span>\n            <span className=\"text-sm font-semibold text-primary\">\n              {Math.round(analysis.confidence * 100)}%\n            </span>\n          </div>\n          <Progress value={analysis.confidence * 100} className=\"h-2\" />\n        </div>\n\n        {/* Keywords */}\n        {analysis.extractedKeywords && analysis.extractedKeywords.length > 0 && (\n          <div className=\"pt-2\">\n            <p className=\"text-xs text-muted-foreground mb-2\">Mots-clés détectés:</p>\n            <div className=\"flex flex-wrap gap-1\">\n              {analysis.extractedKeywords.map((keyword, idx) => (\n                <Badge key={idx} variant=\"outline\" className=\"text-xs bg-background\">\n                  {keyword}\n                </Badge>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </Card>\n  );\n}\n","size_bytes":6699},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/layout/Header.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTheme } from \"@/lib/theme\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useAuth } from \"@/lib/auth\";\nimport { Sun, Moon, Menu, X, Wrench, Building2, LogOut } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport function Header() {\n  const { theme, toggleTheme } = useTheme();\n  const { lang, setLang, t } = useI18n();\n  const { user, logout, isLoading } = useAuth();\n  const [, setLocation] = useLocation();\n  const [location] = useLocation();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const { toast } = useToast();\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      toast({ title: \"Succès\", description: \"Déconnecté avec succès\" });\n      setLocation(\"/\");\n    } catch {\n      toast({ title: \"Erreur\", description: \"Erreur lors de la déconnexion\", variant: \"destructive\" });\n    }\n  };\n\n  const getDashboardLink = () => {\n    if (!user) return null;\n    if (user.role === \"technician\") {\n      return { href: \"/technician-dashboard\", label: t(\"nav.forTech\") };\n    }\n    return { href: \"/client-dashboard\", label: t(\"nav.forClient\") };\n  };\n\n  const dashboardLink = getDashboardLink();\n  \n  const navLinks = [\n    { href: \"/\", label: t(\"nav.home\") },\n    { href: \"/post-job\", label: t(\"nav.postJob\") },\n    ...(dashboardLink ? [dashboardLink] : []),\n  ];\n\n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <div className=\"flex h-16 items-center justify-between gap-4\">\n          {/* Logo */}\n          <Link href=\"/\">\n            <div className=\"flex items-center gap-2 cursor-pointer\" data-testid=\"link-home\">\n              <div className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-primary\">\n                <Wrench className=\"h-5 w-5 text-primary-foreground\" />\n              </div>\n              <div className=\"flex flex-col\">\n                <span className=\"font-bold text-lg leading-tight\">AlloBricolage</span>\n                <span className=\"text-xs text-muted-foreground leading-tight\">Powered by AI</span>\n              </div>\n            </div>\n          </Link>\n\n          {/* Desktop Navigation */}\n          <nav className=\"hidden md:flex items-center gap-1\">\n            {navLinks.map((link) => (\n              <Link key={link.href} href={link.href}>\n                <Button\n                  variant={location === link.href ? \"secondary\" : \"ghost\"}\n                  size=\"sm\"\n                  data-testid={`link-nav-${link.href.replace(\"/\", \"\") || \"home\"}`}\n                >\n                  {link.label}\n                </Button>\n              </Link>\n            ))}\n          </nav>\n\n          {/* Right side controls */}\n          <div className=\"flex items-center gap-2\">\n            {/* Language Toggle */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setLang(lang === \"fr\" ? \"ar\" : \"fr\")}\n              data-testid=\"button-language-toggle\"\n              className=\"font-medium\"\n            >\n              {lang === \"fr\" ? \"العربية\" : \"Français\"}\n            </Button>\n\n            {/* Theme Toggle */}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={toggleTheme}\n              data-testid=\"button-theme-toggle\"\n            >\n              {theme === \"light\" ? (\n                <Moon className=\"h-4 w-4\" />\n              ) : (\n                <Sun className=\"h-4 w-4\" />\n              )}\n            </Button>\n\n            {/* Auth Section - Desktop */}\n            <div className=\"hidden md:flex items-center gap-2\">\n              {!isLoading && (\n                user ? (\n                  <>\n                    <span className=\"text-sm text-muted-foreground\">\n                      {user.name || user.username}\n                    </span>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={handleLogout}\n                      data-testid=\"button-logout\"\n                    >\n                      <LogOut className=\"h-4 w-4\" />\n                    </Button>\n                  </>\n                ) : (\n                  <>\n                    <Link href=\"/login\">\n                      <Button variant=\"ghost\" size=\"sm\" data-testid=\"link-login\">\n                        Connexion\n                      </Button>\n                    </Link>\n                    <Link href=\"/signup\">\n                      <Button size=\"sm\" data-testid=\"link-signup\">\n                        Inscription\n                      </Button>\n                    </Link>\n                  </>\n                )\n              )}\n            </div>\n\n            {/* CTA Button - Desktop */}\n            {user && (\n              <Link href=\"/post-job\" className=\"hidden md:block\">\n                <Button data-testid=\"button-header-post-job\">\n                  <Building2 className=\"h-4 w-4 mr-2\" />\n                  {t(\"nav.postJob\")}\n                </Button>\n              </Link>\n            )}\n\n            {/* Mobile Menu Toggle */}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"md:hidden\"\n              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n              data-testid=\"button-mobile-menu\"\n            >\n              {mobileMenuOpen ? <X className=\"h-5 w-5\" /> : <Menu className=\"h-5 w-5\" />}\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile Menu */}\n      {mobileMenuOpen && (\n        <div className=\"md:hidden border-t border-border bg-background\">\n          <nav className=\"flex flex-col p-4 gap-2\">\n            {navLinks.map((link) => (\n              <Link key={link.href} href={link.href}>\n                <Button\n                  variant={location === link.href ? \"secondary\" : \"ghost\"}\n                  className=\"w-full justify-start\"\n                  onClick={() => setMobileMenuOpen(false)}\n                  data-testid={`link-mobile-nav-${link.href.replace(\"/\", \"\") || \"home\"}`}\n                >\n                  {link.label}\n                </Button>\n              </Link>\n            ))}\n            {user && (\n              <Link href=\"/post-job\">\n                <Button className=\"w-full justify-start\" onClick={() => setMobileMenuOpen(false)} data-testid=\"button-mobile-post-job\">\n                  <Building2 className=\"h-4 w-4 mr-2\" />\n                  {t(\"nav.postJob\")}\n                </Button>\n              </Link>\n            )}\n            <div className=\"border-t border-border pt-2\">\n              {user ? (\n                <>\n                  <div className=\"px-2 py-2 text-sm text-muted-foreground\">\n                    {user.name || user.username}\n                  </div>\n                  <Button\n                    variant=\"ghost\"\n                    className=\"w-full justify-start text-red-500 hover:text-red-600\"\n                    onClick={() => {\n                      handleLogout();\n                      setMobileMenuOpen(false);\n                    }}\n                    data-testid=\"button-mobile-logout\"\n                  >\n                    <LogOut className=\"h-4 w-4 mr-2\" />\n                    Déconnexion\n                  </Button>\n                </>\n              ) : (\n                <>\n                  <Link href=\"/login\">\n                    <Button\n                      variant=\"ghost\"\n                      className=\"w-full justify-start\"\n                      onClick={() => setMobileMenuOpen(false)}\n                      data-testid=\"link-mobile-login\"\n                    >\n                      Connexion\n                    </Button>\n                  </Link>\n                  <Link href=\"/signup\">\n                    <Button\n                      className=\"w-full justify-start\"\n                      onClick={() => setMobileMenuOpen(false)}\n                      data-testid=\"link-mobile-signup\"\n                    >\n                      Inscription\n                    </Button>\n                  </Link>\n                </>\n              )}\n            </div>\n          </nav>\n        </div>\n      )}\n    </header>\n  );\n}\n","size_bytes":8424},"server/index-prod.ts":{"content":"import fs from \"node:fs\";\nimport path from \"node:path\";\nimport { type Server } from \"node:http\";\n\nimport express, { type Express } from \"express\";\nimport runApp from \"./app\";\n\nexport async function serveStatic(app: Express, _server: Server) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n\n(async () => {\n  await runApp(serveStatic);\n})();\n","size_bytes":712},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { ThemeProvider } from \"@/lib/theme\";\nimport { I18nProvider } from \"@/lib/i18n\";\nimport { AuthProvider } from \"@/lib/auth\";\nimport { DarijaChat } from \"@/components/chat/DarijaChat\";\nimport Home from \"@/pages/Home\";\nimport PostJob from \"@/pages/PostJob\";\nimport TechnicianDashboard from \"@/pages/TechnicianDashboard\";\nimport ClientDashboard from \"@/pages/ClientDashboard\";\nimport Login from \"@/pages/Login\";\nimport Signup from \"@/pages/Signup\";\nimport ClientSignup from \"@/pages/ClientSignup\";\nimport TechnicianSignup from \"@/pages/TechnicianSignup\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/post-job\" component={PostJob} />\n      <Route path=\"/technician-dashboard\" component={TechnicianDashboard} />\n      <Route path=\"/client-dashboard\" component={ClientDashboard} />\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/signup\" component={Signup} />\n      <Route path=\"/signup/client\" component={ClientSignup} />\n      <Route path=\"/signup/technician\" component={TechnicianSignup} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider>\n        <AuthProvider>\n          <I18nProvider>\n            <TooltipProvider>\n              <Toaster />\n              <Router />\n              <DarijaChat />\n            </TooltipProvider>\n          </I18nProvider>\n        </AuthProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1851},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE - AlloBricolage Color Scheme */\n/* Primary: Royal Blue #1e40af | Secondary: Sunset Orange #ea580c */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 222 10% 12%;\n  --border: 222 15% 88%;\n  --card: 0 0% 98%;\n  --card-foreground: 222 10% 12%;\n  --card-border: 222 10% 94%;\n  --sidebar: 222 20% 96%;\n  --sidebar-foreground: 222 10% 14%;\n  --sidebar-border: 222 15% 91%;\n  --sidebar-primary: 222 69% 40%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 222 20% 88%;\n  --sidebar-accent-foreground: 222 10% 16%;\n  --sidebar-ring: 222 69% 40%;\n  --popover: 222 15% 92%;\n  --popover-foreground: 222 10% 14%;\n  --popover-border: 222 12% 86%;\n  --primary: 222 69% 40%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 222 15% 86%;\n  --secondary-foreground: 222 10% 16%;\n  --muted: 222 12% 90%;\n  --muted-foreground: 222 10% 35%;\n  --accent: 21 91% 48%;\n  --accent-foreground: 0 0% 100%;\n  --destructive: 0 84% 45%;\n  --destructive-foreground: 0 100% 98%;\n  --input: 222 12% 68%;\n  --ring: 222 69% 40%;\n  --chart-1: 222 69% 40%;\n  --chart-2: 21 91% 48%;\n  --chart-3: 142 76% 36%;\n  --chart-4: 280 65% 45%;\n  --chart-5: 340 75% 42%;\n  --font-sans: Inter, sans-serif;\n  --font-serif: Cairo, Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(220 8% 20% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(220 8% 20% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(220 8% 20% / 0.00), 0px 1px 2px -1px hsl(220 8% 20% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(220 8% 20% / 0.00), 0px 1px 2px -1px hsl(220 8% 20% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(220 8% 20% / 0.00), 0px 2px 4px -1px hsl(220 8% 20% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(220 8% 20% / 0.00), 0px 4px 6px -1px hsl(220 8% 20% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(220 8% 20% / 0.00), 0px 8px 10px -1px hsl(220 8% 20% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(220 8% 20% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n/* DARK MODE - AlloBricolage Color Scheme */\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 222 15% 8%;\n  --foreground: 222 10% 96%;\n  --border: 222 12% 18%;\n  --card: 222 12% 10%;\n  --card-foreground: 222 10% 96%;\n  --card-border: 222 12% 13%;\n  --sidebar: 222 10% 12%;\n  --sidebar-foreground: 222 10% 92%;\n  --sidebar-border: 222 10% 16%;\n  --sidebar-primary: 222 69% 55%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 222 15% 18%;\n  --sidebar-accent-foreground: 222 10% 94%;\n  --sidebar-ring: 222 69% 55%;\n  --popover: 222 12% 14%;\n  --popover-foreground: 222 10% 92%;\n  --popover-border: 222 10% 18%;\n  --primary: 222 69% 55%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 222 12% 20%;\n  --secondary-foreground: 222 10% 94%;\n  --muted: 222 10% 16%;\n  --muted-foreground: 222 10% 72%;\n  --accent: 21 91% 55%;\n  --accent-foreground: 0 0% 100%;\n  --destructive: 0 84% 48%;\n  --destructive-foreground: 0 100% 98%;\n  --input: 222 12% 32%;\n  --ring: 222 69% 55%;\n  --chart-1: 222 69% 65%;\n  --chart-2: 21 91% 60%;\n  --chart-3: 142 76% 62%;\n  --chart-4: 280 65% 70%;\n  --chart-5: 340 75% 68%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(220 8% 5% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(220 8% 5% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(220 8% 5% / 0.00), 0px 1px 2px -1px hsl(220 8% 5% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(220 8% 5% / 0.00), 0px 1px 2px -1px hsl(220 8% 5% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(220 8% 5% / 0.00), 0px 2px 4px -1px hsl(220 8% 5% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(220 8% 5% / 0.00), 0px 4px 6px -1px hsl(220 8% 5% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(220 8% 5% / 0.00), 0px 8px 10px -1px hsl(220 8% 5% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(220 8% 5% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","size_bytes":10866},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/chat/DarijaChat.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { \n  MessageCircle, \n  X, \n  Send, \n  Loader2,\n  Minimize2,\n  Maximize2\n} from \"lucide-react\";\n\ninterface ChatMessage {\n  id: string;\n  role: \"user\" | \"assistant\";\n  content: string;\n  timestamp: Date;\n}\n\nexport function DarijaChat() {\n  const { t } = useI18n();\n  const { toast } = useToast();\n  const [isOpen, setIsOpen] = useState(false);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [messages, setMessages] = useState<ChatMessage[]>([\n    {\n      id: \"greeting\",\n      role: \"assistant\",\n      content: t(\"chat.greeting\"),\n      timestamp: new Date(),\n    },\n  ]);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const chatMutation = useMutation({\n    mutationFn: async (userMessage: string) => {\n      const response = await apiRequest(\"POST\", \"/api/chat/darija\", {\n        message: userMessage,\n        history: messages.slice(-10).map(m => ({\n          role: m.role,\n          content: m.content,\n        })),\n      });\n      return response.json();\n    },\n    onSuccess: (data) => {\n      const assistantMessage: ChatMessage = {\n        id: Date.now().toString(),\n        role: \"assistant\",\n        content: data.response || \"Smhli, ma fhemtch. 3awed l message dyalek.\",\n        timestamp: new Date(),\n      };\n      setMessages(prev => [...prev, assistantMessage]);\n    },\n    onError: () => {\n      const errorMessage: ChatMessage = {\n        id: Date.now().toString(),\n        role: \"assistant\",\n        content: \"Smhli, kayna mochkila teknika. 3awed men ba3d.\",\n        timestamp: new Date(),\n      };\n      setMessages(prev => [...prev, errorMessage]);\n      toast({\n        title: \"Erreur\",\n        description: \"Impossible de contacter le support\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSend = () => {\n    if (!message.trim() || chatMutation.isPending) return;\n\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      role: \"user\",\n      content: message.trim(),\n      timestamp: new Date(),\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setMessage(\"\");\n    chatMutation.mutate(message.trim());\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  if (!isOpen) {\n    return (\n      <Button\n        onClick={() => setIsOpen(true)}\n        className=\"fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-lg bg-accent hover:bg-accent/90 z-50\"\n        size=\"icon\"\n        data-testid=\"button-open-darija-chat\"\n      >\n        <MessageCircle className=\"h-6 w-6\" />\n      </Button>\n    );\n  }\n\n  return (\n    <Card \n      className={`fixed z-50 shadow-2xl border-2 border-accent/20 transition-all duration-300 ${\n        isMinimized \n          ? \"bottom-6 right-6 w-72 h-14\" \n          : \"bottom-6 right-6 w-96 h-[500px] max-h-[80vh]\"\n      }`}\n      data-testid=\"card-darija-chat\"\n    >\n      <div \n        className=\"flex items-center justify-between p-4 border-b border-border bg-accent/5 rounded-t-lg cursor-pointer\"\n        onClick={() => isMinimized && setIsMinimized(false)}\n      >\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 rounded-full bg-accent/10 flex items-center justify-center\">\n            <MessageCircle className=\"h-5 w-5 text-accent\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-sm\">{t(\"chat.title\")}</h3>\n            <p className=\"text-xs text-muted-foreground\">Darija / Français / عربية</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-8 w-8\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setIsMinimized(!isMinimized);\n            }}\n            data-testid=\"button-minimize-chat\"\n          >\n            {isMinimized ? <Maximize2 className=\"h-4 w-4\" /> : <Minimize2 className=\"h-4 w-4\" />}\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-8 w-8\"\n            onClick={(e) => {\n              e.stopPropagation();\n              setIsOpen(false);\n            }}\n            data-testid=\"button-close-chat\"\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {!isMinimized && (\n        <>\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-4 h-[calc(100%-140px)]\">\n            {messages.map((msg) => (\n              <div\n                key={msg.id}\n                className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n              >\n                <div\n                  className={`max-w-[80%] rounded-2xl px-4 py-2 ${\n                    msg.role === \"user\"\n                      ? \"bg-primary text-primary-foreground rounded-br-md\"\n                      : \"bg-muted rounded-bl-md\"\n                  }`}\n                  data-testid={`chat-message-${msg.id}`}\n                >\n                  <p className=\"text-sm whitespace-pre-wrap\">{msg.content}</p>\n                  <p className=\"text-[10px] opacity-60 mt-1\">\n                    {msg.timestamp.toLocaleTimeString(\"fr-FR\", { \n                      hour: \"2-digit\", \n                      minute: \"2-digit\" \n                    })}\n                  </p>\n                </div>\n              </div>\n            ))}\n            {chatMutation.isPending && (\n              <div className=\"flex justify-start\">\n                <div className=\"bg-muted rounded-2xl rounded-bl-md px-4 py-3\">\n                  <Loader2 className=\"h-4 w-4 animate-spin text-muted-foreground\" />\n                </div>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          <div className=\"p-4 border-t border-border\">\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"text\"\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                onKeyDown={handleKeyDown}\n                placeholder={t(\"chat.placeholder\")}\n                className=\"flex-1 h-10 px-4 rounded-full border border-input bg-background text-sm focus:outline-none focus:ring-2 focus:ring-accent\"\n                disabled={chatMutation.isPending}\n                data-testid=\"input-chat-message\"\n              />\n              <Button\n                onClick={handleSend}\n                disabled={!message.trim() || chatMutation.isPending}\n                size=\"icon\"\n                className=\"h-10 w-10 rounded-full bg-accent hover:bg-accent/90\"\n                data-testid=\"button-send-message\"\n              >\n                {chatMutation.isPending ? (\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\n                ) : (\n                  <Send className=\"h-4 w-4\" />\n                )}\n              </Button>\n            </div>\n          </div>\n        </>\n      )}\n    </Card>\n  );\n}\n","size_bytes":7553},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/lib/theme.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"light\" | \"dark\";\n\ninterface ThemeContextType {\n  theme: Theme;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    if (typeof window !== \"undefined\") {\n      const stored = localStorage.getItem(\"allobricolage-theme\") as Theme;\n      return stored || \"light\";\n    }\n    return \"light\";\n  });\n\n  useEffect(() => {\n    const root = document.documentElement;\n    root.classList.remove(\"light\", \"dark\");\n    root.classList.add(theme);\n    localStorage.setItem(\"allobricolage-theme\", theme);\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme((prev) => (prev === \"light\" ? \"dark\" : \"light\"));\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  }\n  return context;\n}\n","size_bytes":1185},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/home/ServicesGrid.tsx":{"content":"import { Link } from \"wouter\";\nimport { Card } from \"@/components/ui/card\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { \n  Droplets, \n  Zap, \n  Paintbrush, \n  Hammer, \n  Wind, \n  Building, \n  Grid3X3, \n  Key, \n  TreePine, \n  Sparkles \n} from \"lucide-react\";\n\nconst services = [\n  { id: \"plomberie\", icon: Droplets, color: \"bg-blue-500/10 text-blue-500\" },\n  { id: \"electricite\", icon: Zap, color: \"bg-yellow-500/10 text-yellow-500\" },\n  { id: \"peinture\", icon: Paintbrush, color: \"bg-purple-500/10 text-purple-500\" },\n  { id: \"menuiserie\", icon: Hammer, color: \"bg-amber-600/10 text-amber-600\" },\n  { id: \"climatisation\", icon: Wind, color: \"bg-cyan-500/10 text-cyan-500\" },\n  { id: \"maconnerie\", icon: Building, color: \"bg-orange-500/10 text-orange-500\" },\n  { id: \"carrelage\", icon: Grid3X3, color: \"bg-teal-500/10 text-teal-500\" },\n  { id: \"serrurerie\", icon: Key, color: \"bg-slate-500/10 text-slate-500\" },\n  { id: \"jardinage\", icon: TreePine, color: \"bg-green-500/10 text-green-500\" },\n  { id: \"nettoyage\", icon: Sparkles, color: \"bg-pink-500/10 text-pink-500\" },\n];\n\nexport function ServicesGrid() {\n  const { t } = useI18n();\n\n  return (\n    <section className=\"py-16 md:py-20 bg-card/50\">\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl font-bold mb-4\">{t(\"services.title\")}</h2>\n          <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n            Nos algorithmes IA analysent votre demande et vous connectent avec les artisans spécialisés dans chaque domaine.\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\n          {services.map((service) => {\n            const Icon = service.icon;\n            return (\n              <Link \n                key={service.id} \n                href={`/post-job?service=${service.id}`}\n              >\n                <Card \n                  className=\"p-6 text-center hover-elevate cursor-pointer transition-all group\"\n                  data-testid={`card-service-${service.id}`}\n                >\n                  <div className={`inline-flex items-center justify-center w-14 h-14 rounded-xl ${service.color} mb-4 transition-transform group-hover:scale-110`}>\n                    <Icon className=\"h-7 w-7\" />\n                  </div>\n                  <h3 className=\"font-medium text-sm\">\n                    {t(`services.${service.id}`)}\n                  </h3>\n                </Card>\n              </Link>\n            );\n          })}\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":2603},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/booking/UpsellSuggestions.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { Plus, Sparkles, Percent } from \"lucide-react\";\nimport type { UpsellSuggestion } from \"@shared/schema\";\n\ninterface UpsellSuggestionsProps {\n  suggestions: UpsellSuggestion[];\n  onAdd: (suggestion: UpsellSuggestion) => void;\n}\n\nexport function UpsellSuggestions({ suggestions, onAdd }: UpsellSuggestionsProps) {\n  const { t } = useI18n();\n\n  if (!suggestions || suggestions.length === 0) {\n    return null;\n  }\n\n  return (\n    <Card className=\"p-6 border-chart-4/20 bg-chart-4/5\">\n      <div className=\"flex items-center gap-3 mb-4\">\n        <div className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-chart-4/10\">\n          <Sparkles className=\"h-5 w-5 text-chart-4\" />\n        </div>\n        <div>\n          <h3 className=\"font-semibold\">{t(\"upsell.title\")}</h3>\n          <p className=\"text-sm text-muted-foreground\">Suggestions IA personnalisées</p>\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        {suggestions.map((suggestion, index) => (\n          <div\n            key={index}\n            className=\"flex items-center justify-between p-3 rounded-lg bg-background border border-border\"\n            data-testid={`upsell-suggestion-${index}`}\n          >\n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-1\">\n                <span className=\"font-medium text-sm\">{suggestion.service}</span>\n                {suggestion.discount > 0 && (\n                  <Badge className=\"bg-green-500/10 text-green-600 border-green-500/20 border text-xs\">\n                    <Percent className=\"h-3 w-3 mr-1\" />\n                    -{suggestion.discount}%\n                  </Badge>\n                )}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">{suggestion.description}</p>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <div className=\"w-16 h-1.5 rounded-full bg-muted overflow-hidden\">\n                  <div \n                    className=\"h-full bg-chart-4 rounded-full\"\n                    style={{ width: `${suggestion.probability * 100}%` }}\n                  />\n                </div>\n                <span className=\"text-xs text-muted-foreground\">\n                  {Math.round(suggestion.probability * 100)}% recommandé\n                </span>\n              </div>\n            </div>\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              onClick={() => onAdd(suggestion)}\n              data-testid={`button-add-upsell-${index}`}\n            >\n              <Plus className=\"h-4 w-4 mr-1\" />\n              {t(\"upsell.add\")}\n            </Button>\n          </div>\n        ))}\n      </div>\n    </Card>\n  );\n}\n","size_bytes":2877},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/home/Stats.tsx":{"content":"import { Cpu, Users, Star, Clock } from \"lucide-react\";\n\nconst stats = [\n  {\n    icon: Cpu,\n    value: \"47\",\n    label: \"Modèles IA\",\n    description: \"Travaillent ensemble\",\n  },\n  {\n    icon: Users,\n    value: \"10K+\",\n    label: \"Artisans\",\n    description: \"Vérifiés au Maroc\",\n  },\n  {\n    icon: Star,\n    value: \"4.8\",\n    label: \"Note moyenne\",\n    description: \"Sur 500K+ travaux\",\n  },\n  {\n    icon: Clock,\n    value: \"<2min\",\n    label: \"Temps de match\",\n    description: \"Garantie IA\",\n  },\n];\n\nexport function Stats() {\n  return (\n    <section className=\"py-16 md:py-20 bg-primary text-primary-foreground\">\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-8\">\n          {stats.map((stat, index) => {\n            const Icon = stat.icon;\n            return (\n              <div \n                key={index} \n                className=\"text-center\"\n                data-testid={`stat-${index}`}\n              >\n                <div className=\"inline-flex items-center justify-center w-14 h-14 rounded-xl bg-white/10 mb-4\">\n                  <Icon className=\"h-7 w-7\" />\n                </div>\n                <div className=\"text-4xl md:text-5xl font-bold mb-1\">{stat.value}</div>\n                <div className=\"font-semibold mb-1\">{stat.label}</div>\n                <div className=\"text-sm opacity-80\">{stat.description}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":1498},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"shared/schema.ts":{"content":"import { pgTable, text, varchar, integer, real, boolean, timestamp, jsonb } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Service categories for Morocco handyman market\nexport const SERVICE_CATEGORIES = [\n  \"plomberie\",      // Plumbing\n  \"electricite\",    // Electrical\n  \"peinture\",       // Painting\n  \"menuiserie\",     // Carpentry\n  \"climatisation\",  // AC/HVAC\n  \"maconnerie\",     // Masonry\n  \"carrelage\",      // Tiling\n  \"serrurerie\",     // Locksmith\n  \"jardinage\",      // Gardening\n  \"nettoyage\",      // Cleaning\n] as const;\n\nexport const MOROCCAN_CITIES = [\n  \"Casablanca\",\n  \"Rabat\",\n  \"Marrakech\",\n  \"Fès\",\n  \"Tanger\",\n  \"Agadir\",\n  \"Meknès\",\n  \"Oujda\",\n  \"Kenitra\",\n  \"Tétouan\",\n] as const;\n\nexport const URGENCY_LEVELS = [\"low\", \"normal\", \"high\", \"emergency\"] as const;\nexport const COMPLEXITY_LEVELS = [\"simple\", \"moderate\", \"complex\"] as const;\nexport const BOOKING_STATUS = [\"pending\", \"accepted\", \"in_progress\", \"completed\", \"cancelled\"] as const;\n\n// Users table for clients and technicians\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey(),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  role: text(\"role\").notNull().default(\"client\"),\n  name: text(\"name\").notNull(),\n  phone: text(\"phone\"),\n  city: text(\"city\"),\n});\n\n// Technicians table - professional metadata linked to users\nexport const technicians = pgTable(\"technicians\", {\n  id: varchar(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().unique(),\n  services: text(\"services\").array().notNull(),\n  skills: text(\"skills\").array().notNull().default([]),\n  bio: text(\"bio\"),\n  photo: text(\"photo\"),\n  rating: real(\"rating\").notNull().default(0),\n  reviewCount: integer(\"review_count\").notNull().default(0),\n  completedJobs: integer(\"completed_jobs\").notNull().default(0),\n  responseTimeMinutes: integer(\"response_time_minutes\").notNull().default(30),\n  completionRate: real(\"completion_rate\").notNull().default(0.95),\n  yearsExperience: integer(\"years_experience\").notNull().default(1),\n  hourlyRate: integer(\"hourly_rate\").notNull().default(150),\n  isVerified: boolean(\"is_verified\").notNull().default(false),\n  isAvailable: boolean(\"is_available\").notNull().default(true),\n  isPro: boolean(\"is_pro\").notNull().default(false),\n  isPromo: boolean(\"is_promo\").notNull().default(false),\n  availability: text(\"availability\").notNull().default(\"Sur RDV\"),\n  certifications: text(\"certifications\").array().notNull().default([]),\n  latitude: real(\"latitude\"),\n  longitude: real(\"longitude\"),\n  languages: text(\"languages\").array().notNull().default([\"français\", \"arabe\"]),\n});\n\n// Jobs table\nexport const jobs = pgTable(\"jobs\", {\n  id: varchar(\"id\").primaryKey(),\n  clientId: varchar(\"client_id\"),\n  description: text(\"description\").notNull(),\n  service: text(\"service\").notNull(),\n  subServices: text(\"sub_services\").array(),\n  city: text(\"city\").notNull(),\n  urgency: text(\"urgency\").notNull().default(\"normal\"),\n  complexity: text(\"complexity\").notNull().default(\"moderate\"),\n  estimatedDuration: text(\"estimated_duration\"),\n  minCost: integer(\"min_cost\"),\n  maxCost: integer(\"max_cost\"),\n  likelyCost: integer(\"likely_cost\"),\n  confidence: real(\"confidence\"),\n  status: text(\"status\").notNull().default(\"pending\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  extractedKeywords: text(\"extracted_keywords\").array(),\n  aiAnalysis: jsonb(\"ai_analysis\"),\n});\n\n// Bookings table\nexport const bookings = pgTable(\"bookings\", {\n  id: varchar(\"id\").primaryKey(),\n  jobId: varchar(\"job_id\").notNull(),\n  technicianId: varchar(\"technician_id\").notNull(),\n  clientName: text(\"client_name\").notNull(),\n  clientPhone: text(\"client_phone\").notNull(),\n  scheduledDate: text(\"scheduled_date\").notNull(),\n  scheduledTime: text(\"scheduled_time\").notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  estimatedCost: integer(\"estimated_cost\"),\n  finalCost: integer(\"final_cost\"),\n  matchScore: real(\"match_score\"),\n  matchExplanation: text(\"match_explanation\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({ id: true });\nexport const insertTechnicianSchema = createInsertSchema(technicians).omit({ id: true });\nexport const insertJobSchema = createInsertSchema(jobs).omit({ id: true, createdAt: true });\nexport const insertBookingSchema = createInsertSchema(bookings).omit({ id: true, createdAt: true });\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type Technician = typeof technicians.$inferSelect;\nexport type InsertTechnician = z.infer<typeof insertTechnicianSchema>;\nexport type Job = typeof jobs.$inferSelect;\nexport type InsertJob = z.infer<typeof insertJobSchema>;\nexport type Booking = typeof bookings.$inferSelect;\nexport type InsertBooking = z.infer<typeof insertBookingSchema>;\n\n// Review type for recent reviews\nexport interface TechnicianReview {\n  author: string;\n  text: string;\n  rating?: number;\n}\n\n// Combined technician with user info for display\nexport interface TechnicianWithUser {\n  id: string;\n  userId: string;\n  name: string;\n  phone: string | null;\n  email?: string | null;\n  city: string | null;\n  services: string[];\n  skills: string[];\n  bio: string | null;\n  photo: string | null;\n  rating: number;\n  reviewCount: number;\n  completedJobs: number;\n  responseTimeMinutes: number;\n  completionRate: number;\n  yearsExperience: number;\n  hourlyRate: number;\n  isVerified: boolean;\n  isAvailable: boolean;\n  isPro: boolean;\n  isPromo: boolean;\n  availability: string;\n  certifications: string[];\n  recentReview?: TechnicianReview | null;\n  latitude: number | null;\n  longitude: number | null;\n  languages: string[];\n}\n\n// AI Analysis types\nexport interface JobAnalysis {\n  service: string;\n  subServices: string[];\n  urgency: string;\n  complexity: string;\n  estimatedDuration: string;\n  extractedKeywords: string[];\n  confidence: number;\n  language: \"fr\" | \"ar\" | \"en\";\n}\n\nexport interface CostEstimate {\n  minCost: number;\n  likelyCost: number;\n  maxCost: number;\n  confidence: number;\n  breakdown: {\n    baseRate: number;\n    urgencyPremium: number;\n    timePremium: number;\n    complexityPremium: number;\n    demandPremium: number;\n  };\n  explanation: string;\n}\n\nexport interface TechnicianMatch {\n  technician: TechnicianWithUser;\n  matchScore: number;\n  explanation: string;\n  etaMinutes: number;\n  estimatedCost: CostEstimate;\n  factors: {\n    specializationMatch: number;\n    locationScore: number;\n    availabilityScore: number;\n    responseTimeScore: number;\n    completionRateScore: number;\n    ratingScore: number;\n    priceScore: number;\n  };\n}\n\nexport interface UpsellSuggestion {\n  service: string;\n  description: string;\n  probability: number;\n  discount: number;\n  reason: string;\n}\n","size_bytes":6914},"client/src/pages/Signup.tsx":{"content":"import { useLocation } from \"wouter\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { User, Wrench, ArrowRight } from \"lucide-react\";\n\nexport default function Signup() {\n  const [, setLocation] = useLocation();\n\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      <main className=\"flex-1 flex items-center justify-center py-8 px-4\">\n        <div className=\"w-full max-w-3xl\">\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-3xl font-bold mb-2\">Rejoignez AlloBricolage</h1>\n            <p className=\"text-muted-foreground\">\n              Choisissez votre type de compte pour commencer\n            </p>\n          </div>\n\n          <div className=\"grid gap-6 sm:grid-cols-2\">\n            <Card \n              className=\"p-6 cursor-pointer transition-all hover-elevate group\"\n              onClick={() => setLocation(\"/signup/client\")}\n              data-testid=\"card-signup-client\"\n            >\n              <div className=\"flex flex-col items-center text-center space-y-4\">\n                <div className=\"flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/30\">\n                  <User className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-semibold mb-2\">Je suis un Client</h2>\n                  <p className=\"text-muted-foreground text-sm\">\n                    Je recherche des artisans qualifiés pour mes projets de bricolage et maintenance\n                  </p>\n                </div>\n                <ul className=\"text-sm text-left space-y-2 w-full\">\n                  <li className=\"flex items-center gap-2\">\n                    <span className=\"w-1.5 h-1.5 rounded-full bg-blue-600\"></span>\n                    Trouvez des techniciens vérifiés\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <span className=\"w-1.5 h-1.5 rounded-full bg-blue-600\"></span>\n                    Comparez les prix et avis\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <span className=\"w-1.5 h-1.5 rounded-full bg-blue-600\"></span>\n                    Réservez en quelques clics\n                  </li>\n                </ul>\n                <Button className=\"w-full group-hover:bg-primary/90\" data-testid=\"button-signup-client\">\n                  S'inscrire comme client\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\n                </Button>\n              </div>\n            </Card>\n\n            <Card \n              className=\"p-6 cursor-pointer transition-all hover-elevate group\"\n              onClick={() => setLocation(\"/signup/technician\")}\n              data-testid=\"card-signup-technician\"\n            >\n              <div className=\"flex flex-col items-center text-center space-y-4\">\n                <div className=\"flex items-center justify-center w-16 h-16 rounded-full bg-primary/10\">\n                  <Wrench className=\"h-8 w-8 text-primary\" />\n                </div>\n                <div>\n                  <h2 className=\"text-xl font-semibold mb-2\">Je suis un Technicien</h2>\n                  <p className=\"text-muted-foreground text-sm\">\n                    Je suis un artisan professionnel et je souhaite proposer mes services\n                  </p>\n                </div>\n                <ul className=\"text-sm text-left space-y-2 w-full\">\n                  <li className=\"flex items-center gap-2\">\n                    <span className=\"w-1.5 h-1.5 rounded-full bg-primary\"></span>\n                    Recevez des demandes de clients\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <span className=\"w-1.5 h-1.5 rounded-full bg-primary\"></span>\n                    Gérez votre planning facilement\n                  </li>\n                  <li className=\"flex items-center gap-2\">\n                    <span className=\"w-1.5 h-1.5 rounded-full bg-primary\"></span>\n                    Augmentez vos revenus\n                  </li>\n                </ul>\n                <Button variant=\"outline\" className=\"w-full\" data-testid=\"button-signup-technician\">\n                  S'inscrire comme technicien\n                  <ArrowRight className=\"h-4 w-4 ml-2\" />\n                </Button>\n              </div>\n            </Card>\n          </div>\n\n          <div className=\"mt-8 text-center text-sm\">\n            <p className=\"text-muted-foreground\">\n              Vous avez déjà un compte?{\" \"}\n              <button\n                onClick={() => setLocation(\"/login\")}\n                className=\"text-primary hover:underline font-medium\"\n                data-testid=\"link-to-login\"\n              >\n                Se connecter\n              </button>\n            </p>\n          </div>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":5084},"client/src/lib/i18n.tsx":{"content":"import { createContext, useContext, useState } from \"react\";\n\ntype Language = \"fr\" | \"ar\";\n\ninterface I18nContextType {\n  lang: Language;\n  setLang: (lang: Language) => void;\n  t: (key: string) => string;\n  isRTL: boolean;\n}\n\nconst translations: Record<Language, Record<string, string>> = {\n  fr: {\n    // Navigation\n    \"nav.home\": \"Accueil\",\n    \"nav.findTech\": \"Trouver un Technicien\",\n    \"nav.postJob\": \"Publier un Travail\",\n    \"nav.forTech\": \"Espace Technicien\",\n    \"nav.forClient\": \"Espace Client\",\n    \"nav.dashboard\": \"Tableau de Bord\",\n    \n    // Hero\n    \"hero.title\": \"Trouvez le Meilleur Technicien\",\n    \"hero.titleHighlight\": \"en 2 Minutes\",\n    \"hero.subtitle\": \"Notre plateforme intelligente analyse votre demande pour vous connecter avec le technicien parfait. Plomberie, électricité, peinture et plus encore.\",\n    \"hero.searchPlaceholder\": \"Rechercher un technicien... (ex: plombier à Casablanca)\",\n    \"hero.cta\": \"Trouver un Technicien\",\n    \"hero.trust1\": \"Matching Intelligent\",\n    \"hero.trust2\": \"500K+ Travaux Complétés\",\n    \"hero.trust3\": \"Réponse en 2min\",\n    \n    // Services\n    \"services.title\": \"Nos Services\",\n    \"services.plomberie\": \"Plomberie\",\n    \"services.electricite\": \"Électricité\",\n    \"services.peinture\": \"Peinture\",\n    \"services.menuiserie\": \"Menuiserie\",\n    \"services.climatisation\": \"Climatisation\",\n    \"services.maconnerie\": \"Maçonnerie\",\n    \"services.carrelage\": \"Carrelage\",\n    \"services.serrurerie\": \"Serrurerie\",\n    \"services.jardinage\": \"Jardinage\",\n    \"services.nettoyage\": \"Nettoyage\",\n    \n    // Job posting\n    \"job.title\": \"Décrivez votre Travail\",\n    \"job.description\": \"Description du problème\",\n    \"job.descPlaceholder\": \"Expliquez en détail ce dont vous avez besoin...\",\n    \"job.city\": \"Ville\",\n    \"job.selectCity\": \"Sélectionnez votre ville\",\n    \"job.urgency\": \"Urgence\",\n    \"job.urgencyLow\": \"Pas pressé\",\n    \"job.urgencyNormal\": \"Normal\",\n    \"job.urgencyHigh\": \"Urgent\",\n    \"job.urgencyEmergency\": \"Urgence\",\n    \"job.analyzing\": \"Analyse de votre demande...\",\n    \"job.findMatches\": \"Trouver des Techniciens\",\n    \n    // AI Analysis\n    \"ai.service\": \"Service détecté\",\n    \"ai.urgency\": \"Niveau d'urgence\",\n    \"ai.complexity\": \"Complexité\",\n    \"ai.duration\": \"Durée estimée\",\n    \"ai.confidence\": \"Confiance IA\",\n    \n    // Matching\n    \"match.title\": \"Techniciens Recommandés\",\n    \"match.score\": \"Score de Match\",\n    \"match.distance\": \"Distance\",\n    \"match.response\": \"Temps de réponse\",\n    \"match.jobs\": \"Travaux complétés\",\n    \"match.available\": \"Disponible maintenant\",\n    \"match.nextAvailable\": \"Prochaine disponibilité\",\n    \"match.book\": \"Réserver\",\n    \"match.whyMatch\": \"Pourquoi ce match?\",\n    \"match.estimatedCost\": \"Coût estimé\",\n    \n    // Pricing\n    \"price.breakdown\": \"Détail du prix\",\n    \"price.base\": \"Tarif de base\",\n    \"price.urgency\": \"Prime d'urgence\",\n    \"price.time\": \"Prime horaire\",\n    \"price.complexity\": \"Prime complexité\",\n    \"price.confidence\": \"Intervalle de confiance\",\n    \"price.belowMarket\": \"sous la moyenne du marché\",\n    \"price.aboveMarket\": \"au-dessus de la moyenne\",\n    \n    // Booking\n    \"booking.title\": \"Confirmer la Réservation\",\n    \"booking.technician\": \"Technicien\",\n    \"booking.date\": \"Date\",\n    \"booking.time\": \"Heure\",\n    \"booking.name\": \"Votre nom\",\n    \"booking.phone\": \"Téléphone\",\n    \"booking.confirm\": \"Confirmer la Réservation\",\n    \"booking.success\": \"Réservation confirmée!\",\n    \n    // Upsell\n    \"upsell.title\": \"Pendant que le technicien est là...\",\n    \"upsell.discount\": \"de réduction\",\n    \"upsell.add\": \"Ajouter\",\n    \n    // Technician Dashboard\n    \"tech.dashboard\": \"Tableau de Bord Technicien\",\n    \"tech.earnings\": \"Revenus\",\n    \"tech.pendingJobs\": \"Travaux en Attente\",\n    \"tech.rating\": \"Note Moyenne\",\n    \"tech.completedJobs\": \"Travaux Complétés\",\n    \"tech.accept\": \"Accepter\",\n    \"tech.decline\": \"Refuser\",\n    \"tech.newJob\": \"Nouvelle Demande\",\n    \n    // Client Dashboard\n    \"client.dashboard\": \"Tableau de Bord Client\",\n    \"client.activeJobs\": \"Travaux Actifs\",\n    \"client.completedJobs\": \"Travaux Terminés\",\n    \"client.totalSpent\": \"Total Dépensé\",\n    \"client.noJobs\": \"Aucun travail en cours\",\n    \"client.postFirst\": \"Publiez votre première demande\",\n    \n    // DarijaChat\n    \"chat.title\": \"Support DarijaChat\",\n    \"chat.placeholder\": \"Écrivez votre message en Darija, Français ou Arabe...\",\n    \"chat.send\": \"Envoyer\",\n    \"chat.greeting\": \"Salam! Ana hna bach n3awnek. Kifach nqdr n3awnek lyoum?\",\n    \n    // Common\n    \"common.loading\": \"Chargement...\",\n    \"common.error\": \"Une erreur s'est produite\",\n    \"common.retry\": \"Réessayer\",\n    \"common.cancel\": \"Annuler\",\n    \"common.save\": \"Enregistrer\",\n    \"common.mad\": \"MAD\",\n    \"common.km\": \"km\",\n    \"common.min\": \"min\",\n    \"common.hours\": \"heures\",\n    \"common.days\": \"jours\",\n    \"common.verified\": \"Vérifié\",\n    \"common.reviews\": \"avis\",\n  },\n  ar: {\n    // Navigation\n    \"nav.home\": \"الرئيسية\",\n    \"nav.findTech\": \"البحث عن تقني\",\n    \"nav.postJob\": \"نشر عمل\",\n    \"nav.forTech\": \"مساحة التقني\",\n    \"nav.forClient\": \"مساحة العميل\",\n    \"nav.dashboard\": \"لوحة التحكم\",\n    \n    // Hero\n    \"hero.title\": \"اعثر على أفضل تقني\",\n    \"hero.titleHighlight\": \"في دقيقتين\",\n    \"hero.subtitle\": \"منصتنا الذكية تحلل طلبك للربط مع التقني المثالي. سباكة، كهرباء، دهان والمزيد.\",\n    \"hero.searchPlaceholder\": \"ابحث عن تقني... (مثال: سباك في الدار البيضاء)\",\n    \"hero.cta\": \"البحث عن تقني\",\n    \"hero.trust1\": \"مطابقة ذكية\",\n    \"hero.trust2\": \"+500 ألف عمل مكتمل\",\n    \"hero.trust3\": \"رد في دقيقتين\",\n    \n    // Services\n    \"services.title\": \"خدماتنا\",\n    \"services.plomberie\": \"سباكة\",\n    \"services.electricite\": \"كهرباء\",\n    \"services.peinture\": \"دهان\",\n    \"services.menuiserie\": \"نجارة\",\n    \"services.climatisation\": \"تكييف\",\n    \"services.maconnerie\": \"بناء\",\n    \"services.carrelage\": \"بلاط\",\n    \"services.serrurerie\": \"أقفال\",\n    \"services.jardinage\": \"حدائق\",\n    \"services.nettoyage\": \"تنظيف\",\n    \n    // Job posting\n    \"job.title\": \"صف عملك\",\n    \"job.description\": \"وصف المشكلة\",\n    \"job.descPlaceholder\": \"اشرح بالتفصيل ما تحتاجه...\",\n    \"job.city\": \"المدينة\",\n    \"job.selectCity\": \"اختر مدينتك\",\n    \"job.urgency\": \"الاستعجال\",\n    \"job.urgencyLow\": \"غير مستعجل\",\n    \"job.urgencyNormal\": \"عادي\",\n    \"job.urgencyHigh\": \"مستعجل\",\n    \"job.urgencyEmergency\": \"طوارئ\",\n    \"job.analyzing\": \"تحليل طلبك...\",\n    \"job.findMatches\": \"البحث عن تقنيين\",\n    \n    // AI Analysis\n    \"ai.service\": \"الخدمة المكتشفة\",\n    \"ai.urgency\": \"مستوى الاستعجال\",\n    \"ai.complexity\": \"التعقيد\",\n    \"ai.duration\": \"المدة المقدرة\",\n    \"ai.confidence\": \"الثقة\",\n    \n    // Matching\n    \"match.title\": \"التقنيون الموصى بهم\",\n    \"match.score\": \"درجة التطابق\",\n    \"match.distance\": \"المسافة\",\n    \"match.response\": \"وقت الاستجابة\",\n    \"match.jobs\": \"الأعمال المكتملة\",\n    \"match.available\": \"متاح الآن\",\n    \"match.nextAvailable\": \"التوفر القادم\",\n    \"match.book\": \"حجز\",\n    \"match.whyMatch\": \"لماذا هذا التطابق؟\",\n    \"match.estimatedCost\": \"التكلفة المقدرة\",\n    \n    // Pricing\n    \"price.breakdown\": \"تفصيل السعر\",\n    \"price.base\": \"السعر الأساسي\",\n    \"price.urgency\": \"علاوة الاستعجال\",\n    \"price.time\": \"علاوة الوقت\",\n    \"price.complexity\": \"علاوة التعقيد\",\n    \"price.confidence\": \"نطاق الثقة\",\n    \"price.belowMarket\": \"أقل من متوسط السوق\",\n    \"price.aboveMarket\": \"أعلى من المتوسط\",\n    \n    // Booking\n    \"booking.title\": \"تأكيد الحجز\",\n    \"booking.technician\": \"التقني\",\n    \"booking.date\": \"التاريخ\",\n    \"booking.time\": \"الوقت\",\n    \"booking.name\": \"اسمك\",\n    \"booking.phone\": \"الهاتف\",\n    \"booking.confirm\": \"تأكيد الحجز\",\n    \"booking.success\": \"تم تأكيد الحجز!\",\n    \n    // Upsell\n    \"upsell.title\": \"بينما التقني هنا...\",\n    \"upsell.discount\": \"خصم\",\n    \"upsell.add\": \"إضافة\",\n    \n    // Technician Dashboard\n    \"tech.dashboard\": \"لوحة تحكم التقني\",\n    \"tech.earnings\": \"الأرباح\",\n    \"tech.pendingJobs\": \"الأعمال المعلقة\",\n    \"tech.rating\": \"التقييم المتوسط\",\n    \"tech.completedJobs\": \"الأعمال المكتملة\",\n    \"tech.accept\": \"قبول\",\n    \"tech.decline\": \"رفض\",\n    \"tech.newJob\": \"طلب جديد\",\n    \n    // Client Dashboard\n    \"client.dashboard\": \"لوحة تحكم العميل\",\n    \"client.activeJobs\": \"الأعمال النشطة\",\n    \"client.completedJobs\": \"الأعمال المكتملة\",\n    \"client.totalSpent\": \"المجموع المنفق\",\n    \"client.noJobs\": \"لا توجد أعمال حالية\",\n    \"client.postFirst\": \"انشر طلبك الأول\",\n    \n    // DarijaChat\n    \"chat.title\": \"دعم الدردشة\",\n    \"chat.placeholder\": \"اكتب رسالتك بالدارجة أو الفرنسية أو العربية...\",\n    \"chat.send\": \"إرسال\",\n    \"chat.greeting\": \"سلام! أنا هنا باش نعاونك. كيفاش نقدر نعاونك اليوم?\",\n    \n    // Common\n    \"common.loading\": \"جاري التحميل...\",\n    \"common.error\": \"حدث خطأ\",\n    \"common.retry\": \"إعادة المحاولة\",\n    \"common.cancel\": \"إلغاء\",\n    \"common.save\": \"حفظ\",\n    \"common.mad\": \"درهم\",\n    \"common.km\": \"كم\",\n    \"common.min\": \"دقيقة\",\n    \"common.hours\": \"ساعات\",\n    \"common.days\": \"أيام\",\n    \"common.verified\": \"موثق\",\n    \"common.reviews\": \"تقييمات\",\n  },\n};\n\nconst I18nContext = createContext<I18nContextType | undefined>(undefined);\n\nexport function I18nProvider({ children }: { children: React.ReactNode }) {\n  const [lang, setLang] = useState<Language>(() => {\n    if (typeof window !== \"undefined\") {\n      const stored = localStorage.getItem(\"allobricolage-lang\") as Language;\n      return stored || \"fr\";\n    }\n    return \"fr\";\n  });\n\n  const t = (key: string): string => {\n    return translations[lang][key] || key;\n  };\n\n  const handleSetLang = (newLang: Language) => {\n    setLang(newLang);\n    localStorage.setItem(\"allobricolage-lang\", newLang);\n    document.documentElement.dir = newLang === \"ar\" ? \"rtl\" : \"ltr\";\n  };\n\n  return (\n    <I18nContext.Provider value={{ lang, setLang: handleSetLang, t, isRTL: lang === \"ar\" }}>\n      {children}\n    </I18nContext.Provider>\n  );\n}\n\nexport function useI18n() {\n  const context = useContext(I18nContext);\n  if (!context) {\n    throw new Error(\"useI18n must be used within an I18nProvider\");\n  }\n  return context;\n}\n","size_bytes":11128},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/home/Hero.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { Search, Cpu, CheckCircle, Clock, Sparkles } from \"lucide-react\";\n\nexport function Hero() {\n  const { t } = useI18n();\n  const [, setLocation] = useLocation();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const handleSearch = () => {\n    if (searchQuery.trim()) {\n      setLocation(`/post-job?q=${encodeURIComponent(searchQuery)}`);\n    } else {\n      setLocation(\"/post-job\");\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      handleSearch();\n    }\n  };\n\n  return (\n    <section className=\"relative min-h-[70vh] flex items-center justify-center overflow-hidden\">\n      {/* Background with gradient overlay */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-background\" />\n      \n      {/* Decorative elements */}\n      <div className=\"absolute top-20 left-10 w-72 h-72 bg-primary/5 rounded-full blur-3xl\" />\n      <div className=\"absolute bottom-20 right-10 w-96 h-96 bg-chart-2/5 rounded-full blur-3xl\" />\n      \n      {/* Grid pattern overlay */}\n      <div \n        className=\"absolute inset-0 opacity-[0.03] dark:opacity-[0.02]\"\n        style={{\n          backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`,\n        }}\n      />\n\n      <div className=\"relative z-10 max-w-5xl mx-auto px-4 text-center\">\n        {/* AI Badge */}\n        <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-accent/10 border border-accent/20 text-accent mb-8\">\n          <Sparkles className=\"h-4 w-4\" />\n          <span className=\"text-sm font-medium\">Matching intelligent des techniciens</span>\n        </div>\n\n        {/* Main Heading */}\n        <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight mb-6\">\n          {t(\"hero.title\")}{\" \"}\n          <span className=\"text-primary\">{t(\"hero.titleHighlight\")}</span>\n        </h1>\n\n        {/* Subtitle */}\n        <p className=\"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto mb-10\">\n          {t(\"hero.subtitle\")}\n        </p>\n\n        {/* Search Bar */}\n        <div className=\"relative max-w-2xl mx-auto mb-10\">\n          <div className=\"relative flex items-center\">\n            <div className=\"absolute left-4 text-muted-foreground\">\n              <Search className=\"h-5 w-5\" />\n            </div>\n            <input\n              type=\"text\"\n              placeholder={t(\"hero.searchPlaceholder\")}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              onKeyDown={handleKeyDown}\n              className=\"w-full h-14 pl-12 pr-36 rounded-xl border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all\"\n              data-testid=\"input-hero-search\"\n            />\n            <Button\n              onClick={handleSearch}\n              className=\"absolute right-2 h-10 px-6\"\n              data-testid=\"button-hero-search\"\n            >\n              {t(\"hero.cta\")}\n            </Button>\n          </div>\n        </div>\n\n        {/* Trust Indicators */}\n        <div className=\"flex flex-wrap items-center justify-center gap-6 md:gap-10\">\n          <div className=\"flex items-center gap-2 text-muted-foreground\">\n            <div className=\"flex items-center justify-center w-10 h-10 rounded-full bg-primary/10\">\n              <Cpu className=\"h-5 w-5 text-primary\" />\n            </div>\n            <span className=\"text-sm font-medium\">{t(\"hero.trust1\")}</span>\n          </div>\n          <div className=\"flex items-center gap-2 text-muted-foreground\">\n            <div className=\"flex items-center justify-center w-10 h-10 rounded-full bg-chart-3/10\">\n              <CheckCircle className=\"h-5 w-5 text-chart-3\" />\n            </div>\n            <span className=\"text-sm font-medium\">{t(\"hero.trust2\")}</span>\n          </div>\n          <div className=\"flex items-center gap-2 text-muted-foreground\">\n            <div className=\"flex items-center justify-center w-10 h-10 rounded-full bg-chart-2/10\">\n              <Clock className=\"h-5 w-5 text-chart-2\" />\n            </div>\n            <span className=\"text-sm font-medium\">{t(\"hero.trust3\")}</span>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","size_bytes":4791},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"server/storage.ts":{"content":"import { \n  type User, type InsertUser, \n  type Technician, type InsertTechnician,\n  type TechnicianWithUser,\n  type Job, type InsertJob,\n  type Booking, type InsertBooking\n} from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\n\nexport interface IStorage {\n  // Users\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Technicians\n  getTechnician(id: string): Promise<Technician | undefined>;\n  getTechnicianByUserId(userId: string): Promise<Technician | undefined>;\n  getTechnicianWithUser(id: string): Promise<TechnicianWithUser | undefined>;\n  getAllTechnicians(): Promise<Technician[]>;\n  getAllTechniciansWithUsers(): Promise<TechnicianWithUser[]>;\n  getTechniciansByCity(city: string): Promise<TechnicianWithUser[]>;\n  getTechniciansByService(service: string): Promise<TechnicianWithUser[]>;\n  createTechnician(technician: InsertTechnician): Promise<Technician>;\n  updateTechnician(id: string, updates: Partial<Technician>): Promise<Technician | undefined>;\n  \n  // Jobs\n  getJob(id: string): Promise<Job | undefined>;\n  getAllJobs(): Promise<Job[]>;\n  getJobsByStatus(status: string): Promise<Job[]>;\n  createJob(job: InsertJob): Promise<Job>;\n  updateJob(id: string, updates: Partial<Job>): Promise<Job | undefined>;\n  \n  // Bookings\n  getBooking(id: string): Promise<Booking | undefined>;\n  getAllBookings(): Promise<Booking[]>;\n  getBookingsByTechnician(technicianId: string): Promise<Booking[]>;\n  getBookingsByJob(jobId: string): Promise<Booking[]>;\n  createBooking(booking: InsertBooking): Promise<Booking>;\n  updateBooking(id: string, updates: Partial<Booking>): Promise<Booking | undefined>;\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<string, User>;\n  private technicians: Map<string, Technician>;\n  private jobs: Map<string, Job>;\n  private bookings: Map<string, Booking>;\n\n  constructor() {\n    this.users = new Map();\n    this.technicians = new Map();\n    this.jobs = new Map();\n    this.bookings = new Map();\n    \n    // Seed with sample technicians for Morocco\n    this.seedTechnicians();\n  }\n\n  private seedTechnicians() {\n    const sampleData = [\n      {\n        user: { username: \"youssef_elfassi\", password: \"\", name: \"Youssef El Fassi\", phone: \"+212 600 000 000\", city: \"Casablanca\", role: \"technician\" },\n        tech: { \n          services: [\"plomberie\"], \n          skills: [\"Fuites\", \"Débouchage\", \"Installation sanitaire\"], \n          rating: 4.8, \n          reviewCount: 125, \n          completedJobs: 312, \n          responseTimeMinutes: 12, \n          completionRate: 0.98, \n          yearsExperience: 10, \n          hourlyRate: 150, \n          isVerified: true, \n          isAvailable: true, \n          isPro: true, \n          isPromo: true, \n          availability: \"Immédiat\",\n          certifications: [\"Plomberie Certifié\"],\n          latitude: 33.5731, \n          longitude: -7.5898, \n          bio: \"Expert en plomberie sanitaire avec 10 ans d'expérience. Intervention rapide et travail soigné garanti.\", \n          languages: [\"français\", \"arabe\"],\n          photo: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?fit=crop&w=400&h=400\",\n          email: \"youssef@example.com\",\n          recentReview: { author: \"Mohammed B.\", text: \"Excellent travail, très professionnel et ponctuel.\", rating: 5 }\n        }\n      },\n      {\n        user: { username: \"karim_bennani\", password: \"\", name: \"Karim Bennani\", phone: \"+212 611 222 333\", city: \"Marrakech\", role: \"technician\" },\n        tech: { \n          services: [\"electricite\"], \n          skills: [\"Installations\", \"Mise aux normes\", \"Dépannage\"], \n          rating: 4.7, \n          reviewCount: 210, \n          completedJobs: 445, \n          responseTimeMinutes: 15, \n          completionRate: 0.96, \n          yearsExperience: 12, \n          hourlyRate: 180, \n          isVerified: true, \n          isAvailable: true, \n          isPro: true, \n          isPromo: true, \n          availability: \"Immédiat\",\n          certifications: [\"Électricien Agréé\", \"Habilitation BR\"],\n          latitude: 31.6295, \n          longitude: -7.9811, \n          bio: \"Électricien certifié spécialisé dans les installations résidentielles et commerciales.\", \n          languages: [\"français\", \"arabe\", \"anglais\"],\n          photo: \"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?fit=crop&w=400&h=400\",\n          email: \"karim.bennani@email.com\",\n          recentReview: { author: \"Sara M.\", text: \"Travail impeccable et très réactif. Je recommande vivement.\", rating: 5 }\n        }\n      },\n      {\n        user: { username: \"fatima_alaoui\", password: \"\", name: \"Fatima Zahra Alaoui\", phone: \"+212 622 334 455\", city: \"Rabat\", role: \"technician\" },\n        tech: { \n          services: [\"peinture\"], \n          skills: [\"Peinture murale\", \"Décoration\", \"Enduit\"], \n          rating: 4.9, \n          reviewCount: 98, \n          completedJobs: 187, \n          responseTimeMinutes: 20, \n          completionRate: 0.99, \n          yearsExperience: 8, \n          hourlyRate: 120, \n          isVerified: true, \n          isAvailable: true, \n          isPro: true, \n          isPromo: false, \n          availability: \"Sur RDV\",\n          certifications: [\"Compagnon du Devoir\"],\n          latitude: 34.0209, \n          longitude: -6.8416, \n          bio: \"Artiste peintre passionnée, je transforme vos espaces avec soin et créativité. Spécialisée dans les finitions décoratives.\", \n          languages: [\"français\", \"arabe\"],\n          photo: \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?fit=crop&w=400&h=400\",\n          email: \"fatima.alaoui@email.com\",\n          recentReview: { author: \"Leila S.\", text: \"Fatima est une véritable artiste. Mon salon est transformé.\", rating: 5 }\n        }\n      },\n      {\n        user: { username: \"ahmed_benali\", password: \"\", name: \"Ahmed Benali\", phone: \"+212 661-123456\", city: \"Casablanca\", role: \"technician\" },\n        tech: { services: [\"plomberie\"], skills: [\"Réparation fuites\", \"Installation sanitaire\", \"Débouchage\"], rating: 4.9, reviewCount: 234, completedJobs: 512, responseTimeMinutes: 12, completionRate: 0.98, yearsExperience: 15, hourlyRate: 150, isVerified: true, isAvailable: true, isPro: true, isPromo: false, availability: \"Immédiat\", certifications: [], latitude: 33.5731, longitude: -7.5898, bio: \"Plombier expert avec 15 ans d'expérience.\", languages: [\"français\", \"arabe\"], photo: null, email: null, recentReview: null }\n      },\n      {\n        user: { username: \"mohamed_alami\", password: \"\", name: \"Mohamed Alami\", phone: \"+212 662-234567\", city: \"Casablanca\", role: \"technician\" },\n        tech: { services: [\"plomberie\", \"climatisation\"], skills: [\"Chauffe-eau\", \"Climatisation\", \"Plomberie générale\"], rating: 4.7, reviewCount: 156, completedJobs: 289, responseTimeMinutes: 18, completionRate: 0.95, yearsExperience: 8, hourlyRate: 120, isVerified: true, isAvailable: true, isPro: false, isPromo: true, availability: \"Immédiat\", certifications: [], latitude: 33.5892, longitude: -7.6033, bio: \"Technicien polyvalent.\", languages: [\"français\", \"arabe\", \"anglais\"], photo: null, email: null, recentReview: null }\n      },\n      {\n        user: { username: \"hassan_chraibi\", password: \"\", name: \"Hassan Chraibi\", phone: \"+212 665-567890\", city: \"Casablanca\", role: \"technician\" },\n        tech: { services: [\"menuiserie\"], skills: [\"Menuiserie bois\", \"Portes\", \"Fenêtres\"], rating: 4.9, reviewCount: 145, completedJobs: 298, responseTimeMinutes: 20, completionRate: 0.96, yearsExperience: 20, hourlyRate: 130, isVerified: true, isAvailable: false, isPro: true, isPromo: false, availability: \"Sur RDV\", certifications: [\"Maître Artisan\"], latitude: 33.5800, longitude: -7.5900, bio: \"Maître menuisier.\", languages: [\"français\", \"arabe\"], photo: null, email: null, recentReview: null }\n      },\n      {\n        user: { username: \"omar_berrada\", password: \"\", name: \"Omar Berrada\", phone: \"+212 666-678901\", city: \"Marrakech\", role: \"technician\" },\n        tech: { services: [\"plomberie\"], skills: [\"Plomberie traditionnelle\", \"Hammam\", \"Fontaines\"], rating: 4.5, reviewCount: 87, completedJobs: 156, responseTimeMinutes: 30, completionRate: 0.92, yearsExperience: 7, hourlyRate: 110, isVerified: true, isAvailable: true, isPro: false, isPromo: false, availability: \"Sur RDV\", certifications: [], latitude: 31.6295, longitude: -7.9811, bio: \"Spécialiste plomberie traditionnelle.\", languages: [\"français\", \"arabe\", \"anglais\"], photo: null, email: null, recentReview: null }\n      },\n      {\n        user: { username: \"rachid_elidrissi\", password: \"\", name: \"Rachid El Idrissi\", phone: \"+212 667-789012\", city: \"Casablanca\", role: \"technician\" },\n        tech: { services: [\"climatisation\"], skills: [\"Installation climatisation\", \"Maintenance\", \"Réparation\"], rating: 4.8, reviewCount: 112, completedJobs: 234, responseTimeMinutes: 22, completionRate: 0.97, yearsExperience: 9, hourlyRate: 160, isVerified: true, isAvailable: true, isPro: true, isPromo: true, availability: \"Immédiat\", certifications: [\"Frigoriste Certifié\"], latitude: 33.5700, longitude: -7.6100, bio: \"Technicien frigoriste certifié.\", languages: [\"français\", \"arabe\"], photo: null, email: null, recentReview: null }\n      },\n    ];\n\n    sampleData.forEach(({ user, tech }) => {\n      const userId = randomUUID();\n      const techId = randomUUID();\n      \n      const userRecord: User = { ...user, id: userId };\n      this.users.set(userId, userRecord);\n      \n      const techRecord: Technician = {\n        id: techId,\n        userId: userId,\n        services: tech.services,\n        skills: tech.skills,\n        bio: tech.bio || null,\n        photo: tech.photo || null,\n        rating: tech.rating,\n        reviewCount: tech.reviewCount,\n        completedJobs: tech.completedJobs,\n        responseTimeMinutes: tech.responseTimeMinutes,\n        completionRate: tech.completionRate,\n        yearsExperience: tech.yearsExperience,\n        hourlyRate: tech.hourlyRate,\n        isVerified: tech.isVerified,\n        isAvailable: tech.isAvailable,\n        isPro: tech.isPro,\n        isPromo: tech.isPromo,\n        availability: tech.availability,\n        certifications: tech.certifications,\n        latitude: tech.latitude || null,\n        longitude: tech.longitude || null,\n        languages: tech.languages,\n      };\n      \n      // Store extra fields for TechnicianWithUser\n      (techRecord as any)._email = tech.email || null;\n      (techRecord as any)._recentReview = tech.recentReview || null;\n      \n      this.technicians.set(techId, techRecord);\n    });\n  }\n\n  private mergeTechnicianWithUser(tech: Technician, user: User): TechnicianWithUser {\n    return {\n      id: tech.id,\n      userId: tech.userId,\n      name: user.name,\n      phone: user.phone,\n      email: (tech as any)._email || null,\n      city: user.city,\n      services: tech.services,\n      skills: tech.skills,\n      bio: tech.bio,\n      photo: tech.photo,\n      rating: tech.rating,\n      reviewCount: tech.reviewCount,\n      completedJobs: tech.completedJobs,\n      responseTimeMinutes: tech.responseTimeMinutes,\n      completionRate: tech.completionRate,\n      yearsExperience: tech.yearsExperience,\n      hourlyRate: tech.hourlyRate,\n      isVerified: tech.isVerified,\n      isAvailable: tech.isAvailable,\n      isPro: tech.isPro,\n      isPromo: tech.isPromo,\n      availability: tech.availability,\n      certifications: tech.certifications,\n      recentReview: (tech as any)._recentReview || null,\n      latitude: tech.latitude,\n      longitude: tech.longitude,\n      languages: tech.languages,\n    };\n  }\n\n  // Users\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.username === username,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const user: User = { \n      id,\n      username: insertUser.username,\n      password: insertUser.password,\n      role: insertUser.role ?? \"client\",\n      name: insertUser.name,\n      phone: insertUser.phone ?? null,\n      city: insertUser.city ?? null,\n    };\n    this.users.set(id, user);\n    return user;\n  }\n\n  // Technicians\n  async getTechnician(id: string): Promise<Technician | undefined> {\n    return this.technicians.get(id);\n  }\n\n  async getTechnicianByUserId(userId: string): Promise<Technician | undefined> {\n    return Array.from(this.technicians.values()).find(\n      (tech) => tech.userId === userId\n    );\n  }\n\n  async getTechnicianWithUser(id: string): Promise<TechnicianWithUser | undefined> {\n    const tech = this.technicians.get(id);\n    if (!tech) return undefined;\n    const user = this.users.get(tech.userId);\n    if (!user) return undefined;\n    return this.mergeTechnicianWithUser(tech, user);\n  }\n\n  async getAllTechnicians(): Promise<Technician[]> {\n    return Array.from(this.technicians.values());\n  }\n\n  async getAllTechniciansWithUsers(): Promise<TechnicianWithUser[]> {\n    const result: TechnicianWithUser[] = [];\n    const techs = Array.from(this.technicians.values());\n    for (const tech of techs) {\n      const user = this.users.get(tech.userId);\n      if (user) {\n        result.push(this.mergeTechnicianWithUser(tech, user));\n      }\n    }\n    return result;\n  }\n\n  async getTechniciansByCity(city: string): Promise<TechnicianWithUser[]> {\n    const result: TechnicianWithUser[] = [];\n    const techs = Array.from(this.technicians.values());\n    for (const tech of techs) {\n      const user = this.users.get(tech.userId);\n      if (user && user.city?.toLowerCase() === city.toLowerCase()) {\n        result.push(this.mergeTechnicianWithUser(tech, user));\n      }\n    }\n    return result;\n  }\n\n  async getTechniciansByService(service: string): Promise<TechnicianWithUser[]> {\n    const result: TechnicianWithUser[] = [];\n    const techs = Array.from(this.technicians.values());\n    for (const tech of techs) {\n      if (tech.services.includes(service.toLowerCase())) {\n        const user = this.users.get(tech.userId);\n        if (user) {\n          result.push(this.mergeTechnicianWithUser(tech, user));\n        }\n      }\n    }\n    return result;\n  }\n\n  async createTechnician(insertTechnician: InsertTechnician): Promise<Technician> {\n    const id = randomUUID();\n    const technician: Technician = {\n      id,\n      userId: insertTechnician.userId,\n      services: insertTechnician.services,\n      skills: insertTechnician.skills ?? [],\n      bio: insertTechnician.bio ?? null,\n      photo: insertTechnician.photo ?? null,\n      rating: insertTechnician.rating ?? 0,\n      reviewCount: insertTechnician.reviewCount ?? 0,\n      completedJobs: insertTechnician.completedJobs ?? 0,\n      responseTimeMinutes: insertTechnician.responseTimeMinutes ?? 30,\n      completionRate: insertTechnician.completionRate ?? 0.95,\n      yearsExperience: insertTechnician.yearsExperience ?? 1,\n      hourlyRate: insertTechnician.hourlyRate ?? 150,\n      isVerified: insertTechnician.isVerified ?? false,\n      isAvailable: insertTechnician.isAvailable ?? true,\n      latitude: insertTechnician.latitude ?? null,\n      longitude: insertTechnician.longitude ?? null,\n      languages: insertTechnician.languages ?? [\"français\", \"arabe\"],\n    };\n    this.technicians.set(id, technician);\n    return technician;\n  }\n\n  async updateTechnician(id: string, updates: Partial<Technician>): Promise<Technician | undefined> {\n    const existing = this.technicians.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, ...updates };\n    this.technicians.set(id, updated);\n    return updated;\n  }\n\n  // Jobs\n  async getJob(id: string): Promise<Job | undefined> {\n    return this.jobs.get(id);\n  }\n\n  async getAllJobs(): Promise<Job[]> {\n    return Array.from(this.jobs.values());\n  }\n\n  async getJobsByStatus(status: string): Promise<Job[]> {\n    return Array.from(this.jobs.values()).filter(\n      (job) => job.status === status\n    );\n  }\n\n  async createJob(insertJob: InsertJob): Promise<Job> {\n    const id = randomUUID();\n    const job: Job = { \n      id,\n      clientId: insertJob.clientId ?? null,\n      description: insertJob.description,\n      service: insertJob.service,\n      subServices: insertJob.subServices ?? null,\n      city: insertJob.city,\n      urgency: insertJob.urgency ?? \"normal\",\n      complexity: insertJob.complexity ?? \"moderate\",\n      estimatedDuration: insertJob.estimatedDuration ?? null,\n      minCost: insertJob.minCost ?? null,\n      maxCost: insertJob.maxCost ?? null,\n      likelyCost: insertJob.likelyCost ?? null,\n      confidence: insertJob.confidence ?? null,\n      status: insertJob.status ?? \"pending\",\n      createdAt: new Date(),\n      extractedKeywords: insertJob.extractedKeywords ?? null,\n      aiAnalysis: insertJob.aiAnalysis ?? null,\n    };\n    this.jobs.set(id, job);\n    return job;\n  }\n\n  async updateJob(id: string, updates: Partial<Job>): Promise<Job | undefined> {\n    const existing = this.jobs.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, ...updates };\n    this.jobs.set(id, updated);\n    return updated;\n  }\n\n  // Bookings\n  async getBooking(id: string): Promise<Booking | undefined> {\n    return this.bookings.get(id);\n  }\n\n  async getAllBookings(): Promise<Booking[]> {\n    return Array.from(this.bookings.values());\n  }\n\n  async getBookingsByTechnician(technicianId: string): Promise<Booking[]> {\n    return Array.from(this.bookings.values()).filter(\n      (booking) => booking.technicianId === technicianId\n    );\n  }\n\n  async getBookingsByJob(jobId: string): Promise<Booking[]> {\n    return Array.from(this.bookings.values()).filter(\n      (booking) => booking.jobId === jobId\n    );\n  }\n\n  async createBooking(insertBooking: InsertBooking): Promise<Booking> {\n    const id = randomUUID();\n    const booking: Booking = { \n      id,\n      jobId: insertBooking.jobId,\n      technicianId: insertBooking.technicianId,\n      clientName: insertBooking.clientName,\n      clientPhone: insertBooking.clientPhone,\n      scheduledDate: insertBooking.scheduledDate,\n      scheduledTime: insertBooking.scheduledTime,\n      status: insertBooking.status ?? \"pending\",\n      estimatedCost: insertBooking.estimatedCost ?? null,\n      finalCost: insertBooking.finalCost ?? null,\n      matchScore: insertBooking.matchScore ?? null,\n      matchExplanation: insertBooking.matchExplanation ?? null,\n      createdAt: new Date(),\n    };\n    this.bookings.set(id, booking);\n    return booking;\n  }\n\n  async updateBooking(id: string, updates: Partial<Booking>): Promise<Booking | undefined> {\n    const existing = this.bookings.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, ...updates };\n    this.bookings.set(id, updated);\n    return updated;\n  }\n}\n\nexport const storage = new MemStorage();\n","size_bytes":19043},"server/index-dev.ts":{"content":"import fs from \"node:fs\";\nimport path from \"node:path\";\nimport { type Server } from \"node:http\";\n\nimport { nanoid } from \"nanoid\";\nimport { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\n\nimport viteConfig from \"../vite.config\";\nimport runApp from \"./app\";\n\nexport async function setupVite(app: Express, server: Server) {\n  const viteLogger = createLogger();\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\n(async () => {\n  await runApp(setupVite);\n})();\n","size_bytes":1609},"client/src/pages/TechnicianDashboard.tsx":{"content":"import { useState } from \"react\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { \n  Wallet, \n  Clock, \n  Star, \n  CheckCircle, \n  MapPin, \n  Calendar,\n  AlertTriangle,\n  ChevronRight,\n  TrendingUp,\n  Users,\n  Zap,\n  Phone,\n  Loader2\n} from \"lucide-react\";\n\ninterface PendingJob {\n  id: string;\n  description: string;\n  service: string;\n  city: string;\n  urgency: string;\n  clientName: string;\n  estimatedCost: number;\n  distance: number;\n  matchScore: number;\n  createdAt: string;\n}\n\ninterface TechnicianStats {\n  totalEarnings: number;\n  pendingJobs: number;\n  completedJobs: number;\n  averageRating: number;\n  responseRate: number;\n  thisMonthEarnings: number;\n  lastMonthEarnings: number;\n}\n\nexport default function TechnicianDashboard() {\n  const { t } = useI18n();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [activeTab, setActiveTab] = useState(\"overview\");\n\n  // Fetch stats\n  const { data: stats, isLoading: statsLoading } = useQuery<TechnicianStats>({\n    queryKey: [\"/api/technician/stats\"],\n  });\n\n  // Fetch pending jobs\n  const { data: pendingJobs, isLoading: jobsLoading } = useQuery<PendingJob[]>({\n    queryKey: [\"/api/technician/pending-jobs\"],\n  });\n\n  // Accept job mutation\n  const acceptMutation = useMutation({\n    mutationFn: async (jobId: string) => {\n      return apiRequest(\"POST\", `/api/technician/jobs/${jobId}/accept`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/technician/pending-jobs\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/technician/stats\"] });\n      toast({\n        title: \"Travail accepté\",\n        description: \"Le client a été notifié.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: t(\"common.error\"),\n        description: \"Impossible d'accepter ce travail.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Decline job mutation\n  const declineMutation = useMutation({\n    mutationFn: async (jobId: string) => {\n      return apiRequest(\"POST\", `/api/technician/jobs/${jobId}/decline`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/technician/pending-jobs\"] });\n      toast({\n        title: \"Travail refusé\",\n        description: \"Ce travail a été retiré de votre liste.\",\n      });\n    },\n  });\n\n  const getUrgencyBadge = (urgency: string) => {\n    const colors: Record<string, string> = {\n      emergency: \"bg-red-500/10 text-red-500 border-red-500/20\",\n      high: \"bg-orange-500/10 text-orange-500 border-orange-500/20\",\n      normal: \"bg-blue-500/10 text-blue-500 border-blue-500/20\",\n      low: \"bg-green-500/10 text-green-500 border-green-500/20\",\n    };\n    const labels: Record<string, string> = {\n      emergency: \"Urgence\",\n      high: \"Urgent\",\n      normal: \"Normal\",\n      low: \"Pas pressé\",\n    };\n    return (\n      <Badge className={`${colors[urgency] || colors.normal} border`}>\n        {labels[urgency] || urgency}\n      </Badge>\n    );\n  };\n\n  const earningsGrowth = stats \n    ? ((stats.thisMonthEarnings - stats.lastMonthEarnings) / Math.max(stats.lastMonthEarnings, 1)) * 100\n    : 0;\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      <main className=\"flex-1 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4\">\n          {/* Page Header */}\n          <div className=\"flex items-center justify-between mb-8\">\n            <div>\n              <h1 className=\"text-3xl font-bold\">{t(\"tech.dashboard\")}</h1>\n              <p className=\"text-muted-foreground\">Gérez vos travaux et suivez vos revenus</p>\n            </div>\n            <Badge className=\"bg-green-500/10 text-green-500 border-green-500/20 border\">\n              <Zap className=\"h-3 w-3 mr-1\" />\n              En ligne\n            </Badge>\n          </div>\n\n          {/* Stats Grid */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-chart-2/10 flex items-center justify-center\">\n                  <Wallet className=\"h-6 w-6 text-chart-2\" />\n                </div>\n                {earningsGrowth !== 0 && (\n                  <Badge className={earningsGrowth > 0 \n                    ? \"bg-green-500/10 text-green-500\" \n                    : \"bg-red-500/10 text-red-500\"\n                  }>\n                    <TrendingUp className={`h-3 w-3 mr-1 ${earningsGrowth < 0 ? \"rotate-180\" : \"\"}`} />\n                    {earningsGrowth > 0 ? \"+\" : \"\"}{Math.round(earningsGrowth)}%\n                  </Badge>\n                )}\n              </div>\n              <div className=\"text-2xl font-bold mb-1\">\n                {statsLoading ? (\n                  <div className=\"h-8 w-24 bg-muted rounded animate-pulse\" />\n                ) : (\n                  <>{stats?.thisMonthEarnings?.toLocaleString() || 0} {t(\"common.mad\")}</>\n                )}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">{t(\"tech.earnings\")} ce mois</p>\n            </Card>\n\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-orange-500/10 flex items-center justify-center\">\n                  <Clock className=\"h-6 w-6 text-orange-500\" />\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold mb-1\">\n                {statsLoading ? (\n                  <div className=\"h-8 w-16 bg-muted rounded animate-pulse\" />\n                ) : (\n                  stats?.pendingJobs || 0\n                )}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">{t(\"tech.pendingJobs\")}</p>\n            </Card>\n\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-yellow-500/10 flex items-center justify-center\">\n                  <Star className=\"h-6 w-6 text-yellow-500\" />\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold mb-1 flex items-center gap-2\">\n                {statsLoading ? (\n                  <div className=\"h-8 w-16 bg-muted rounded animate-pulse\" />\n                ) : (\n                  <>\n                    {stats?.averageRating?.toFixed(1) || \"0.0\"}\n                    <Star className=\"h-5 w-5 text-yellow-500 fill-yellow-500\" />\n                  </>\n                )}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">{t(\"tech.rating\")}</p>\n            </Card>\n\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"w-12 h-12 rounded-xl bg-green-500/10 flex items-center justify-center\">\n                  <CheckCircle className=\"h-6 w-6 text-green-500\" />\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold mb-1\">\n                {statsLoading ? (\n                  <div className=\"h-8 w-16 bg-muted rounded animate-pulse\" />\n                ) : (\n                  stats?.completedJobs || 0\n                )}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">{t(\"tech.completedJobs\")}</p>\n            </Card>\n          </div>\n\n          {/* Main Content */}\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className=\"mb-6\">\n              <TabsTrigger value=\"overview\" data-testid=\"tab-overview\">\n                Vue d'ensemble\n              </TabsTrigger>\n              <TabsTrigger value=\"pending\" data-testid=\"tab-pending\">\n                Demandes ({pendingJobs?.length || 0})\n              </TabsTrigger>\n              <TabsTrigger value=\"history\" data-testid=\"tab-history\">\n                Historique\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"overview\">\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Response Rate */}\n                <Card className=\"p-6\">\n                  <h3 className=\"font-semibold mb-4 flex items-center gap-2\">\n                    <Users className=\"h-5 w-5 text-primary\" />\n                    Taux de réponse\n                  </h3>\n                  <div className=\"flex items-center gap-4 mb-4\">\n                    <div className=\"text-4xl font-bold text-primary\">\n                      {stats?.responseRate || 0}%\n                    </div>\n                    <Badge className=\"bg-green-500/10 text-green-500 border-green-500/20 border\">\n                      Excellent\n                    </Badge>\n                  </div>\n                  <Progress value={stats?.responseRate || 0} className=\"h-3 mb-2\" />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Un taux de réponse élevé améliore votre visibilité\n                  </p>\n                </Card>\n\n                {/* Recent Activity */}\n                <Card className=\"p-6\">\n                  <h3 className=\"font-semibold mb-4\">Activité récente</h3>\n                  {pendingJobs && pendingJobs.length > 0 ? (\n                    <div className=\"space-y-3\">\n                      {pendingJobs.slice(0, 3).map((job) => (\n                        <div \n                          key={job.id}\n                          className=\"flex items-center justify-between p-3 rounded-lg bg-muted/50 border border-border\"\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <Avatar className=\"h-10 w-10\">\n                              <AvatarFallback className=\"bg-primary/10 text-primary\">\n                                {job.clientName.charAt(0)}\n                              </AvatarFallback>\n                            </Avatar>\n                            <div>\n                              <p className=\"font-medium text-sm\">{job.clientName}</p>\n                              <p className=\"text-xs text-muted-foreground\">{job.service}</p>\n                            </div>\n                          </div>\n                          <ChevronRight className=\"h-5 w-5 text-muted-foreground\" />\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8 text-muted-foreground\">\n                      <Clock className=\"h-10 w-10 mx-auto mb-3 opacity-50\" />\n                      <p>Aucune activité récente</p>\n                    </div>\n                  )}\n                </Card>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"pending\">\n              <div className=\"space-y-4\">\n                {jobsLoading ? (\n                  <div className=\"space-y-4\">\n                    {[1, 2, 3].map((i) => (\n                      <Card key={i} className=\"p-6\">\n                        <div className=\"animate-pulse space-y-4\">\n                          <div className=\"h-6 bg-muted rounded w-1/3\" />\n                          <div className=\"h-4 bg-muted rounded w-2/3\" />\n                          <div className=\"h-10 bg-muted rounded w-1/4\" />\n                        </div>\n                      </Card>\n                    ))}\n                  </div>\n                ) : pendingJobs && pendingJobs.length > 0 ? (\n                  pendingJobs.map((job) => (\n                    <Card key={job.id} className=\"p-6\" data-testid={`card-pending-job-${job.id}`}>\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-3 mb-3\">\n                            <Badge variant=\"secondary\" className=\"font-medium\">\n                              {job.service}\n                            </Badge>\n                            {getUrgencyBadge(job.urgency)}\n                            <Badge className=\"bg-primary/10 text-primary border-primary/20 border\">\n                              {Math.round(job.matchScore * 100)}% Match\n                            </Badge>\n                          </div>\n\n                          <p className=\"text-lg mb-3\">{job.description}</p>\n\n                          <div className=\"flex flex-wrap items-center gap-4 text-sm text-muted-foreground mb-4\">\n                            <div className=\"flex items-center gap-1\">\n                              <MapPin className=\"h-4 w-4\" />\n                              {job.city} ({job.distance} km)\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <Calendar className=\"h-4 w-4\" />\n                              {new Date(job.createdAt).toLocaleDateString(\"fr-FR\")}\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <Phone className=\"h-4 w-4\" />\n                              {job.clientName}\n                            </div>\n                          </div>\n\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-2xl font-bold text-chart-2\">\n                              ~{job.estimatedCost} {t(\"common.mad\")}\n                            </span>\n                            <span className=\"text-sm text-muted-foreground\">estimé</span>\n                          </div>\n                        </div>\n\n                        <div className=\"flex flex-col gap-2 min-w-[120px]\">\n                          <Button\n                            onClick={() => acceptMutation.mutate(job.id)}\n                            disabled={acceptMutation.isPending}\n                            data-testid={`button-accept-${job.id}`}\n                          >\n                            {acceptMutation.isPending ? (\n                              <Loader2 className=\"h-4 w-4 animate-spin\" />\n                            ) : (\n                              t(\"tech.accept\")\n                            )}\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            onClick={() => declineMutation.mutate(job.id)}\n                            disabled={declineMutation.isPending}\n                            data-testid={`button-decline-${job.id}`}\n                          >\n                            {t(\"tech.decline\")}\n                          </Button>\n                        </div>\n                      </div>\n                    </Card>\n                  ))\n                ) : (\n                  <Card className=\"p-12 text-center\">\n                    <AlertTriangle className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                    <h3 className=\"text-lg font-semibold mb-2\">Aucune demande en attente</h3>\n                    <p className=\"text-muted-foreground\">\n                      Les nouvelles demandes apparaîtront ici automatiquement\n                    </p>\n                  </Card>\n                )}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"history\">\n              <Card className=\"p-12 text-center\">\n                <CheckCircle className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                <h3 className=\"text-lg font-semibold mb-2\">Historique des travaux</h3>\n                <p className=\"text-muted-foreground\">\n                  Vos travaux complétés apparaîtront ici\n                </p>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":16435},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/lib/auth.tsx":{"content":"import { createContext, useContext, useState, useEffect } from \"react\";\nimport { apiRequest } from \"./queryClient\";\n\nexport interface AuthUser {\n  id: string;\n  username: string;\n  name?: string;\n  role: \"client\" | \"technician\";\n}\n\ninterface TechnicianSignupData {\n  username: string;\n  password: string;\n  name: string;\n  phone: string;\n  city: string;\n  services: string[];\n  yearsExperience?: string;\n  hourlyRate?: string;\n  bio?: string;\n}\n\ninterface ClientSignupData {\n  username: string;\n  password: string;\n  name: string;\n  phone: string;\n  city: string;\n  businessName?: string;\n}\n\ninterface AuthContextType {\n  user: AuthUser | null;\n  isLoading: boolean;\n  login: (username: string, password: string) => Promise<void>;\n  signup: (username: string, password: string, name: string, role: \"client\" | \"technician\") => Promise<void>;\n  signupTechnician: (data: TechnicianSignupData) => Promise<void>;\n  signupClient: (data: ClientSignupData) => Promise<void>;\n  logout: () => Promise<void>;\n  isAuthenticated: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<AuthUser | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Check if user is already logged in on mount\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const res = await fetch(\"/api/auth/me\", { credentials: \"include\" });\n        if (res.ok) {\n          const userData = await res.json();\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error(\"Auth check failed:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  const login = async (username: string, password: string) => {\n    const res = await apiRequest(\"POST\", \"/api/auth/login\", { username, password });\n    const userData = await res.json();\n    setUser(userData);\n  };\n\n  const signup = async (username: string, password: string, name: string, role: \"client\" | \"technician\") => {\n    const res = await apiRequest(\"POST\", \"/api/auth/signup\", { username, password, name, role });\n    const userData = await res.json();\n    setUser(userData);\n  };\n\n  const signupTechnician = async (data: TechnicianSignupData) => {\n    const res = await apiRequest(\"POST\", \"/api/auth/signup\", { \n      ...data, \n      role: \"technician\" \n    });\n    const userData = await res.json();\n    setUser(userData);\n  };\n\n  const signupClient = async (data: ClientSignupData) => {\n    const res = await apiRequest(\"POST\", \"/api/auth/signup\", { \n      ...data, \n      role: \"client\" \n    });\n    const userData = await res.json();\n    setUser(userData);\n  };\n\n  const logout = async () => {\n    await apiRequest(\"POST\", \"/api/auth/logout\", {});\n    setUser(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, isLoading, login, signup, signupTechnician, signupClient, logout, isAuthenticated: !!user }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within AuthProvider\");\n  }\n  return context;\n}\n","size_bytes":3216},"server/auth.ts":{"content":"import { Express, Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport bcrypt from \"bcrypt\";\nimport { storage } from \"./storage\";\nimport { randomUUID } from \"crypto\";\n\nconst SALT_ROUNDS = 10;\n\ndeclare module \"express-session\" {\n  interface SessionData {\n    userId?: string;\n  }\n}\n\ndeclare global {\n  namespace Express {\n    interface Request {\n      userId?: string;\n      user?: any;\n    }\n  }\n}\n\nasync function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, SALT_ROUNDS);\n}\n\nasync function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\nexport function setupAuth(app: Express) {\n  // IMPORTANT: Middleware to load user MUST be registered BEFORE routes\n  app.use(async (req: Request, res: Response, next: NextFunction) => {\n    if (req.session?.userId) {\n      try {\n        const user = await storage.getUser(req.session.userId);\n        if (user) {\n          req.userId = user.id;\n          req.user = user;\n        }\n      } catch (error) {\n        console.error(\"Error loading user:\", error);\n      }\n    }\n    next();\n  });\n\n  // Get current user\n  app.get(\"/api/auth/me\", (req: Request, res: Response) => {\n    if (!req.userId) {\n      return res.status(401).json({ error: \"Not authenticated\" });\n    }\n    \n    const user = req.user;\n    res.json({\n      id: user.id,\n      username: user.username,\n      name: user.name,\n      role: user.role,\n    });\n  });\n\n  // Login\n  app.post(\"/api/auth/login\", async (req: Request, res: Response) => {\n    try {\n      const { username, password } = req.body;\n\n      if (!username || !password) {\n        return res.status(400).json({ error: \"Missing username or password\" });\n      }\n\n      const user = await storage.getUserByUsername(username);\n      if (!user) {\n        return res.status(401).json({ error: \"Invalid credentials\" });\n      }\n\n      const isValid = await verifyPassword(password, user.password);\n      if (!isValid) {\n        return res.status(401).json({ error: \"Invalid credentials\" });\n      }\n\n      // Set session\n      if (req.session) {\n        req.session.userId = user.id;\n      }\n\n      res.json({\n        id: user.id,\n        username: user.username,\n        name: user.name,\n        role: user.role,\n      });\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      res.status(500).json({ error: \"Login failed\" });\n    }\n  });\n\n  // Signup\n  app.post(\"/api/auth/signup\", async (req: Request, res: Response) => {\n    try {\n      const { username, password, name, role, phone, city, services, yearsExperience, hourlyRate, bio } = req.body;\n\n      if (!username || !password || !name || !role) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      if (role === \"technician\" && (!services || services.length === 0)) {\n        return res.status(400).json({ error: \"Technicians must select at least one service\" });\n      }\n\n      // Check if user exists\n      const existingUser = await storage.getUserByUsername(username);\n      if (existingUser) {\n        return res.status(409).json({ error: \"User already exists\" });\n      }\n\n      // Hash password with bcrypt\n      const hashedPassword = await hashPassword(password);\n\n      // Create user\n      const user = await storage.createUser({\n        username,\n        password: hashedPassword,\n        role,\n        name,\n        phone,\n        city,\n      });\n\n      // If technician, create professional profile\n      if (role === \"technician\") {\n        await storage.createTechnician({\n          userId: user.id,\n          services: services || [],\n          skills: [],\n          yearsExperience: parseInt(yearsExperience) || 1,\n          hourlyRate: parseInt(hourlyRate) || 150,\n          bio: bio || null,\n          isVerified: false,\n          isAvailable: true,\n        });\n      }\n\n      // Set session\n      if (req.session) {\n        req.session.userId = user.id;\n      }\n\n      res.status(201).json({\n        id: user.id,\n        username: user.username,\n        name: user.name,\n        role: user.role,\n      });\n    } catch (error) {\n      console.error(\"Signup error:\", error);\n      res.status(500).json({ error: \"Signup failed\" });\n    }\n  });\n\n  // Logout\n  app.post(\"/api/auth/logout\", (req: Request, res: Response) => {\n    if (req.session) {\n      req.session.destroy(() => {\n        res.json({ success: true });\n      });\n    } else {\n      res.json({ success: true });\n    }\n  });\n}\n","size_bytes":4528},"client/src/pages/Home.tsx":{"content":"import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Hero } from \"@/components/home/Hero\";\nimport { ServicesGrid } from \"@/components/home/ServicesGrid\";\nimport { HowItWorks } from \"@/components/home/HowItWorks\";\nimport { Stats } from \"@/components/home/Stats\";\n\nexport default function Home() {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <Header />\n      <main className=\"flex-1\">\n        <Hero />\n        <ServicesGrid />\n        <Stats />\n        <HowItWorks />\n      </main>\n      <Footer />\n    </div>\n  );\n}\n","size_bytes":599},"server/ai-service.ts":{"content":"import OpenAI from \"openai\";\nimport { GoogleGenAI } from \"@google/genai\";\nimport type { JobAnalysis, CostEstimate, TechnicianMatch, UpsellSuggestion, Technician } from \"@shared/schema\";\n\n// Check for API keys - gracefully degrade to rule-based analysis if not available\nconst hasOpenAIKey = !!process.env.OPENAI_API_KEY;\nconst hasGeminiKey = !!process.env.GEMINI_API_KEY;\n\n// the newest OpenAI model is \"gpt-5\" which was released August 7, 2025. do not change this unless explicitly requested by the user\nconst openai = hasOpenAIKey ? new OpenAI({ apiKey: process.env.OPENAI_API_KEY }) : null;\n\n// DON'T DELETE THIS COMMENT\n// Note that the newest Gemini model series is \"gemini-2.5-flash\"\n// do not change this unless explicitly requested by the user\nconst gemini = hasGeminiKey ? new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY! }) : null;\n\n// Log API key status on startup\nif (!hasOpenAIKey) console.log(\"AlloBricolage: OpenAI API key not configured - using rule-based analysis\");\nif (!hasGeminiKey) console.log(\"AlloBricolage: Gemini API key not configured - using default match explanations\");\n\n// Service mapping for NLP extraction\nconst SERVICE_KEYWORDS: Record<string, string[]> = {\n  plomberie: [\"plombier\", \"plomberie\", \"fuite\", \"eau\", \"robinet\", \"tuyau\", \"évier\", \"wc\", \"toilette\", \"chauffe-eau\", \"canalisation\", \"سباكة\", \"ماء\", \"تسرب\"],\n  electricite: [\"électricien\", \"électricité\", \"prise\", \"interrupteur\", \"tableau\", \"câble\", \"disjoncteur\", \"éclairage\", \"كهرباء\", \"كهربائي\"],\n  peinture: [\"peintre\", \"peinture\", \"peindre\", \"mur\", \"plafond\", \"enduit\", \"دهان\", \"طلاء\"],\n  menuiserie: [\"menuisier\", \"menuiserie\", \"bois\", \"porte\", \"fenêtre\", \"meuble\", \"placard\", \"نجارة\", \"خشب\"],\n  climatisation: [\"climatisation\", \"clim\", \"climatiseur\", \"ventilation\", \"chauffage\", \"تكييف\", \"مكيف\"],\n  maconnerie: [\"maçon\", \"maçonnerie\", \"mur\", \"béton\", \"brique\", \"construction\", \"بناء\"],\n  carrelage: [\"carrelage\", \"carreleur\", \"zellige\", \"mosaïque\", \"sol\", \"بلاط\"],\n  serrurerie: [\"serrurier\", \"serrure\", \"clé\", \"porte\", \"قفل\", \"أقفال\"],\n  jardinage: [\"jardinier\", \"jardin\", \"plante\", \"pelouse\", \"taille\", \"حديقة\"],\n  nettoyage: [\"nettoyage\", \"ménage\", \"nettoyer\", \"تنظيف\"],\n};\n\nconst URGENCY_KEYWORDS: Record<string, string[]> = {\n  emergency: [\"urgence\", \"urgent\", \"immédiat\", \"maintenant\", \"catastrophe\", \"inondation\", \"طوارئ\", \"عاجل\"],\n  high: [\"rapidement\", \"vite\", \"bientôt\", \"pressé\", \"سريع\"],\n  normal: [\"normal\", \"quand possible\", \"عادي\"],\n  low: [\"pas pressé\", \"pas urgent\", \"planifier\", \"غير مستعجل\"],\n};\n\nconst COMPLEXITY_KEYWORDS: Record<string, string[]> = {\n  complex: [\"rénovation\", \"installation complète\", \"remplacement total\", \"câblage complet\", \"معقد\"],\n  moderate: [\"réparation\", \"remplacement\", \"إصلاح\"],\n  simple: [\"petit\", \"simple\", \"rapide\", \"facile\", \"بسيط\"],\n};\n\nexport async function analyzeJobDescription(description: string, city: string, urgency: string): Promise<JobAnalysis> {\n  // If OpenAI is not configured, use rule-based analysis\n  if (!openai) {\n    return {\n      service: detectService(description),\n      subServices: extractSubServices(description),\n      urgency: urgency,\n      complexity: detectComplexity(description),\n      estimatedDuration: estimateDuration(detectComplexity(description)),\n      extractedKeywords: extractKeywords(description),\n      confidence: 0.8,\n      language: detectLanguage(description),\n    };\n  }\n\n  try {\n    // First, try with OpenAI for intent extraction\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: `You are an AI assistant for AlloBricolage, a Moroccan handyman marketplace. Analyze job descriptions in French or Arabic and extract structured information.\n\nAvailable services: plomberie, electricite, peinture, menuiserie, climatisation, maconnerie, carrelage, serrurerie, jardinage, nettoyage\n\nReturn JSON with this exact structure:\n{\n  \"service\": \"main service category\",\n  \"subServices\": [\"specific issues or tasks\"],\n  \"urgency\": \"low|normal|high|emergency\",\n  \"complexity\": \"simple|moderate|complex\",\n  \"estimatedDuration\": \"time estimate in French\",\n  \"extractedKeywords\": [\"relevant keywords\"],\n  \"confidence\": 0.0 to 1.0,\n  \"language\": \"fr|ar|en\"\n}`\n        },\n        {\n          role: \"user\",\n          content: `Analyze this job request from ${city}:\\n\\n\"${description}\"\\n\\nUser-selected urgency: ${urgency}`\n        }\n      ],\n      response_format: { type: \"json_object\" },\n      max_completion_tokens: 1024,\n    });\n\n    const result = JSON.parse(response.choices[0].message.content || \"{}\");\n    \n    return {\n      service: result.service || detectService(description),\n      subServices: result.subServices || [],\n      urgency: result.urgency || urgency,\n      complexity: result.complexity || detectComplexity(description),\n      estimatedDuration: result.estimatedDuration || \"1-2 heures\",\n      extractedKeywords: result.extractedKeywords || [],\n      confidence: result.confidence || 0.85,\n      language: result.language || \"fr\",\n    };\n  } catch (error) {\n    console.error(\"OpenAI analysis failed, using fallback:\", error);\n    // Fallback to rule-based analysis\n    return {\n      service: detectService(description),\n      subServices: [],\n      urgency: urgency,\n      complexity: detectComplexity(description),\n      estimatedDuration: \"1-2 heures\",\n      extractedKeywords: extractKeywords(description),\n      confidence: 0.7,\n      language: detectLanguage(description),\n    };\n  }\n}\n\nexport async function estimateCost(\n  description: string, \n  service: string, \n  city: string, \n  urgency: string, \n  complexity: string\n): Promise<CostEstimate> {\n  // Base rates by service (in MAD)\n  const baseRates: Record<string, number> = {\n    plomberie: 200,\n    electricite: 180,\n    peinture: 150,\n    menuiserie: 220,\n    climatisation: 250,\n    maconnerie: 200,\n    carrelage: 180,\n    serrurerie: 150,\n    jardinage: 120,\n    nettoyage: 100,\n  };\n\n  // City multipliers\n  const cityMultipliers: Record<string, number> = {\n    Casablanca: 1.2,\n    Rabat: 1.15,\n    Marrakech: 1.1,\n    Fès: 1.0,\n    Tanger: 1.1,\n    Agadir: 1.05,\n    default: 1.0,\n  };\n\n  // Urgency premiums\n  const urgencyPremiums: Record<string, number> = {\n    emergency: 50,\n    high: 30,\n    normal: 0,\n    low: -10,\n  };\n\n  // Complexity premiums\n  const complexityPremiums: Record<string, number> = {\n    complex: 100,\n    moderate: 30,\n    simple: 0,\n  };\n\n  // Time-based premium\n  const hour = new Date().getHours();\n  const timePremium = (hour < 8 || hour > 18) ? 40 : 0;\n\n  const baseRate = baseRates[service] || 180;\n  const cityMultiplier = cityMultipliers[city] || cityMultipliers.default;\n  const urgencyPremium = urgencyPremiums[urgency] || 0;\n  const complexityPremium = complexityPremiums[complexity] || 0;\n\n  const adjustedBase = Math.round(baseRate * cityMultiplier);\n  const likelyCost = adjustedBase + urgencyPremium + timePremium + complexityPremium;\n  const minCost = Math.round(likelyCost * 0.8);\n  const maxCost = Math.round(likelyCost * 1.3);\n\n  // Calculate confidence based on how much info we have\n  const confidence = 0.75 + (description.length > 50 ? 0.1 : 0) + (complexity !== \"moderate\" ? 0.05 : 0);\n\n  return {\n    minCost,\n    likelyCost,\n    maxCost,\n    confidence: Math.min(confidence, 0.95),\n    breakdown: {\n      baseRate: adjustedBase,\n      urgencyPremium,\n      timePremium,\n      complexityPremium,\n      demandPremium: 0,\n    },\n    explanation: `Estimation basée sur le service ${service} à ${city}. ${urgency === \"emergency\" ? \"Prime d'urgence appliquée.\" : \"\"} ${timePremium > 0 ? \"Prime horaire (hors heures normales).\" : \"\"}`,\n  };\n}\n\nexport async function matchTechnicians(\n  technicians: Technician[],\n  description: string,\n  service: string,\n  city: string,\n  urgency: string,\n  costEstimate: CostEstimate\n): Promise<TechnicianMatch[]> {\n  const matches: TechnicianMatch[] = [];\n  const descriptionLower = description.toLowerCase();\n\n  for (const tech of technicians) {\n    // Filter by city and service\n    if (tech.city.toLowerCase() !== city.toLowerCase()) continue;\n    if (!tech.services.includes(service)) continue;\n\n    // Calculate match factors\n    const specializationMatch = calculateSpecializationScore(tech, service, descriptionLower);\n    const locationScore = 0.9; // Simplified - same city\n    const availabilityScore = tech.isAvailable ? 1.0 : 0.5;\n    const responseTimeScore = Math.max(0, 1 - (tech.responseTimeMinutes / 60));\n    const completionRateScore = tech.completionRate;\n    const ratingScore = tech.rating / 5;\n    const priceScore = calculatePriceScore(tech.hourlyRate, costEstimate.likelyCost);\n\n    // Weighted combination (XGBoost-style)\n    const matchScore = \n      specializationMatch * 0.25 +\n      locationScore * 0.15 +\n      availabilityScore * 0.15 +\n      responseTimeScore * 0.1 +\n      completionRateScore * 0.15 +\n      ratingScore * 0.15 +\n      priceScore * 0.05;\n\n    // Only include good matches\n    if (matchScore < 0.5) continue;\n\n    // Calculate personalized cost estimate for this technician\n    const techCostAdjustment = (tech.hourlyRate - 150) / 150;\n    const techCostEstimate: CostEstimate = {\n      ...costEstimate,\n      minCost: Math.round(costEstimate.minCost * (1 + techCostAdjustment * 0.5)),\n      likelyCost: Math.round(costEstimate.likelyCost * (1 + techCostAdjustment * 0.5)),\n      maxCost: Math.round(costEstimate.maxCost * (1 + techCostAdjustment * 0.5)),\n    };\n\n    // Calculate ETA\n    const etaMinutes = tech.responseTimeMinutes + Math.floor(Math.random() * 20) + 10;\n\n    matches.push({\n      technician: tech,\n      matchScore,\n      explanation: await generateMatchExplanation(tech, matchScore, service, descriptionLower),\n      etaMinutes,\n      estimatedCost: techCostEstimate,\n      factors: {\n        specializationMatch,\n        locationScore,\n        availabilityScore,\n        responseTimeScore,\n        completionRateScore,\n        ratingScore,\n        priceScore,\n      },\n    });\n  }\n\n  // Sort by match score descending\n  matches.sort((a, b) => b.matchScore - a.matchScore);\n\n  // Return top 5 matches\n  return matches.slice(0, 5);\n}\n\nasync function generateMatchExplanation(\n  tech: Technician,\n  score: number,\n  service: string,\n  description: string\n): Promise<string> {\n  // If Gemini is not configured, use default explanation\n  if (!gemini) {\n    return getDefaultExplanation(tech, score);\n  }\n\n  try {\n    const response = await gemini.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      contents: `Generate a brief explanation in French (2-3 sentences) for why ${tech.name} is a ${Math.round(score * 100)}% match for a ${service} job. \n      \nTech info:\n- Rating: ${tech.rating}/5 (${tech.reviewCount} reviews)\n- ${tech.completedJobs} jobs completed\n- ${tech.yearsExperience} years experience\n- Skills: ${tech.skills.join(\", \")}\n- Available: ${tech.isAvailable ? \"Yes\" : \"No\"}\n\nBe concise and focus on the most relevant qualifications.`,\n    });\n\n    return response.text || getDefaultExplanation(tech, score);\n  } catch (error) {\n    console.error(\"Gemini explanation failed:\", error);\n    return getDefaultExplanation(tech, score);\n  }\n}\n\nfunction getDefaultExplanation(tech: Technician, score: number): string {\n  return `${tech.name} est un match à ${Math.round(score * 100)}% grâce à ${tech.yearsExperience} ans d'expérience et une note de ${tech.rating}/5 (${tech.reviewCount} avis). ${tech.isAvailable ? \"Disponible maintenant.\" : \"\"}`;\n}\n\nexport function generateUpsellSuggestions(service: string): UpsellSuggestion[] {\n  const upsellMap: Record<string, UpsellSuggestion[]> = {\n    plomberie: [\n      {\n        service: \"Inspection plomberie complète\",\n        description: \"Vérification de toutes les installations\",\n        probability: 0.6,\n        discount: 15,\n        reason: \"Souvent demandé après une réparation\",\n      },\n      {\n        service: \"Remplacement joints\",\n        description: \"Prévention des futures fuites\",\n        probability: 0.45,\n        discount: 10,\n        reason: \"Maintenance préventive recommandée\",\n      },\n    ],\n    electricite: [\n      {\n        service: \"Vérification tableau électrique\",\n        description: \"Diagnostic complet de sécurité\",\n        probability: 0.55,\n        discount: 20,\n        reason: \"Important pour la sécurité\",\n      },\n      {\n        service: \"Installation prises USB\",\n        description: \"Prises modernes avec ports USB\",\n        probability: 0.35,\n        discount: 15,\n        reason: \"Amélioration pratique\",\n      },\n    ],\n    peinture: [\n      {\n        service: \"Réparation murs\",\n        description: \"Rebouchage fissures et trous\",\n        probability: 0.5,\n        discount: 10,\n        reason: \"Préparation optimale\",\n      },\n    ],\n    climatisation: [\n      {\n        service: \"Entretien annuel\",\n        description: \"Nettoyage et maintenance préventive\",\n        probability: 0.7,\n        discount: 25,\n        reason: \"Prolonge la durée de vie\",\n      },\n    ],\n  };\n\n  return upsellMap[service] || [];\n}\n\n// Helper functions\nfunction detectService(description: string): string {\n  const lower = description.toLowerCase();\n  for (const [service, keywords] of Object.entries(SERVICE_KEYWORDS)) {\n    if (keywords.some(kw => lower.includes(kw))) {\n      return service;\n    }\n  }\n  return \"plomberie\"; // Default\n}\n\nfunction detectComplexity(description: string): string {\n  const lower = description.toLowerCase();\n  for (const [complexity, keywords] of Object.entries(COMPLEXITY_KEYWORDS)) {\n    if (keywords.some(kw => lower.includes(kw))) {\n      return complexity;\n    }\n  }\n  return \"moderate\";\n}\n\nfunction extractKeywords(description: string): string[] {\n  const words = description.toLowerCase().split(/\\s+/);\n  const allKeywords = Object.values(SERVICE_KEYWORDS).flat();\n  return words.filter(w => allKeywords.includes(w)).slice(0, 5);\n}\n\nfunction detectLanguage(description: string): \"fr\" | \"ar\" | \"en\" {\n  // Simple Arabic detection\n  if (/[\\u0600-\\u06FF]/.test(description)) return \"ar\";\n  // Simple English detection\n  if (/\\b(the|and|or|is|are|have|has)\\b/i.test(description)) return \"en\";\n  return \"fr\";\n}\n\nfunction calculateSpecializationScore(tech: Technician, service: string, description: string): number {\n  let score = 0.7; // Base score for matching service\n  \n  // Bonus for relevant skills mentioned in description\n  for (const skill of tech.skills) {\n    if (description.includes(skill.toLowerCase())) {\n      score += 0.1;\n    }\n  }\n  \n  // Experience bonus\n  score += Math.min(tech.yearsExperience / 20, 0.15);\n  \n  return Math.min(score, 1.0);\n}\n\nfunction calculatePriceScore(hourlyRate: number, estimatedCost: number): number {\n  // Higher score for more affordable technicians\n  const avgRate = 150;\n  const diff = (avgRate - hourlyRate) / avgRate;\n  return Math.max(0.5, Math.min(1.0, 0.75 + diff * 0.5));\n}\n\nfunction extractSubServices(description: string): string[] {\n  const subServices: string[] = [];\n  const lower = description.toLowerCase();\n  \n  // Common sub-service keywords\n  const subServiceMap: Record<string, string[]> = {\n    \"Fuite d'eau\": [\"fuite\", \"coule\", \"goutte\"],\n    \"Débouchage\": [\"bouché\", \"bouchée\", \"déboucher\"],\n    \"Installation\": [\"installer\", \"installation\", \"poser\"],\n    \"Réparation\": [\"réparer\", \"réparation\", \"cassé\", \"cassée\"],\n    \"Remplacement\": [\"remplacer\", \"changer\", \"remplacement\"],\n    \"Entretien\": [\"entretien\", \"maintenance\", \"nettoyer\"],\n  };\n  \n  for (const [service, keywords] of Object.entries(subServiceMap)) {\n    if (keywords.some(kw => lower.includes(kw))) {\n      subServices.push(service);\n    }\n  }\n  \n  return subServices.slice(0, 3);\n}\n\nfunction estimateDuration(complexity: string): string {\n  switch (complexity) {\n    case \"simple\": return \"30 min - 1 heure\";\n    case \"complex\": return \"3-5 heures\";\n    default: return \"1-2 heures\";\n  }\n}\n\n// DarijaChat - AI-powered customer support in Moroccan Darija\nexport async function darijaChat(\n  message: string, \n  history: Array<{ role: string; content: string }>\n): Promise<string> {\n  // Common Darija responses for fallback\n  const darijaResponses = [\n    \"Salam! Ana hna bach n3awnek. Chouf, ila 3ndek chi mochkil f dar dyalek, kayna techniciens zwinin 3ndna.\",\n    \"Ahlan! Kifach nqdr n3awnek lyoum? 3ndna plombier, khrba2i, w bzaf d services khra.\",\n    \"Mrhba bik! Gol lia chno kayn w ghadi n3awnek tlqa technicien mezyan.\",\n  ];\n\n  // If no AI is available, use fallback responses\n  if (!openai && !gemini) {\n    const randomIndex = Math.floor(Math.random() * darijaResponses.length);\n    return darijaResponses[randomIndex];\n  }\n\n  try {\n    // Use OpenAI if available\n    if (openai) {\n      const response = await openai.chat.completions.create({\n        model: \"gpt-5\",\n        messages: [\n          {\n            role: \"system\",\n            content: `You are a friendly customer support assistant for AlloBricolage, a Moroccan handyman marketplace.\n\nIMPORTANT RULES:\n1. Always respond in Moroccan Darija (using Latin script like \"Salam, kifach nqdr n3awnek?\")\n2. Be warm, helpful, and professional\n3. Guide users to find technicians for their home repair needs\n4. Available services: plomberie (plumber), electricite (electrician), peinture (painter), menuiserie (carpenter), climatisation (AC), maconnerie (mason), carrelage (tiles), serrurerie (locksmith), jardinage (gardener), nettoyage (cleaning)\n5. Moroccan cities we serve: Casablanca, Rabat, Marrakech, Fes, Tanger, Agadir, Meknes, Oujda, Kenitra, Tetouan\n6. Keep responses concise and helpful\n7. Use common Darija phrases like: Salam, Mrhba, Ana hna bach n3awnek, Wakha, La bsa, Chokran\n\nExample phrases:\n- \"Salam! Kifach nqdr n3awnek lyoum?\"\n- \"Ana ghadi n3awnek tlqa technicien mezyan.\"\n- \"Gol lia chno kayn f dar dyalek w ghadi nchouf lk chi had.\"\n- \"Wakha, daba ghadi nchouf lk acher techniciens 3ndna.\"`\n          },\n          ...history.map(h => ({\n            role: h.role as \"user\" | \"assistant\",\n            content: h.content\n          })),\n          {\n            role: \"user\",\n            content: message\n          }\n        ],\n        max_completion_tokens: 256,\n      });\n\n      return response.choices[0].message.content || darijaResponses[0];\n    }\n\n    // Use Gemini as fallback\n    if (gemini) {\n      const historyContext = history.map(h => `${h.role}: ${h.content}`).join(\"\\n\");\n      \n      const response = await gemini.models.generateContent({\n        model: \"gemini-2.5-flash\",\n        contents: `You are a customer support assistant for AlloBricolage, a Moroccan handyman marketplace.\n        \nAlways respond in Moroccan Darija (Latin script). Be helpful and friendly.\n\nPrevious conversation:\n${historyContext}\n\nUser: ${message}\n\nRespond in Darija:`,\n      });\n\n      return response.text || darijaResponses[0];\n    }\n\n  } catch (error) {\n    console.error(\"DarijaChat AI error:\", error);\n  }\n\n  // Fallback response\n  return darijaResponses[Math.floor(Math.random() * darijaResponses.length)];\n}\n","size_bytes":19162},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/job/CostEstimateCard.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useI18n } from \"@/lib/i18n\";\nimport { \n  Banknote, \n  TrendingDown, \n  TrendingUp, \n  Info,\n  ChevronDown,\n  ChevronUp\n} from \"lucide-react\";\nimport { useState } from \"react\";\nimport type { CostEstimate } from \"@shared/schema\";\n\ninterface CostEstimateCardProps {\n  estimate: CostEstimate | null;\n  isLoading?: boolean;\n}\n\nexport function CostEstimateCard({ estimate, isLoading }: CostEstimateCardProps) {\n  const { t } = useI18n();\n  const [showBreakdown, setShowBreakdown] = useState(false);\n\n  if (isLoading) {\n    return (\n      <Card className=\"p-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-chart-2/10\">\n            <Banknote className=\"h-5 w-5 text-chart-2 animate-pulse\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold\">Calcul du prix</h3>\n            <p className=\"text-sm text-muted-foreground\">Estimation en cours...</p>\n          </div>\n        </div>\n        <div className=\"space-y-3\">\n          <div className=\"h-8 bg-muted rounded animate-pulse\" />\n          <div className=\"h-4 bg-muted rounded animate-pulse w-3/4\" />\n        </div>\n      </Card>\n    );\n  }\n\n  if (!estimate) {\n    return null;\n  }\n\n  const marketComparison = ((estimate.likelyCost - 300) / 300) * 100;\n  const isBelowMarket = marketComparison < 0;\n\n  return (\n    <Card className=\"p-6 border-chart-2/20 bg-chart-2/5\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-chart-2/10\">\n          <Banknote className=\"h-5 w-5 text-chart-2\" />\n        </div>\n        <div>\n          <h3 className=\"font-semibold\">{t(\"match.estimatedCost\")}</h3>\n          <p className=\"text-sm text-muted-foreground\">Estimation IA dynamique</p>\n        </div>\n      </div>\n\n      {/* Main Price Display */}\n      <div className=\"text-center mb-6\">\n        <div className=\"text-4xl font-bold text-chart-2 mb-2\">\n          {estimate.likelyCost} <span className=\"text-xl\">{t(\"common.mad\")}</span>\n        </div>\n        <div className=\"text-sm text-muted-foreground\">\n          Fourchette: {estimate.minCost} - {estimate.maxCost} {t(\"common.mad\")}\n        </div>\n      </div>\n\n      {/* Confidence Bar */}\n      <div className=\"mb-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <span className=\"text-sm text-muted-foreground\">{t(\"price.confidence\")}</span>\n          <span className=\"text-sm font-medium\">{Math.round(estimate.confidence * 100)}%</span>\n        </div>\n        <Progress value={estimate.confidence * 100} className=\"h-2\" />\n      </div>\n\n      {/* Market Comparison */}\n      <div className=\"flex items-center justify-center gap-2 mb-4\">\n        {isBelowMarket ? (\n          <>\n            <TrendingDown className=\"h-4 w-4 text-green-500\" />\n            <Badge className=\"bg-green-500/10 text-green-500 border-green-500/20 border\">\n              {Math.abs(Math.round(marketComparison))}% {t(\"price.belowMarket\")}\n            </Badge>\n          </>\n        ) : (\n          <>\n            <TrendingUp className=\"h-4 w-4 text-orange-500\" />\n            <Badge className=\"bg-orange-500/10 text-orange-500 border-orange-500/20 border\">\n              {Math.round(marketComparison)}% {t(\"price.aboveMarket\")}\n            </Badge>\n          </>\n        )}\n      </div>\n\n      {/* Breakdown Toggle */}\n      <button\n        onClick={() => setShowBreakdown(!showBreakdown)}\n        className=\"w-full flex items-center justify-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors py-2\"\n        data-testid=\"button-price-breakdown\"\n      >\n        <Info className=\"h-4 w-4\" />\n        {t(\"price.breakdown\")}\n        {showBreakdown ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\n      </button>\n\n      {/* Breakdown Details */}\n      {showBreakdown && (\n        <div className=\"mt-4 pt-4 border-t border-border space-y-3\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <span className=\"text-muted-foreground\">{t(\"price.base\")}</span>\n            <span className=\"font-medium\">{estimate.breakdown.baseRate} {t(\"common.mad\")}</span>\n          </div>\n          {estimate.breakdown.urgencyPremium > 0 && (\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-muted-foreground\">{t(\"price.urgency\")}</span>\n              <span className=\"font-medium text-orange-500\">\n                +{estimate.breakdown.urgencyPremium} {t(\"common.mad\")}\n              </span>\n            </div>\n          )}\n          {estimate.breakdown.timePremium > 0 && (\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-muted-foreground\">{t(\"price.time\")}</span>\n              <span className=\"font-medium text-orange-500\">\n                +{estimate.breakdown.timePremium} {t(\"common.mad\")}\n              </span>\n            </div>\n          )}\n          {estimate.breakdown.complexityPremium > 0 && (\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-muted-foreground\">{t(\"price.complexity\")}</span>\n              <span className=\"font-medium text-orange-500\">\n                +{estimate.breakdown.complexityPremium} {t(\"common.mad\")}\n              </span>\n            </div>\n          )}\n          \n          <div className=\"pt-3 border-t border-border\">\n            <p className=\"text-xs text-muted-foreground italic\">\n              {estimate.explanation}\n            </p>\n          </div>\n        </div>\n      )}\n    </Card>\n  );\n}\n","size_bytes":5826},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport session from \"express-session\";\nimport MemoryStore from \"memorystore\";\nimport { storage } from \"./storage\";\nimport { setupAuth } from \"./auth\";\nimport { \n  analyzeJobDescription, \n  estimateCost, \n  matchTechnicians,\n  generateUpsellSuggestions\n} from \"./ai-service\";\nimport { insertJobSchema, insertBookingSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\n\nconst MemoryStoreSession = MemoryStore(session);\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  \n  // Setup session middleware\n  app.use(session({\n    secret: process.env.SESSION_SECRET || \"allobricolage-secret-key-2024\",\n    resave: false,\n    saveUninitialized: false,\n    store: new MemoryStoreSession({\n      checkPeriod: 86400000 // prune expired entries every 24h\n    }),\n    cookie: {\n      secure: process.env.NODE_ENV === \"production\",\n      httpOnly: true,\n      maxAge: 24 * 60 * 60 * 1000 // 24 hours\n    }\n  }));\n\n  // Setup authentication routes\n  setupAuth(app);\n  \n  // ==================== JOB ROUTES ====================\n  \n  // Analyze job description with AI\n  app.post(\"/api/jobs/analyze\", async (req, res) => {\n    try {\n      const { description, city, urgency } = req.body;\n      \n      if (!description || !city) {\n        return res.status(400).json({ error: \"Description and city are required\" });\n      }\n\n      const analysis = await analyzeJobDescription(description, city, urgency || \"normal\");\n      const costEstimate = await estimateCost(\n        description,\n        analysis.service,\n        city,\n        analysis.urgency,\n        analysis.complexity\n      );\n\n      res.json({ analysis, costEstimate });\n    } catch (error) {\n      console.error(\"Job analysis error:\", error);\n      res.status(500).json({ error: \"Failed to analyze job\" });\n    }\n  });\n\n  // Create job and find matches\n  app.post(\"/api/jobs\", async (req, res) => {\n    try {\n      const { description, city, urgency, analysis } = req.body;\n      \n      if (!description || !city || !analysis) {\n        return res.status(400).json({ error: \"Description, city, and analysis are required\" });\n      }\n\n      // Get cost estimate\n      const costEstimate = await estimateCost(\n        description,\n        analysis.service,\n        city,\n        urgency || analysis.urgency,\n        analysis.complexity\n      );\n\n      // Create job\n      const job = await storage.createJob({\n        description,\n        service: analysis.service,\n        subServices: analysis.subServices,\n        city,\n        urgency: urgency || analysis.urgency,\n        complexity: analysis.complexity,\n        estimatedDuration: analysis.estimatedDuration,\n        minCost: costEstimate.minCost,\n        maxCost: costEstimate.maxCost,\n        likelyCost: costEstimate.likelyCost,\n        confidence: costEstimate.confidence,\n        status: \"pending\",\n        extractedKeywords: analysis.extractedKeywords,\n        aiAnalysis: analysis,\n      });\n\n      // Get all technicians and match\n      const allTechnicians = await storage.getAllTechnicians();\n      const matches = await matchTechnicians(\n        allTechnicians,\n        description,\n        analysis.service,\n        city,\n        urgency || analysis.urgency,\n        costEstimate\n      );\n\n      // Get upsell suggestions\n      const upsellSuggestions = generateUpsellSuggestions(analysis.service);\n\n      res.json({ \n        job, \n        matches, \n        costEstimate,\n        upsellSuggestions \n      });\n    } catch (error) {\n      console.error(\"Create job error:\", error);\n      res.status(500).json({ error: \"Failed to create job\" });\n    }\n  });\n\n  // Get job by ID\n  app.get(\"/api/jobs/:id\", async (req, res) => {\n    try {\n      const job = await storage.getJob(req.params.id);\n      if (!job) {\n        return res.status(404).json({ error: \"Job not found\" });\n      }\n      res.json(job);\n    } catch (error) {\n      console.error(\"Get job error:\", error);\n      res.status(500).json({ error: \"Failed to get job\" });\n    }\n  });\n\n  // ==================== TECHNICIAN ROUTES ====================\n\n  // Get all technicians\n  app.get(\"/api/technicians\", async (req, res) => {\n    try {\n      const { city, service } = req.query;\n      let technicians = await storage.getAllTechnicians();\n      \n      if (city) {\n        technicians = technicians.filter(\n          t => t.city.toLowerCase() === (city as string).toLowerCase()\n        );\n      }\n      \n      if (service) {\n        technicians = technicians.filter(\n          t => t.services.includes(service as string)\n        );\n      }\n      \n      res.json(technicians);\n    } catch (error) {\n      console.error(\"Get technicians error:\", error);\n      res.status(500).json({ error: \"Failed to get technicians\" });\n    }\n  });\n\n  // Get technician by ID\n  app.get(\"/api/technicians/:id\", async (req, res) => {\n    try {\n      const technician = await storage.getTechnician(req.params.id);\n      if (!technician) {\n        return res.status(404).json({ error: \"Technician not found\" });\n      }\n      res.json(technician);\n    } catch (error) {\n      console.error(\"Get technician error:\", error);\n      res.status(500).json({ error: \"Failed to get technician\" });\n    }\n  });\n\n  // ==================== BOOKING ROUTES ====================\n\n  // Create booking\n  app.post(\"/api/bookings\", async (req, res) => {\n    try {\n      const { jobId, technicianId, clientName, clientPhone, scheduledDate, scheduledTime } = req.body;\n      \n      if (!jobId || !technicianId || !clientName || !clientPhone || !scheduledDate || !scheduledTime) {\n        return res.status(400).json({ error: \"All booking fields are required\" });\n      }\n\n      const job = await storage.getJob(jobId);\n      if (!job) {\n        return res.status(404).json({ error: \"Job not found\" });\n      }\n\n      const technician = await storage.getTechnician(technicianId);\n      if (!technician) {\n        return res.status(404).json({ error: \"Technician not found\" });\n      }\n\n      const booking = await storage.createBooking({\n        jobId,\n        technicianId,\n        clientName,\n        clientPhone,\n        scheduledDate,\n        scheduledTime,\n        status: \"pending\",\n        estimatedCost: job.likelyCost,\n        matchScore: 0.85,\n        matchExplanation: `Réservation pour ${technician.name}`,\n      });\n\n      // Update job status\n      await storage.updateJob(jobId, { status: \"accepted\" });\n\n      res.json(booking);\n    } catch (error) {\n      console.error(\"Create booking error:\", error);\n      res.status(500).json({ error: \"Failed to create booking\" });\n    }\n  });\n\n  // Get all bookings\n  app.get(\"/api/bookings\", async (req, res) => {\n    try {\n      const bookings = await storage.getAllBookings();\n      res.json(bookings);\n    } catch (error) {\n      console.error(\"Get bookings error:\", error);\n      res.status(500).json({ error: \"Failed to get bookings\" });\n    }\n  });\n\n  // ==================== TECHNICIAN DASHBOARD ROUTES ====================\n\n  // Get technician stats (mock for now)\n  app.get(\"/api/technician/stats\", async (_req, res) => {\n    try {\n      // In a real app, this would be based on authenticated technician\n      const stats = {\n        totalEarnings: 45600,\n        pendingJobs: 3,\n        completedJobs: 127,\n        averageRating: 4.8,\n        responseRate: 94,\n        thisMonthEarnings: 8500,\n        lastMonthEarnings: 7200,\n      };\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Get stats error:\", error);\n      res.status(500).json({ error: \"Failed to get stats\" });\n    }\n  });\n\n  // Get pending jobs for technician\n  app.get(\"/api/technician/pending-jobs\", async (_req, res) => {\n    try {\n      const jobs = await storage.getJobsByStatus(\"pending\");\n      \n      // Transform to pending job format\n      const pendingJobs = jobs.map(job => ({\n        id: job.id,\n        description: job.description,\n        service: job.service,\n        city: job.city,\n        urgency: job.urgency,\n        clientName: \"Client\",\n        estimatedCost: job.likelyCost || 250,\n        distance: Math.floor(Math.random() * 10) + 1,\n        matchScore: 0.85 + Math.random() * 0.1,\n        createdAt: job.createdAt?.toISOString() || new Date().toISOString(),\n      }));\n      \n      res.json(pendingJobs);\n    } catch (error) {\n      console.error(\"Get pending jobs error:\", error);\n      res.status(500).json({ error: \"Failed to get pending jobs\" });\n    }\n  });\n\n  // Accept job\n  app.post(\"/api/technician/jobs/:id/accept\", async (req, res) => {\n    try {\n      const job = await storage.updateJob(req.params.id, { status: \"accepted\" });\n      if (!job) {\n        return res.status(404).json({ error: \"Job not found\" });\n      }\n      res.json({ success: true, job });\n    } catch (error) {\n      console.error(\"Accept job error:\", error);\n      res.status(500).json({ error: \"Failed to accept job\" });\n    }\n  });\n\n  // Decline job\n  app.post(\"/api/technician/jobs/:id/decline\", async (req, res) => {\n    try {\n      const job = await storage.updateJob(req.params.id, { status: \"cancelled\" });\n      if (!job) {\n        return res.status(404).json({ error: \"Job not found\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Decline job error:\", error);\n      res.status(500).json({ error: \"Failed to decline job\" });\n    }\n  });\n\n  // ==================== CLIENT DASHBOARD ROUTES ====================\n\n  // Get client stats\n  app.get(\"/api/client/stats\", async (_req, res) => {\n    try {\n      const stats = {\n        activeJobs: 2,\n        completedJobs: 15,\n        totalSpent: 12500,\n        averageRating: 4.7,\n      };\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Get client stats error:\", error);\n      res.status(500).json({ error: \"Failed to get stats\" });\n    }\n  });\n\n  // Get client jobs\n  app.get(\"/api/client/jobs\", async (_req, res) => {\n    try {\n      const jobs = await storage.getAllJobs();\n      const clientJobs = jobs.map(job => ({\n        id: job.id,\n        description: job.description,\n        service: job.service,\n        city: job.city,\n        urgency: job.urgency,\n        status: job.status,\n        estimatedCost: job.likelyCost || 250,\n        createdAt: job.createdAt?.toISOString() || new Date().toISOString(),\n      }));\n      res.json(clientJobs);\n    } catch (error) {\n      console.error(\"Get client jobs error:\", error);\n      res.status(500).json({ error: \"Failed to get jobs\" });\n    }\n  });\n\n  // ==================== DARIJA CHAT ROUTES ====================\n\n  // DarijaChat endpoint\n  app.post(\"/api/chat/darija\", async (req, res) => {\n    try {\n      const { message, history } = req.body;\n      \n      if (!message) {\n        return res.status(400).json({ error: \"Message is required\" });\n      }\n\n      // AI-powered Darija chat response\n      const { darijaChat } = await import(\"./ai-service\");\n      const response = await darijaChat(message, history || []);\n      \n      res.json({ response });\n    } catch (error) {\n      console.error(\"DarijaChat error:\", error);\n      // Fallback response in Darija\n      res.json({ \n        response: \"Smhli, kayna mochkila teknika. 3awed l message dyalek mn ba3d.\" \n      });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":11323},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/pages/TechnicianProfile.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useParams, Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { \n  Star, \n  MapPin, \n  ArrowLeft, \n  Phone, \n  Mail, \n  Briefcase, \n  CheckCircle,\n  Quote\n} from \"lucide-react\";\nimport type { TechnicianWithUser } from \"@shared/schema\";\nimport { useState } from \"react\";\nimport { BookingModal } from \"@/components/booking/BookingModal\";\n\nexport default function TechnicianProfile() {\n  const { id } = useParams<{ id: string }>();\n  const [showBooking, setShowBooking] = useState(false);\n\n  const { data: technician, isLoading, error } = useQuery<TechnicianWithUser>({\n    queryKey: ['/api/technicians', id],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n          <div className=\"md:col-span-1\">\n            <Card className=\"p-6\">\n              <Skeleton className=\"w-32 h-32 rounded-full mx-auto mb-4\" />\n              <Skeleton className=\"h-6 w-3/4 mx-auto mb-2\" />\n              <Skeleton className=\"h-4 w-1/2 mx-auto mb-4\" />\n              <Skeleton className=\"h-10 w-full\" />\n            </Card>\n          </div>\n          <div className=\"md:col-span-2 space-y-6\">\n            <Card className=\"p-6\">\n              <Skeleton className=\"h-6 w-1/4 mb-4\" />\n              <Skeleton className=\"h-20 w-full\" />\n            </Card>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !technician) {\n    return (\n      <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\n        <Card className=\"p-8 text-center\">\n          <p className=\"text-muted-foreground mb-4\">Technicien non trouvé</p>\n          <Link href=\"/\">\n            <Button variant=\"outline\">Retour à l'accueil</Button>\n          </Link>\n        </Card>\n      </div>\n    );\n  }\n\n  const defaultImage = `https://ui-avatars.com/api/?name=${encodeURIComponent(technician.name)}&size=256&background=1e40af&color=fff`;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\n        <Link href=\"/\" className=\"inline-flex items-center gap-2 text-primary hover:underline mb-6\">\n          <ArrowLeft className=\"h-4 w-4\" />\n          <span data-testid=\"link-back\">Retour aux techniciens</span>\n        </Link>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n          <div className=\"md:col-span-1\">\n            <Card className=\"p-6 sticky top-4\">\n              <div className=\"flex flex-col items-center text-center\">\n                <div className=\"relative mb-4\">\n                  <Avatar className=\"w-32 h-32 border-4 border-background shadow-lg\">\n                    <AvatarImage \n                      src={technician.photo || defaultImage} \n                      alt={technician.name}\n                      data-testid=\"img-profile-avatar\"\n                    />\n                    <AvatarFallback className=\"text-3xl font-semibold bg-primary/10 text-primary\">\n                      {technician.name.split(\" \").map(n => n[0]).join(\"\")}\n                    </AvatarFallback>\n                  </Avatar>\n                  {technician.isPro && (\n                    <Badge \n                      className=\"absolute -bottom-1 -right-1 bg-green-500 text-white border-2 border-background\"\n                      data-testid=\"badge-profile-pro\"\n                    >\n                      PRO\n                    </Badge>\n                  )}\n                </div>\n\n                <h1 \n                  className=\"text-xl font-bold text-foreground mb-1\"\n                  data-testid=\"text-profile-name\"\n                >\n                  {technician.name}\n                </h1>\n\n                <div className=\"flex items-center gap-1 text-muted-foreground text-sm mb-2\">\n                  <MapPin className=\"h-4 w-4\" />\n                  <span data-testid=\"text-profile-location\">{technician.city}</span>\n                </div>\n\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <div className=\"flex items-center gap-1 text-yellow-500\">\n                    <Star className=\"h-5 w-5 fill-current\" />\n                    <span \n                      className=\"font-bold text-foreground text-lg\"\n                      data-testid=\"text-profile-rating\"\n                    >\n                      {technician.rating.toFixed(1)}\n                    </span>\n                  </div>\n                  <span className=\"text-muted-foreground text-sm\">\n                    ({technician.reviewCount} avis)\n                  </span>\n                </div>\n\n                <div className=\"w-full mb-4\">\n                  <p className=\"text-2xl font-bold text-primary\" data-testid=\"text-profile-price\">\n                    {technician.hourlyRate} MAD / heure\n                  </p>\n                </div>\n\n                <Button \n                  className=\"w-full bg-slate-900 hover:bg-slate-800 text-white text-lg py-6\"\n                  onClick={() => setShowBooking(true)}\n                  data-testid=\"button-book-profile\"\n                >\n                  Réserver\n                </Button>\n\n                <Badge \n                  variant=\"outline\"\n                  className={`mt-4 ${\n                    technician.availability === \"Immédiat\" \n                      ? \"border-green-500 text-green-600\" \n                      : \"border-muted-foreground text-muted-foreground\"\n                  }`}\n                  data-testid=\"badge-profile-availability\"\n                >\n                  {technician.availability}\n                </Badge>\n              </div>\n            </Card>\n          </div>\n\n          <div className=\"md:col-span-2 space-y-6\">\n            {technician.bio && (\n              <Card className=\"p-6\">\n                <h2 className=\"text-lg font-semibold text-foreground mb-4 flex items-center gap-2\">\n                  <Quote className=\"h-5 w-5 text-primary\" />\n                  À propos\n                </h2>\n                <p \n                  className=\"text-muted-foreground leading-relaxed\"\n                  data-testid=\"text-profile-bio\"\n                >\n                  {technician.bio}\n                </p>\n              </Card>\n            )}\n\n            <Card className=\"p-6\">\n              <h2 className=\"text-lg font-semibold text-foreground mb-4\">\n                Informations\n              </h2>\n              <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n                {technician.phone && (\n                  <div className=\"flex items-center gap-3 p-3 rounded-lg bg-muted/50\">\n                    <Phone className=\"h-5 w-5 text-primary\" />\n                    <div>\n                      <p className=\"text-xs text-muted-foreground\">Téléphone</p>\n                      <p \n                        className=\"font-medium text-foreground text-sm\"\n                        data-testid=\"text-profile-phone\"\n                      >\n                        {technician.phone}\n                      </p>\n                    </div>\n                  </div>\n                )}\n                {technician.email && (\n                  <div className=\"flex items-center gap-3 p-3 rounded-lg bg-muted/50\">\n                    <Mail className=\"h-5 w-5 text-primary\" />\n                    <div>\n                      <p className=\"text-xs text-muted-foreground\">Email</p>\n                      <p \n                        className=\"font-medium text-foreground text-sm truncate\"\n                        data-testid=\"text-profile-email\"\n                      >\n                        {technician.email}\n                      </p>\n                    </div>\n                  </div>\n                )}\n                <div className=\"flex items-center gap-3 p-3 rounded-lg bg-muted/50\">\n                  <Briefcase className=\"h-5 w-5 text-primary\" />\n                  <div>\n                    <p className=\"text-xs text-muted-foreground\">Expérience</p>\n                    <p \n                      className=\"font-medium text-foreground text-sm\"\n                      data-testid=\"text-profile-experience\"\n                    >\n                      {technician.yearsExperience} ans\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </Card>\n\n            <Card className=\"p-6\">\n              <h2 className=\"text-lg font-semibold text-foreground mb-4\">\n                Spécialités\n              </h2>\n              <div className=\"flex flex-wrap gap-2\" data-testid=\"container-specialties\">\n                {technician.skills.map((skill, idx) => (\n                  <Badge \n                    key={idx} \n                    variant=\"secondary\" \n                    className=\"bg-primary/10 text-primary border-0 px-3 py-1\"\n                  >\n                    {skill}\n                  </Badge>\n                ))}\n              </div>\n            </Card>\n\n            {technician.certifications && technician.certifications.length > 0 && (\n              <Card className=\"p-6\">\n                <h2 className=\"text-lg font-semibold text-foreground mb-4\">\n                  Certifications\n                </h2>\n                <ul className=\"space-y-2\" data-testid=\"container-certifications\">\n                  {technician.certifications.map((cert, idx) => (\n                    <li key={idx} className=\"flex items-center gap-2 text-muted-foreground\">\n                      <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                      <span>{cert}</span>\n                    </li>\n                  ))}\n                </ul>\n              </Card>\n            )}\n\n            {technician.recentReview && (\n              <Card className=\"p-6\">\n                <h2 className=\"text-lg font-semibold text-foreground mb-4\">\n                  Derniers Avis\n                </h2>\n                <div \n                  className=\"bg-muted/30 rounded-lg p-4 border-l-4 border-primary\"\n                  data-testid=\"container-review\"\n                >\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <div className=\"flex items-center gap-1 text-yellow-500\">\n                      {[...Array(5)].map((_, i) => (\n                        <Star \n                          key={i} \n                          className={`h-4 w-4 ${\n                            i < (technician.recentReview?.rating || 5) \n                              ? \"fill-current\" \n                              : \"text-muted\"\n                          }`} \n                        />\n                      ))}\n                    </div>\n                  </div>\n                  <p className=\"text-muted-foreground italic mb-2\">\n                    \"{technician.recentReview.text}\"\n                  </p>\n                  <p className=\"text-sm font-medium text-foreground\">\n                    — {technician.recentReview.author}\n                  </p>\n                </div>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {showBooking && (\n        <BookingModal\n          technician={technician}\n          onClose={() => setShowBooking(false)}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":11480}},"version":2}